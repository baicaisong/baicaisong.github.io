<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>neovim å…¥é—¨é…ç½®</title>
    <link href="/2021/06/19/neovim/"/>
    <url>/2021/06/19/neovim/</url>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å¯¹ vim èµ·äº†å…´è¶£ï¼Œä¸€æ–¹é¢æ˜¯ä¸æƒ³è¢« vscode ä¸­å¾ˆå¤šä¸å¿…è¦çš„åŠŸèƒ½æŸç¼šï¼Œä¸€æ–¹é¢æ˜¯ ä½¿ç”¨ vscode ä¸­çš„å¿«æ·é”®éš¾å…è¿˜æ˜¯éœ€è¦ç”¨åˆ°è§¦æ§æ¿,èŠ±äº†ä¸€å¤©æ—¶é—´åšäº†ä¸€ä¸‹ neovim çš„é…ç½®ã€‚</p><a id="more"></a><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ol><li>è¾“å…¥<code>vimtuto</code>å¯ä»¥æ‰“å¼€å®˜æ–¹çš„ã€ŠVIM æ•™ç¨‹ã€‹ï¼ŒèŠ± 30 åˆ†é’Ÿäº†è§£ä¸€ä¸‹æœ€åŸºæœ¬çš„æ“ä½œï¼Œä¾‹å¦‚ï¼š</li></ol><ul><li>å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œé€€å‡º vimï¼š<code>:q</code></li><li>æ™®é€šæ¨¡å¼ä¸‹ï¼Œä¸Šä¸‹å·¦å³ç§»åŠ¨ï¼š<code>hjkl</code></li></ul><ol start="2"><li>å®‰è£…<a href="https://github.com/neovim/neovim/wiki/Installing-Neovim">neovim</a><br>å®‰è£…å®Œæˆå<ul><li><code>nvim</code>æ‰“å¼€ç©ºæ–‡ä»¶</li><li><code>nvim + [æ–‡ä»¶å]</code> æ‰“å¼€å¯¹åº”æ–‡ä»¶</li></ul></li></ol><p><img src="https://i.loli.net/2021/06/19/HSe8ufhlGVrczpk.png" alt="package.json"></p><ol start="3"><li>mac ä¸‹ä¼šå‘ç°é•¿æŒ‰ hjkl é”®æ— æ³•æŒç»­ç§»åŠ¨å…‰æ ‡<br>è§£å†³åŠæ³•ï¼šåœ¨ç»ˆç«¯è¾“å…¥ <code>defaults write com.microsoft.VSCode ApplePressAndHoldEnabled -bool false</code>ï¼Œé‡å¯ nvim</li></ol><h2 id="åŸºæœ¬é…ç½®"><a href="#åŸºæœ¬é…ç½®" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h2><p>æ–°å»º neovim çš„é…ç½®æ–‡ä»¶ï¼š<code>touch ~/.config/nvim/init.vim</code>ï¼Œä¹‹åæ‰€æœ‰çš„é…ç½®é¡¹éƒ½ä¼šå†™åœ¨è¿™é‡Œã€‚</p><p>ä¾‹å¦‚å†™å…¥<code>set number</code>å¹¶ä¿å­˜é‡å¯,å¯ä»¥æ˜¾ç¤ºè¡Œå·ã€‚<br>æˆ‘çš„é…ç½®å¦‚ä¸‹ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶åˆ° init.vim æ–‡ä»¶ä¸‹ï¼ŒåŒå¼•å·è¡¨ç¤ºæ³¨é‡Š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-comment">&quot; ä¸ä¸Vi å…¼å®¹</span><br><span class="hljs-keyword">set</span> nocompatible<br><span class="hljs-comment">&quot; è¯­æ³•é«˜äº®</span><br><span class="hljs-keyword">syntax</span> <span class="hljs-keyword">on</span><br><span class="hljs-comment">&quot; æ˜¾ç¤ºè¡Œå·</span><br><span class="hljs-keyword">set</span> <span class="hljs-keyword">number</span><br><span class="hljs-comment">&quot; æ˜¾ç¤ºç›¸å¯¹è¡Œå·</span><br><span class="hljs-keyword">set</span> relativenumber<br><span class="hljs-comment">&quot; æ¢è¡Œ</span><br><span class="hljs-keyword">set</span> wrap<br><span class="hljs-comment">&quot; ä¸åœ¨å•è¯å†…éƒ¨æ¢è¡Œ</span><br><span class="hljs-keyword">set</span> linebreak<br><span class="hljs-comment">&quot; å³æ—¶æœç´¢é¢„è§ˆ</span><br><span class="hljs-keyword">set</span> incsearch<br><span class="hljs-comment">&quot; ç¼–ç æ ¼å¼</span><br><span class="hljs-keyword">set</span> encoding=utf-<span class="hljs-number">8</span><br><span class="hljs-comment">&quot; è®¾ç½®é»˜è®¤è¿›è¡Œå¤§å°å†™ä¸æ•æ„ŸæŸ¥æ‰¾</span><br><span class="hljs-keyword">set</span> ignorecase<br><span class="hljs-comment">&quot; å¦‚æœæœ‰ä¸€ä¸ªå¤§å†™å­—æ¯ï¼Œåˆ™åˆ‡æ¢åˆ°å¤§å°å†™æ•æ„ŸæŸ¥æ‰¾</span><br><span class="hljs-keyword">set</span> smartcase<br></code></pre></td></tr></table></figure><h2 id="Leader"><a href="#Leader" class="headerlink" title="Leader"></a>Leader</h2><p>Leader å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å‘½ä»¤æ¥æ‰§è¡Œå„ç§å‘½ä»¤</p><h3 id="è®¾ç½®"><a href="#è®¾ç½®" class="headerlink" title="è®¾ç½®"></a>è®¾ç½®</h3><p>ä½ å¯ä»¥å°† Leader è®¾ç½®ä¸ºä»»ä½•é”®ï¼Œé€šå¸¸è®¾ç½®ä¸º</p><ul><li>ç©ºæ ¼<code>let mapleader=&quot; &quot;</code></li><li>æˆ–é€—å·<code>let mapleader=&quot;,&quot;</code></li></ul><h3 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><p>ä¾‹å¦‚<code>nmap &lt;Leader&gt;q :q&lt;CR&gt;</code>è¡¨ç¤º normal æ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ç©ºæ ¼å’Œ qï¼Œç­‰äºåŸæœ¬<code>:q</code>çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯é€€å‡º nvim</p><p>æˆ‘è®¾ç½®äº†ç©ºæ ¼ä¸º leader</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-comment">&quot; set leader</span><br><span class="hljs-keyword">let</span> mapleader=<span class="hljs-string">&quot; &quot;</span><br><span class="hljs-keyword">nmap</span> <span class="hljs-symbol">&lt;leader&gt;</span><span class="hljs-keyword">w</span> :<span class="hljs-keyword">w</span><span class="hljs-symbol">&lt;CR&gt;</span><br><span class="hljs-keyword">nmap</span> <span class="hljs-symbol">&lt;leader&gt;</span>q :q<span class="hljs-symbol">&lt;CR&gt;</span><br></code></pre></td></tr></table></figure><h2 id="å®‰è£…ç¬¬ä¸€ä¸ªæ’ä»¶"><a href="#å®‰è£…ç¬¬ä¸€ä¸ªæ’ä»¶" class="headerlink" title="å®‰è£…ç¬¬ä¸€ä¸ªæ’ä»¶"></a>å®‰è£…ç¬¬ä¸€ä¸ªæ’ä»¶</h2><p>ä½¿ç”¨ <a href="https://i.loli.net/2021/06/19/kKRJBgtSLXOM5z8.png">vim-plug</a> æ¥ç®¡ç†å…¶ä»–æ’ä»¶</p><p>åªéœ€è¦åœ¨ begin å’Œ end ä¸­å†™å…¥ github ä¸Šå¯¹åº”çš„<code>Plug &#39;[github user name]/[github repo name]</code>å°±è¡¨ç¤ºè¦å®‰è£…æ­¤æ’ä»¶ï¼Œä¾‹å¦‚:</p><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs leaf">call plug<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">begin</span><span class="hljs-params">()</span></span><br>Plug &#x27;mhinz/vim-startify&#x27;<br>call plug<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">end</span><span class="hljs-params">()</span></span><br></code></pre></td></tr></table></figure><p>è¡¨ç¤ºå°†å®‰è£…<code>https://github.com/mhinz/vim-startify</code><a href="https://github.com/mhinz/vim-startify">è¿™ä¸ªæ’ä»¶</a>,å®ƒå¯ä»¥åœ¨ nvim å¯åŠ¨æ—¶æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢ï¼Œæä¾›ä¹‹å‰æ‰“å¼€è¿‡çš„é¡µé¢çš„å¿«æ·å…¥å£</p><p>æ¥ç€è¿›å…¥ nvim å¹¶å®‰è£…æ’ä»¶ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir">nvim<br><span class="hljs-symbol">:PlugInstall</span><br></code></pre></td></tr></table></figure><p>å®Œæˆåé‡å¯ nvimï¼Œå³å¯çœ‹åˆ°æ•ˆæœã€‚</p><h2 id="Theme"><a href="#Theme" class="headerlink" title="Theme"></a>Theme</h2><p>æŠ˜è…¾ vim çš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è¦æ‰¾ä¸€ä¸ªå¥½çœ‹çš„ä¸»é¢˜ï¼<br>æˆ‘é€‰äº†</p><ul><li><code>Plug &#39;sainnhe/everforest&#39;</code>ï¼Œæ˜¯ä¸€å¥—æ£®æ—é£æ ¼çš„ä¸»é¢˜é…è‰²ï¼Œä½ å¯ä»¥é€‰æ‹©ä½ å–œæ¬¢çš„ä¸»é¢˜</li><li><code>Plug &#39;itchyny/lightline.vim&#39;</code>ï¼ŒçŠ¶æ€æ ä¿®æ”¹</li></ul><p>è¿™ä¸ªä¸»é¢˜è¿˜éœ€è¦å¼€å¯çœŸå½©è‰²</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-comment">&quot; å¼€å¯çœŸå½©è‰²</span><br><span class="hljs-keyword">set</span> termguicolors<br><span class="hljs-comment">&quot; é€‰æ‹©ä¸»é¢˜</span><br><span class="hljs-keyword">colorscheme</span> everforest<br><span class="hljs-comment">&quot; é€‰æ‹©wombaté£æ ¼çŠ¶æ€æ </span><br><span class="hljs-keyword">let</span> <span class="hljs-variable">g:lightline</span> = &#123;<br>      \ <span class="hljs-string">&#x27;colorscheme&#x27;</span>: <span class="hljs-string">&#x27;wombat&#x27;</span>,<br>      \ &#125;<br></code></pre></td></tr></table></figure><h2 id="NERDTree"><a href="#NERDTree" class="headerlink" title="NERDTree"></a>NERDTree</h2><p>æ–‡ä»¶æ ‘æ’ä»¶<br><code>Plug &#39;preservim/NERDTree&#39;</code><br>å…¶ä»–é…ç½®ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-comment">&quot; **** NERDTree</span><br><span class="hljs-comment">&quot; æ˜¾ç¤ºéšè—æ–‡ä»¶</span><br><span class="hljs-keyword">let</span> NERDTreeShowHidden=<span class="hljs-number">1</span><br><span class="hljs-comment">&quot; æ˜¾éšæ–‡ä»¶æ ‘</span><br><span class="hljs-keyword">nmap</span> <span class="hljs-symbol">&lt;Leader&gt;</span>t :NERDTreeToggle<span class="hljs-symbol">&lt;CR&gt;</span><br><span class="hljs-comment">&quot; å…³é—­æç¤ºï¼šPress ? for help</span><br><span class="hljs-keyword">let</span> NERDTreeMinimalUI = <span class="hljs-number">1</span><br><span class="hljs-keyword">let</span> NERDTreeDirArrows = <span class="hljs-number">1</span><br><span class="hljs-comment">&quot; æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨å…³é—­ NerdTree</span><br><span class="hljs-keyword">let</span> NERDTreeQuitOnOpen = <span class="hljs-number">1</span><br><span class="hljs-comment">&quot; å…³é—­vimæ—¶ï¼Œå¦‚æœæ‰“å¼€çš„æ–‡ä»¶é™¤äº†NERDTreeæ²¡æœ‰å…¶ä»–æ–‡ä»¶æ—¶ï¼Œå®ƒè‡ªåŠ¨å…³é—­ï¼Œå‡å°‘å¤šæ¬¡æŒ‰:q!</span><br><span class="hljs-keyword">autocmd</span> bufenter * <span class="hljs-keyword">if</span> (<span class="hljs-built_in">winnr</span>(<span class="hljs-string">&quot;$&quot;</span>) == <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">exists</span>(<span class="hljs-string">&quot;b:NERDTreeType&quot;</span>) &amp;&amp;<span class="hljs-variable">b:NERDTreeType</span> == <span class="hljs-string">&quot;primary&quot;</span>) | q | <span class="hljs-keyword">endif</span><br><span class="hljs-comment">&quot; è¿›å…¥nvimæ—¶ï¼Œè‡ªåŠ¨æ‰“å¼€nerdtreeå’Œstartify</span><br><span class="hljs-keyword">autocmd</span> VimEnter *<br>                \   <span class="hljs-keyword">if</span> !argc()<br>                \ |   Startify<br>                \ |   NERDTree<br>                \ | <span class="hljs-keyword">endif</span><br></code></pre></td></tr></table></figure><h2 id="COC"><a href="#COC" class="headerlink" title="COC"></a>COC</h2><p><code>Plug &#39;neoclide/coc.nvim&#39;, &#123;&#39;branch&#39;: &#39;release&#39;&#125;</code><br>å®˜æ–¹é»˜è®¤ç»™äº†ä¸€ä»½é…ç½®ï¼Œå¯ä»¥é€‰æ‹©è‡ªå·±éœ€è¦çš„éƒ¨åˆ†åŠ å…¥ï¼Œæˆ‘é€‰æ‹©äº†ä»¥ä¸‹ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-comment">&quot; coc</span><br><span class="hljs-keyword">nmap</span> <span class="hljs-symbol">&lt;leader&gt;</span>rn <span class="hljs-symbol">&lt;Plug&gt;</span>(coc-<span class="hljs-built_in">rename</span>)<br><span class="hljs-keyword">nmap</span> <span class="hljs-symbol">&lt;silent&gt;</span> <span class="hljs-keyword">gr</span> <span class="hljs-symbol">&lt;Plug&gt;</span>(coc-references)<br><span class="hljs-keyword">nmap</span> <span class="hljs-symbol">&lt;silent&gt;</span> gd :<span class="hljs-keyword">call</span> CocAction(<span class="hljs-string">&#x27;jumpDefinition&#x27;</span>, <span class="hljs-string">&#x27;tab drop&#x27;</span>) <span class="hljs-symbol">&lt;CR&gt;</span><br></code></pre></td></tr></table></figure><h3 id="TypeScript-è¡¥å…¨"><a href="#TypeScript-è¡¥å…¨" class="headerlink" title="TypeScript è¡¥å…¨"></a>TypeScript è¡¥å…¨</h3><p>coc.nvim åªæ˜¯ä¸€ä¸ªå¹³å°ï¼Œå¯ä»¥åœ¨ä¸Šé¢å®‰è£…è¯­è¨€æ’ä»¶<br>å¦‚æœæƒ³è¦ TypeScript è¡¥å…¨å¯ä»¥å®‰è£…<a href="https://github.com/neoclide/coc-tsserver">coc-tsserver</a>ã€‚</p><ul><li>å®‰è£…<br><code>:CocInstall coc-tsserver</code></li><li>é…ç½®<br><code>:CocConfig</code></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;tsserver.tsdk&quot;</span>: <span class="hljs-string">&quot;.yarn/sdks/typescript/lib&quot;</span>,<br>  <span class="hljs-attr">&quot;eslint.packageManager&quot;</span>: <span class="hljs-string">&quot;yarn&quot;</span>,<br>  <span class="hljs-attr">&quot;eslint.nodePath&quot;</span>: <span class="hljs-string">&quot;.yarn/sdks&quot;</span><br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="Prettier"><a href="#Prettier" class="headerlink" title="Prettier"></a>Prettier</h2><ul><li>å®‰è£…<br><code>:CocInstall coc-prettier</code></li><li>é…ç½®<br><code>command! -nargs=0 Prettier :CocCommand prettier.formatFile</code></li></ul><p>æ‰§è¡Œ<code>:Prettier</code>å°±å¯ä»¥æ ¼å¼åŒ–æ–‡ä»¶ã€‚</p><h3 id="ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–"><a href="#ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–" class="headerlink" title="ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–"></a>ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–</h3><p><code>CocConfig</code>ï¼š</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs prolog"><span class="hljs-string">&quot;coc.preferences.formatOnSaveFiletypes&quot;</span>: [<br>  <span class="hljs-string">&quot;javascript&quot;</span>,<br>  <span class="hljs-string">&quot;typescript&quot;</span>,<br>  <span class="hljs-string">&quot;typescriptreact&quot;</span>,<br>  <span class="hljs-string">&quot;json&quot;</span>,<br>  <span class="hljs-string">&quot;javascriptreact&quot;</span>,<br>  <span class="hljs-string">&quot;css&quot;</span>,<br>  <span class="hljs-string">&quot;Markdown&quot;</span>,<br>  <span class="hljs-string">&quot;md&quot;</span><br> ]<br></code></pre></td></tr></table></figure><h3 id="ç¼©è¿›"><a href="#ç¼©è¿›" class="headerlink" title="ç¼©è¿›"></a>ç¼©è¿›</h3><p>æ ¼å¼åŒ–åä¼šå‘ç°æ–‡ä»¶ç¼©è¿›ä¸æ­£å¸¸ï¼Œprettier çš„é»˜è®¤ç¼©è¿›æ˜¯ 2ï¼Œè€Œåœ¨ vim ä¸­ï¼Œtab å­—ç¬¦é»˜è®¤çš„æ˜¾ç¤ºå®½åº¦æ˜¯ 8 ä¸ªç©ºæ ¼ï¼Œ<br>ä¸ºäº†ä¿æŒä¸€è‡´ï¼Œå°† vim ä¸­çš„ tab ç”¨ç©ºæ ¼æ¥è¡¨ç¤ºï¼Œè€Œç­‰äº 2 ä¸ªç©ºæ ¼</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-comment">&quot; æŒ‰ä¸€ä¸ªtabä¹‹åï¼Œæ˜¾ç¤ºå‡ºæ¥çš„ç›¸å½“äºå‡ ä¸ªç©ºæ ¼ï¼Œé»˜è®¤çš„æ˜¯8ä¸ª</span><br><span class="hljs-keyword">set</span> tabstop=<span class="hljs-number">2</span><br><span class="hljs-comment">&quot; åœ¨ç¼–è¾‘æ¨¡å¼çš„æ—¶å€™æŒ‰é€€æ ¼é”®çš„æ—¶å€™é€€å›ç¼©è¿›çš„é•¿åº¦</span><br><span class="hljs-keyword">set</span> softtabstop =<span class="hljs-number">2</span><br><span class="hljs-comment">&quot; è¡¨ç¤ºæ¯ä¸€çº§ç¼©è¿›çš„é•¿åº¦ï¼Œä¸€èˆ¬è®¾ç½®æˆè·Ÿ softtabstop ä¸€æ ·</span><br><span class="hljs-keyword">set</span> <span class="hljs-built_in">shiftwidth</span>=<span class="hljs-number">2</span><br><span class="hljs-comment">&quot; å½“è®¾ç½®æˆ expandtab æ—¶ï¼Œç¼©è¿›ç”¨ç©ºæ ¼æ¥è¡¨ç¤º</span><br><span class="hljs-keyword">set</span> expandtab<br></code></pre></td></tr></table></figure><h2 id="FZF"><a href="#FZF" class="headerlink" title="FZF"></a>FZF</h2><p>æ–‡ä»¶æŸ¥æ‰¾</p><figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sml"><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;junegunn</span>/fzf&#x27;, &#123; <span class="hljs-symbol">&#x27;do&#x27;</span>: &#123; -&gt; fzf#install<span class="hljs-literal">()</span> &#125; &#125;<br><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;junegunn</span>/fzf.vim&#x27;<br></code></pre></td></tr></table></figure><p><code>:FZF</code> ä¼šåœ¨æ‰€æœ‰æ–‡ä»¶é‡ŒæŸ¥æ‰¾ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™æƒ³æ’é™¤ä¸€äº›æ–‡ä»¶ï¼Œä¾‹å¦‚ node_modules ã€‚<br>å¯ä»¥ä½¿ç”¨ <code>:GFiles</code>ï¼Œä¼šæ’é™¤åœ¨ .gitignore é‡Œçš„æ–‡ä»¶ï¼Œç¼ºç‚¹æ˜¯æ–°å»ºçš„æ–‡ä»¶ä¸ä¼šè¢«æœç´¢åˆ°ï¼Œ<code>git add</code>è¯¥æ–‡ä»¶åå¯ä»¥è¢«æœç´¢åˆ°</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-comment">&quot; åœ¨æ‰€æœ‰æ–‡ä»¶é‡ŒæŸ¥æ‰¾</span><br><span class="hljs-keyword">nmap</span> <span class="hljs-symbol">&lt;Leader&gt;</span>ff :FZF<span class="hljs-symbol">&lt;CR&gt;</span><br><span class="hljs-comment">&quot; æŸ¥æ‰¾ä¸åœ¨ .gitignore é‡Œçš„å…¶ä»–æ–‡ä»¶</span><br><span class="hljs-keyword">nmap</span> <span class="hljs-symbol">&lt;silent&gt;</span><span class="hljs-symbol">&lt;Leader&gt;</span><span class="hljs-keyword">f</span> :GFiles<span class="hljs-symbol">&lt;CR&gt;</span><br></code></pre></td></tr></table></figure><h2 id="å…¶ä»–æ’ä»¶"><a href="#å…¶ä»–æ’ä»¶" class="headerlink" title="å…¶ä»–æ’ä»¶"></a>å…¶ä»–æ’ä»¶</h2><figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sml"><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;leafgarland</span>/typescript-vim&#x27;<br><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;peitalin</span>/vim-jsx-typescript&#x27;<br><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;honza</span>/vim-snippets&#x27;<br><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;easymotion</span>/vim-easymotion&#x27;<br><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;preservim</span>/nerdcommenter&#x27;<br><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;christoomey</span>/vim-tmux-navigator&#x27;<br><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;ap</span>/vim-css-color&#x27;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨ SVG å’Œ CSS ç»˜åˆ¶è¶…æ¤­åœ†</title>
    <link href="/2021/05/13/superellipse/"/>
    <url>/2021/05/13/superellipse/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><ul><li><a href="https://codesandbox.io/s/superellipse-o7wit?file=/src/styles.css">ä»£ç åœ°å€</a></li><li>ä½¿ç”¨ bordr-raduis å¯ä»¥å®ç°çŸ©é˜µçš„åœ†è§’ï¼Œä½†è¶…æ¤­åœ†é™¤äº†è§’ï¼Œå…¶è¾¹ä¹Ÿæ˜¯å¹³æ»‘çš„åœ†å¼§<br><img src="https://i.loli.net/2021/05/13/Br3tZ5xQgXhvIc1.png" alt="è¶…æ¤­åœ†ä¸åœ†è§’çŸ©é˜µ"></li></ul><h2 id="SVG-ç»˜åˆ¶è¶…æ¤­åœ†"><a href="#SVG-ç»˜åˆ¶è¶…æ¤­åœ†" class="headerlink" title="SVG ç»˜åˆ¶è¶…æ¤­åœ†"></a>SVG ç»˜åˆ¶è¶…æ¤­åœ†</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;svg viewBox=<span class="hljs-string">&quot;0 0 100 100&quot;</span> width=&#123;<span class="hljs-number">100</span>&#125; height=&#123;<span class="hljs-number">100</span>&#125;&gt;<br>  &lt;path<br>    fill=<span class="hljs-string">&quot;#ff6700&quot;</span><br>    d=<span class="hljs-string">&quot;</span><br><span class="hljs-string">        M 50,0</span><br><span class="hljs-string">        q 50,0 50,50</span><br><span class="hljs-string">        q 0,50 -50,50</span><br><span class="hljs-string">        q -50,0 -50,-50</span><br><span class="hljs-string">        q 0,-50 50,-50</span><br><span class="hljs-string">    &quot;</span><br>  /&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h2 id="CSS-ä¸­å¼•å…¥-SVG"><a href="#CSS-ä¸­å¼•å…¥-SVG" class="headerlink" title="CSS ä¸­å¼•å…¥ SVG"></a>CSS ä¸­å¼•å…¥ SVG</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/mask">mask</a>å¯ä»¥ä½¿ç”¨ SVG å›¾å½¢ä¸­çš„å½¢çŠ¶æ¥åšé®ç½©ã€‚<br>åœ¨æ‰€éœ€è¦çš„å¯¹è±¡ä¸­å¼•å…¥ä»¥ä¸‹ css å±æ€§å°±å¯ä»¥å˜å½¢è¶…æ¤­åœ†äº†ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-attribute">mask</span>-image: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;data:image/svg+xml;utf8,&lt;svg viewBox=&quot;0 0 100 100&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M 50,0 q 50,0 50,50 q 0,50 -50,50 q -50,0 -50,-50 q 0,-50 50,-50&quot;/&gt;&lt;/svg&gt;&#x27;</span>);<br>-webkit-<span class="hljs-attribute">mask</span>-image: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;data:image/svg+xml;utf8,&lt;svg viewBox=&quot;0 0 100 100&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;path d=&quot;M 50,0 q 50,0 50,50 q 0,50 -50,50 q -50,0 -50,-50 q 0,-50 50,-50&quot;/&gt;&lt;/svg&gt;&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="æ·»åŠ é˜´å½±"><a href="#æ·»åŠ é˜´å½±" class="headerlink" title="æ·»åŠ é˜´å½±"></a>æ·»åŠ é˜´å½±</h2><p>å› ä¸º mask é®ç½©çš„ç¼˜æ•…ï¼Œbox-shadow å±æ€§ä¸ç”Ÿæ•ˆï¼Œæ”¹ç”¨ drop-shadowï¼Œåœ¨å¤–å±‚åµŒå¥—ä¸€å±‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;superellipse&quot;</span>&gt;</span>with shadow<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.container</span> &#123;<br>  <span class="hljs-attribute">filter</span>: <span class="hljs-built_in">drop-shadow</span>(<span class="hljs-number">1px</span> <span class="hljs-number">1px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.21</span>));<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>SVG</tag>
      
      <tag>CSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Debounce Promise</title>
    <link href="/2021/05/01/build-your-own-debounce-promise/"/>
    <url>/2021/05/01/build-your-own-debounce-promise/</url>
    
    <content type="html"><![CDATA[<ul><li>debounce ï¼šå¿½è§†åœ¨ç­‰å¾…æ—¶é—´ï¼ˆä¾‹å¦‚ 400msï¼‰ ä»¥å†…é¢‘ç¹è§¦å‘çš„è°ƒç”¨ï¼Œ400ms åæ‰§è¡Œä¸€æ¬¡è°ƒç”¨å‡½æ•°ï¼›</li><li>debounce promise ï¼šåœ¨ debounce çš„åŸºç¡€ä¸Šï¼Œè°ƒç”¨å‡½æ•°è¿”å›ä¸€ä¸ª Promiseï¼Œé€‚ç”¨äºå¼‚æ­¥è·å–æ•°æ®</li></ul><a id="more"></a><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><ul><li><a href="https://codesandbox.io/s/debounce-eu19i?file=/src/App.tsx">åœ¨çº¿é¢„è§ˆ</a></li></ul><h2 id="Debounce"><a href="#Debounce" class="headerlink" title="Debounce"></a>Debounce</h2><p>debounce åº”è¯¥æ¥å— 2 ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li>è°ƒç”¨çš„å‡½æ•° fn</li><li>ç­‰å¾…æ—¶é—´ wait</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">type ParamsFunction = <span class="hljs-function">(<span class="hljs-params">...args: any</span>) =&gt;</span> <span class="hljs-keyword">void</span>;<br><br><span class="hljs-keyword">const</span> debounce = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">T</span> <span class="hljs-attr">extends</span> <span class="hljs-attr">ParamsFunction</span>&gt;</span>(fn: T, wait: number) =&gt; &#123;</span><br><span class="xml">  return (...args: any) =&gt; &#123;</span><br><span class="xml">    setTimeout(() =&gt; fn(...args), wait);</span><br><span class="xml">  &#125;;</span><br><span class="xml">&#125;;</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿° ğŸŒ° ä¸­ï¼Œæ¯ä¸€æ¬¡ mousemove ä¼šè§¦å‘ä¸€æ¬¡ debounceï¼Œéœ€è¦åšçš„æ˜¯å°† fn åœ¨ 400ms å†…å–æ¶ˆæ‰§è¡Œ</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">time</span> <span class="hljs-comment">(ms)</span> <span class="hljs-literal">-</span>&gt;   <span class="hljs-comment">0</span> --<span class="hljs-literal">-</span>  <span class="hljs-comment">200</span>  --<span class="hljs-literal">-</span>  <span class="hljs-comment">400</span>  --<span class="hljs-literal">-</span>  <span class="hljs-comment">600</span> --<span class="hljs-literal">-</span>  <span class="hljs-comment">800</span> --<span class="hljs-literal">-</span><br>--<span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span><br><span class="hljs-comment">mousemove</span>      <span class="hljs-comment">|</span> -- <span class="hljs-comment">call(1)</span> -- <span class="hljs-comment">call(2)</span> --  <span class="hljs-comment">/</span> --<span class="hljs-literal">-</span>    <span class="hljs-comment">/</span> --<br><span class="hljs-comment">debounce</span>       <span class="hljs-comment">|</span> -- <span class="hljs-comment">call(1)</span> -- <span class="hljs-comment">call(2)</span> --  <span class="hljs-comment">/</span> --<span class="hljs-literal">-</span>    <span class="hljs-comment">/</span> --<br><span class="hljs-comment">fnï¼ˆå»¶è¿Ÿæ‰§è¡Œï¼‰</span>   <span class="hljs-comment">|</span> --<span class="hljs-literal">-</span><span class="hljs-literal">-</span>  <span class="hljs-comment">/</span> --<span class="hljs-literal">-</span><span class="hljs-literal">-</span>    <span class="hljs-comment">/</span>   --<span class="hljs-literal">-</span> <span class="hljs-comment">call(1)</span> <span class="hljs-literal">-</span> <span class="hljs-comment">call(2)</span> --<br><span class="hljs-comment">fnï¼ˆé¢„æœŸï¼‰</span>      <span class="hljs-comment">|</span> --<span class="hljs-literal">-</span><span class="hljs-literal">-</span>  <span class="hljs-comment">/</span> --   <span class="hljs-comment">å–æ¶ˆcall(1)</span><span class="hljs-literal">-</span>  <span class="hljs-comment">/</span> --<span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-literal">-</span> <span class="hljs-comment">call(2)</span> --<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨é—­åŒ…å¯ä»¥<strong>ä¿å­˜å‡½æ•°å†…éƒ¨å˜é‡</strong>çš„ç‰¹æ€§ï¼Œå£°æ˜ä¸€ä¸ªå˜é‡ timerï¼Œä½¿æ¯ä¸€ä¸ª setTimeout å¯¹åº”ä¸€ä¸ªå˜é‡ timerã€‚<br>ä¹Ÿå°±æ˜¯è¯´ç¬¬äºŒæ¬¡æ‰§è¡Œ debounce æ—¶ï¼Œå¯ä»¥å–åˆ°ç¬¬ä¸€æ¬¡çš„ timerã€‚<br>å¦‚æœåœ¨ 400ms å†…é¢‘ç¹è§¦å‘ debounceï¼Œ<code>clearTimeout</code> ä¼šé€šè¿‡ timer æ¸…é™¤ä¸Šä¸€æ¬¡çš„å®šæ—¶ä»»åŠ¡ï¼›<br>å¦‚æœåœ¨ 400ms å†…ä¸å†è§¦å‘ debounceï¼Œåˆ™æœ€åä¸€æ¬¡å®šæ—¶ä»»åŠ¡å¦‚æœŸæ‰§è¡Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> debounce = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">T</span> <span class="hljs-attr">extends</span> <span class="hljs-attr">ParamsFunction</span>&gt;</span>(fn: T, wait: number) =&gt; &#123;</span><br><span class="xml">  let timer: number;</span><br><span class="xml">  return (...args: any) =&gt; &#123;</span><br><span class="xml">    clearTimeout(timer);</span><br><span class="xml">    timer = setTimeout(() =&gt; fn(...args), wait);</span><br><span class="xml">  &#125;;</span><br><span class="xml">&#125;;</span><br></code></pre></td></tr></table></figure><h2 id="Debounce-Promise"><a href="#Debounce-Promise" class="headerlink" title="Debounce Promise"></a>Debounce Promise</h2><p>fn è¿”å›çš„æ˜¯ä¸€ä¸ª promise</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">type ParamsFunction = <span class="hljs-function">(<span class="hljs-params">...args: any</span>) =&gt;</span> <span class="hljs-built_in">Promise</span>&lt;any&gt;;<br><br><span class="hljs-keyword">const</span> debounce = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">T</span> <span class="hljs-attr">extends</span> <span class="hljs-attr">ParamsFunction</span>&gt;</span>(fn: T, wait: number): Result =&gt; &#123;</span><br><span class="xml">  let timer: number;</span><br><span class="xml">  return (...args: any) =&gt;</span><br><span class="xml">    new Promise((resolve, reject) =&gt; &#123;</span><br><span class="xml">      clearTimeout(timer);</span><br><span class="xml">      timer = setTimeout(async () =&gt; &#123;</span><br><span class="xml">        //resolve...</span><br><span class="xml">      &#125;, wait);</span><br><span class="xml">    &#125;);</span><br><span class="xml">&#125;;</span><br></code></pre></td></tr></table></figure><p>setTimeout ä¸­åˆ†åˆ« resolve reject <code>fn</code> å€¼çš„è¿”å›å€¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> fn(...args);<br>    resolve(res);<br>  &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>    reject(error);<br>  &#125;<br>&#125;, wait);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨ TypeScript å®ç° React ï¼ˆä¸‰ï¼‰â€”â€”â€” Reconciler</title>
    <link href="/2021/03/01/build-your-own-react-3/"/>
    <url>/2021/03/01/build-your-own-react-3/</url>
    
    <content type="html"><![CDATA[<blockquote><p>React DOM ä¼šå°†å…ƒç´ å’Œå®ƒçš„å­å…ƒç´ ä¸å®ƒä»¬ä¹‹å‰çš„çŠ¶æ€è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶åªä¼šè¿›è¡Œå¿…è¦çš„æ›´æ–°æ¥ä½¿ DOM è¾¾åˆ°é¢„æœŸçš„çŠ¶æ€ã€‚</p></blockquote><a id="more"></a><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ol><li><a href="https://baicaisong.github.io/2021/02/27/build-your-own-react/">ä» HTML å¼€å§‹</a></li><li><a href="https://baicaisong.github.io/2021/02/27/build-your-own-react-2/">JSX çš„ç¼–è¯‘</a></li><li><a href="https://baicaisong.github.io/2021/03/01/build-your-own-react-3/">Virtual DOM å’Œ diff</a><br>â€¦</li></ol><p>ä»¥ä¸‹æ˜¯ç¬¬ä¸‰èŠ‚çš„å†…å®¹ï¼šVirtual DOM å’Œ diff</p><h2 id="åªæ›´æ–°å·®å¼‚çš„éƒ¨åˆ†"><a href="#åªæ›´æ–°å·®å¼‚çš„éƒ¨åˆ†" class="headerlink" title="åªæ›´æ–°å·®å¼‚çš„éƒ¨åˆ†"></a>åªæ›´æ–°å·®å¼‚çš„éƒ¨åˆ†</h2><p><a href="https://zh-hans.reactjs.org/docs/rendering-elements.html#react-only-updates-whats-necessary">React</a>ä¹Ÿæä¾›äº†ä¸€ä¸ª<a href="https://codepen.io/pen?&editors=0010">æ¡ˆä¾‹</a>æ¥è¯´æ˜ï¼š</p><p><img src="https://i.loli.net/2021/03/01/biGQER3NJWLUFhK.gif" alt="æ¯æ¬¡åªé‡æ–°æ¸²æŸ“æ–‡æœ¬èŠ‚ç‚¹"></p><p>ä½¿ç”¨æˆ‘ä»¬ç¼–å†™çš„ reactDomRender æ¥è°ƒç”¨æ­¤æ¡ˆä¾‹ä¸­çš„ tick å‡½æ•°è¯•è¯•ï¼š</p><p><img src="https://i.loli.net/2021/03/01/Y5Dw67pujEZsVLf.gif" alt="æ¯æ¬¡éƒ½é‡å»ºæ•´é¢— DOM æ ‘"></p><p>å› ä¸ºæ¯ä¸€æ¬¡è°ƒç”¨ jsx()æ–¹æ³•æ—¶ï¼ŒreactDomRender éƒ½ä½¿ç”¨ DOM ç”Ÿæˆ æ–°çš„ HTMLElementï¼Œæ‰€ä»¥é‡å»ºäº†æ•´é¢— DOM æ ‘ã€‚é‚£æ€ä¹ˆåªæ›´æ–°éœ€è¦æ›´æ–°çš„éƒ¨åˆ†å‘¢ï¼Ÿ React åœ¨ JSX å’Œ DOM ä¸­é—´åŠ äº†ä¸€å±‚ç¼“å†²â€”â€”â€”Virtual DOM</p><p><img src="https://i.loli.net/2021/03/02/koylr3AfzcXWYi7.png" alt="VDOM"></p><p>jsx()æ–¹æ³•ä¸ç›´æ¥ç”Ÿæˆ HTMLElementï¼Œè€Œæ˜¯ç”Ÿæˆ Virtual DOMã€‚æ¯æ¬¡ JSX æ”¹å˜ï¼Œç”¨æ¯”å¯¹æ–°æ—§ Virtual DOM çš„å·®åˆ«ï¼Œåªæ›´æ–°å·®å¼‚éƒ¨åˆ†ã€‚<br>ä¾‹å¦‚ tick çš„ä¾‹å­ä¸­ï¼Œåªéœ€è¦æ‰¾åˆ° h2 å…ƒç´ ï¼Œå¹¶ä¿®æ”¹ text å³å¯ã€‚</p><h2 id="è®¾è®¡-Virtual-DOM"><a href="#è®¾è®¡-Virtual-DOM" class="headerlink" title="è®¾è®¡ Virtual DOM"></a>è®¾è®¡ Virtual DOM</h2><h3 id="ç±»å‹å®šä¹‰"><a href="#ç±»å‹å®šä¹‰" class="headerlink" title="ç±»å‹å®šä¹‰"></a>ç±»å‹å®šä¹‰</h3><p>å¯ä»¥åœ¨ React çš„é¡¹ç›®é‡Œæ‰“å°ä¸€äº› JSX è¯­å¥ï¼Œæµè§ˆå™¨æ§åˆ¶å°ä¸­å¯ä»¥çœ‹åˆ°æ‰€è°“çš„ Virtual DOM å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œç®€åŒ–ä»–ï¼Œå®ç°æœ€å…³é”®çš„ä¸¤ä¸ªå±æ€§ï¼š</p><ul><li>type</li><li>props</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">interface</span> TypeFunction &#123;<br>  (props: Props): VDOM;<br>&#125;<br><span class="hljs-keyword">type</span> Child = <span class="hljs-built_in">string</span> | VDOM;<br><span class="hljs-keyword">type</span> Props = Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; &amp; &#123;<br>  children: Child | Child[];<br>&#125;;<br><span class="hljs-keyword">type</span> VDOM = &#123;<br>  <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span>;<br>  props: Props;<br>&#125;;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isVDOM</span>(<span class="hljs-params">child: Child</span>): <span class="hljs-title">child</span> <span class="hljs-title">is</span> <span class="hljs-title">VDOM</span> </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> child !== <span class="hljs-string">&quot;string&quot;</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isChild</span>(<span class="hljs-params">children: Props[<span class="hljs-string">&quot;children&quot;</span>]</span>): <span class="hljs-title">children</span> <span class="hljs-title">is</span> <span class="hljs-title">Child</span> </span>&#123;<br>  <span class="hljs-keyword">return</span> !(children <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="jsx"><a href="#jsx" class="headerlink" title="jsx()"></a>jsx()</h3><p>jsx()å‡½æ•°çš„ä½œç”¨æ˜¯ç›´æ¥è¿”å› VDOM ç±»å‹çš„æ•°æ®</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jsx</span>(<span class="hljs-params"></span></span><br><span class="hljs-function"><span class="hljs-params">  <span class="hljs-keyword">type</span>: VDOM[<span class="hljs-string">&quot;type&quot;</span>] | TypeFunction,</span></span><br><span class="hljs-function"><span class="hljs-params">  props: VDOM[<span class="hljs-string">&quot;props&quot;</span>]</span></span><br><span class="hljs-function"><span class="hljs-params"></span>): <span class="hljs-title">VDOM</span> </span>&#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">type</span> === <span class="hljs-string">&quot;function&quot;</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">type</span>(props);<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-keyword">type</span>,<br>    props,<br>  &#125;;<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> jsxs = jsx;<br></code></pre></td></tr></table></figure><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>ä¸¾ä¸ª ğŸŒ°ï¼Œæœ‰å¦‚ä¸‹ JSX è¯­å¥ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>  &quot;hello&quot;<br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>click me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è°ƒç”¨ jsx()åï¼Œreturn çš„ç»“æœæ˜¯ VDOMï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ts">&#123;<br>  <span class="hljs-keyword">type</span>: <span class="hljs-string">&quot;div&quot;</span>;<br>  props: &#123;<br>    children: [<span class="hljs-string">&quot;hello&quot;</span>, &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;button&quot;</span>, <span class="hljs-attr">children</span>: <span class="hljs-string">&quot;click me&quot;</span> &#125;];<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Child è¿˜å¯ä»¥æ”¯æŒé™¤ string ä»¥å¤–çš„å…¶ä»– 6 ç§åŸå§‹ç±»å‹ä»¥åŠ 2 ç§å¼•ç”¨ç±»å‹ï¼Œä¸åŒçš„ç±»å‹ä¼šæœ‰ä¸åŒçš„æ¸²æŸ“æ•ˆæœæˆ–è€…æŠ¥é”™ï¼Œä¾‹å¦‚ä¼ å…¥ boolean ä¸ä¼šæ¸²æŸ“å‡ºæ¥ï¼Œä¼ å…¥ object ä¼šæŠ¥é”™<code>Objects are not valid as a React child</code>ã€‚è¿™é‡Œç®€åŒ–æˆä»…æ”¯æŒ stringã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> Primitive = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span> | bigint | symbol;<br><span class="hljs-keyword">type</span> Child1 = Primitive | VDOM;<br></code></pre></td></tr></table></figure><ul><li>ç±»å‹ä¸º stringï¼Œè¡¨ç¤ºéœ€è¦æ¸²æŸ“ä¸ºæ–‡æœ¬èŠ‚ç‚¹ï¼Œ<code>document.createTextNode(child)</code></li><li>ç±»å‹ä¸º VDOMï¼Œè¡¨ç¤ºéœ€è¦æ¸²æŸ“ä¸ºå…ƒç´ èŠ‚ç‚¹ï¼Œéœ€è¦ç»§ç»­é€’å½’æ­¤ Childï¼Œç›´åˆ°å¯ä»¥æ¸²æŸ“ä¸ºæ–‡æœ¬èŠ‚ç‚¹</li></ul><h2 id="diff-ç®—æ³•"><a href="#diff-ç®—æ³•" class="headerlink" title="diff ç®—æ³•"></a>diff ç®—æ³•</h2><p>æœ‰äº† Virtual DOMï¼Œæ¥ä¸‹æ¥è¦è®¾è®¡ä¸€ä¸ªå‡½æ•° diff æ¥å¯¹æ¯”æ–°ã€æ—§ Virtual DOM ï¼Œè®°å½•ä¸‹ä¸åŒçš„éƒ¨åˆ†ã€‚ä»¥ä¸‹å†…å®¹å‚è€ƒ React çš„<a href="https://zh-hans.reactjs.org/docs/reconciliation.html">è®¾è®¡å†³ç­–</a>ã€‚</p><h3 id="ä¸åŒçš„-VDOM"><a href="#ä¸åŒçš„-VDOM" class="headerlink" title="ä¸åŒçš„ VDOM"></a>ä¸åŒçš„ VDOM</h3><p>æ€ä¹ˆæ ·çš„ VDOM ç®—ä¸åŒå‘¢ï¼Ÿ</p><ul><li>type ä¸åŒï¼Œç›´æ¥é”€æ¯æ—§çš„ VDOM ä»¥åŠå…¶ä¸‹æ‰€æœ‰å­ VDOMï¼Œå¹¶å»ºç«‹ä¸€ä¸ªæ–°çš„ VDOMã€‚</li><li>type ç›¸åŒï¼Œ<code>const &#123;children, ...restProps&#125; = props</code> ï¼Œæ¯”è¾ƒ restPropsï¼Œç”¨äºæ›´æ–° HTMLElement çš„å±æ€§</li><li>æ¯”è¾ƒ children ï¼Œchildren çš„ç±»å‹æ˜¯ <code>Child | Child[]</code> ï¼Œæ¯”è¾ƒ Child é‡Œçš„ stringï¼Œç”¨äºæ›´æ–° HTMLElement ä¸‹çš„æ–‡æœ¬èŠ‚ç‚¹</li></ul><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-keyword">type</span> <span class="hljs-type">ReplaceVDOM</span> = &#123; action: &quot;<span class="hljs-type">REPLACE</span>&quot;; dom: <span class="hljs-type">VDOM</span> &#125;;<br><span class="hljs-keyword">type</span> <span class="hljs-type">UpdateAttribute</span> = &#123; action: &quot;<span class="hljs-type">ATTR</span>&quot;; key: string; value: string &#125;;<br><span class="hljs-keyword">type</span> <span class="hljs-type">UpdateText</span> = &#123; action: &quot;<span class="hljs-type">TEXT</span>&quot;; value: string; childIndex: number &#125;;<br></code></pre></td></tr></table></figure><h3 id="æ·±åº¦ä¼˜å…ˆéå†"><a href="#æ·±åº¦ä¼˜å…ˆéå†" class="headerlink" title="æ·±åº¦ä¼˜å…ˆéå†"></a>æ·±åº¦ä¼˜å…ˆéå†</h3><p>å¯¹æ¯”é‡‡å–æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰ï¼Œå³å…ˆéå†å®Œæ¯ä¸ªå…ƒç´ çš„å­å…ƒç´ ï¼Œæ‰ä¼šéå†å…¶å…„å¼Ÿå…ƒç´ ã€‚<br><img src="https://i.loli.net/2021/03/07/2r1gbVMBenQoSJp.png" alt="æ·±åº¦ä¼˜å…ˆéå†"></p><p>ç”¨å˜é‡ patches ç”¨äºå­˜å‚¨æ–°æ—§ VDOM çš„å·®å¼‚ï¼Œindex ä½œä¸ºæ¯ä¸€ä¸ª VDOM çš„åºåˆ—ã€‚<br>patches[index]å­˜çš„å°±æ˜¯æ¯ä¸ª VDOM çš„å·®å¼‚ã€‚è¿™é‡Œå†ç®€åŒ–ä¸€ä¸‹ï¼Œåªè€ƒè™‘æ–°æ—§ VDOM çš„å±‚çº§ä¸å˜åŒ–æƒ…å†µï¼Œå› æ­¤ index å¯ä»¥ä¸€ä¸€å¯¹åº”</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> Patch = (ReplaceVDOM | UpdateAttribute | UpdateText)[];<br><span class="hljs-keyword">const</span> patches: Patch[] = [];<br></code></pre></td></tr></table></figure><p>diff å‡½æ•°ç»“æ„å¦‚ä¸‹:</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">diff</span>(<span class="hljs-params">oldDom: VDOM, newDom: VDOM</span>): <span class="hljs-title">Patch</span>[] </span>&#123;<br>  <span class="hljs-keyword">const</span> patches: Patch[] = [];<br><br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">diffVirtualDom</span>(<span class="hljs-params">oldDom: VDOM, newDom: VDOM, index: <span class="hljs-built_in">number</span></span>) </span>&#123;<br>    <span class="hljs-keyword">let</span> patch: Patch = [];<br><br>    <span class="hljs-comment">// compare type</span><br>    <span class="hljs-comment">// patch.push(&#123; action: &quot;REPLACE&quot;, dom: newDom &#125;);</span><br><br>    <span class="hljs-comment">// compare attributes</span><br>    <span class="hljs-comment">// patch.push(&#123; action: &quot;ATTR&quot;, key, value &#125;);</span><br><br>    <span class="hljs-comment">// compare children</span><br>    <span class="hljs-comment">// patch.push(&#123; action: &quot;TEXT&quot;, value: newChild, childIndex &#125;);</span><br><br>    patches[index] = patch;<br>  &#125;<br><br>  diffVirtualDom(oldDom, newDom, <span class="hljs-number">0</span>);<br><br>  <span class="hljs-keyword">return</span> patches;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">diff</span>(<span class="hljs-params">oldDom: VDOM, newDom: VDOM</span>): <span class="hljs-title">Patch</span>[] </span>&#123;<br>  <span class="hljs-keyword">const</span> patches: Patch[] = [];<br><br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">diffVirtualDom</span>(<span class="hljs-params">oldDom: VDOM, newDom: VDOM, index: <span class="hljs-built_in">number</span></span>) </span>&#123;<br>    <span class="hljs-keyword">let</span> patch: Patch = [];<br><br>    <span class="hljs-comment">// compare type</span><br>    <span class="hljs-keyword">if</span> (oldDom.type !== newDom.type) &#123;<br>      patch.push(&#123; <span class="hljs-attr">action</span>: <span class="hljs-string">&quot;REPLACE&quot;</span>, <span class="hljs-attr">dom</span>: newDom &#125;);<br>      patches[index] = patch;<br>      <span class="hljs-keyword">return</span>; <span class="hljs-comment">//ä¸éœ€è¦ç»§ç»­æ¯”è¾ƒï¼Œæå‰è¿”å›</span><br>    &#125;<br><br>    <span class="hljs-keyword">const</span> oldChildren = oldDom.props.children;<br>    <span class="hljs-keyword">const</span> newChildren = newDom.props.children;<br><br>    <span class="hljs-comment">// compare attributes</span><br>    <span class="hljs-built_in">Object</span>.entries(newDom.props)<br>      .filter(<span class="hljs-function">(<span class="hljs-params">[key]</span>) =&gt;</span> key !== <span class="hljs-string">&quot;children&quot;</span>)<br>      .forEach(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">const</span> oldValue = oldDom.props[key];<br>        <span class="hljs-keyword">if</span> (oldValue !== value) &#123;<br>          patch.push(&#123; <span class="hljs-attr">action</span>: <span class="hljs-string">&quot;ATTR&quot;</span>, key, value &#125;);<br>        &#125;<br>      &#125;);<br><br>    <span class="hljs-comment">// compare children</span><br>    <span class="hljs-keyword">if</span> (oldChildren <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span> &amp;&amp; newChildren <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) &#123;<br>      oldChildren.forEach(<span class="hljs-function">(<span class="hljs-params">oldChild, childIndex</span>) =&gt;</span> &#123;<br>        compareChild(oldChild, newChildren[childIndex], index, childIndex);<br>      &#125;);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isChild(oldChildren) &amp;&amp; isChild(newChildren)) &#123;<br>      compareChild(oldChildren, newChildren, index, <span class="hljs-number">0</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&quot;not supported yet&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareChild</span>(<span class="hljs-params"></span></span><br><span class="hljs-function"><span class="hljs-params">      oldChild: Child,</span></span><br><span class="hljs-function"><span class="hljs-params">      newChild: Child,</span></span><br><span class="hljs-function"><span class="hljs-params">      elementIndex: <span class="hljs-built_in">number</span>,</span></span><br><span class="hljs-function"><span class="hljs-params">      childIndex: <span class="hljs-built_in">number</span></span></span><br><span class="hljs-function"><span class="hljs-params">    </span>) </span>&#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> oldChild === <span class="hljs-string">&quot;string&quot;</span> &amp;&amp; <span class="hljs-keyword">typeof</span> newChild === <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>        <span class="hljs-keyword">if</span> (oldChild !== newChild) &#123;<br>          patch.push(&#123;<br>            action: <span class="hljs-string">&quot;TEXT&quot;</span>,<br>            value: newChild,<br>            childIndex,<br>          &#125;);<br>        &#125;<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isVDOM(oldChild) &amp;&amp; isVDOM(newChild)) &#123;<br>        diffVirtualDom(oldChild, newChild, elementIndex + childIndex + <span class="hljs-number">1</span>);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&quot;not supported yet&quot;</span>);<br>      &#125;<br>    &#125;<br><br>    patches[index] = patch;<br>  &#125;<br><br>  diffVirtualDom(oldDom, newDom, <span class="hljs-number">0</span>);<br><br>  <span class="hljs-keyword">return</span> patches;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h2><p>æœŸæœ›ç¼–å†™ä¸€äº›æµ‹è¯•ç”¨ä¾‹æ¥æµ‹è¯• diff çš„ç®—æ³•æ˜¯å¦â€œå¼ºå£®â€</p><h3 id="Jest"><a href="#Jest" class="headerlink" title="Jest"></a><a href="https://jestjs.io/">Jest</a></h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">yarn <span class="hljs-built_in">add</span> --dev jest typescript <span class="hljs-keyword">ts</span>-jest @types/jest<br>yarn <span class="hljs-keyword">ts</span>-jest confi<span class="hljs-variable">g:init</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// jest.config.js</span><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  preset: <span class="hljs-string">&quot;ts-jest&quot;</span>,<br>  testEnvironment: <span class="hljs-string">&quot;node&quot;</span>,<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="ç¼–å†™æµ‹è¯•ç”¨ä¾‹"><a href="#ç¼–å†™æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="ç¼–å†™æµ‹è¯•ç”¨ä¾‹"></a>ç¼–å†™æµ‹è¯•ç”¨ä¾‹</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// diff.test.ts</span><br>test(<span class="hljs-string">&quot;&lt;button&gt;child&lt;/button&gt;,&lt;button type=&#x27;submit&#x27;&gt;button&lt;/button&gt;&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  expect(<br>    diff(<br>      &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;button&quot;</span>, <span class="hljs-attr">props</span>: &#123; <span class="hljs-attr">children</span>: <span class="hljs-string">&quot;child&quot;</span> &#125; &#125;,<br>      &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;button&quot;</span>, <span class="hljs-attr">props</span>: &#123; <span class="hljs-attr">children</span>: <span class="hljs-string">&quot;button&quot;</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;submit&quot;</span> &#125; &#125;<br>    )<br>  ).toStrictEqual([<br>    [<br>      &#123; <span class="hljs-attr">action</span>: <span class="hljs-string">&quot;ATTR&quot;</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;type&quot;</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;submit&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">action</span>: <span class="hljs-string">&quot;TEXT&quot;</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;button&quot;</span> &#125;,<br>    ],<br>  ]);<br>&#125;);<br><br>test(<span class="hljs-string">&quot;&lt;div&gt;&lt;button&gt;child&lt;/button&gt;&lt;/div&gt;,&lt;div&gt;&lt;h1&gt;child&lt;/h1&gt;&lt;/div&gt;&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  expect(<br>    diff(<br>      &#123;<br>        <span class="hljs-keyword">type</span>: <span class="hljs-string">&quot;div&quot;</span>,<br>        props: &#123; <span class="hljs-attr">children</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;button&quot;</span>, <span class="hljs-attr">props</span>: &#123; <span class="hljs-attr">children</span>: <span class="hljs-string">&quot;child&quot;</span> &#125; &#125; &#125;,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-keyword">type</span>: <span class="hljs-string">&quot;div&quot;</span>,<br>        props: &#123; <span class="hljs-attr">children</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;h1&quot;</span>, <span class="hljs-attr">props</span>: &#123; <span class="hljs-attr">children</span>: <span class="hljs-string">&quot;child&quot;</span> &#125; &#125; &#125;,<br>      &#125;<br>    )<br>  ).toStrictEqual([<br>    [],<br>    [&#123; <span class="hljs-attr">action</span>: <span class="hljs-string">&quot;REPLACE&quot;</span>, <span class="hljs-attr">dom</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;h1&quot;</span>, <span class="hljs-attr">props</span>: &#123; <span class="hljs-attr">children</span>: <span class="hljs-string">&quot;child&quot;</span> &#125; &#125; &#125;],<br>  ]);<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="æµ‹è¯•ç»“æœ"><a href="#æµ‹è¯•ç»“æœ" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h3><p>æ‰§è¡Œï¼š<code>yarn jest</code>:</p><p>è¾“å‡ºç»“æœï¼š<code>Tests: 2 passed, 2 total</code>â€”â€”é€šè¿‡ 2 ä¸ªç”¨ä¾‹</p><h2 id="åº”ç”¨åˆ°çœŸå®çš„-DOM-ä¸Š"><a href="#åº”ç”¨åˆ°çœŸå®çš„-DOM-ä¸Š" class="headerlink" title="åº”ç”¨åˆ°çœŸå®çš„ DOM ä¸Š"></a>åº”ç”¨åˆ°çœŸå®çš„ DOM ä¸Š</h2><p>ä¾ç„¶é‡‡å–æ·±åº¦ä¼˜å…ˆéå†ï¼Œé€šè¿‡ index è·å– patches ä¸­å¯¹åº” HTMLElement çš„å·®å¼‚ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyPatchToElement</span>(<span class="hljs-params">element: Element, index, patches: Patch[]</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> patch = patches[index];<br>  <span class="hljs-keyword">if</span> (patch.length &gt; <span class="hljs-number">0</span>) &#123;<br>    patch.forEach(<span class="hljs-function">(<span class="hljs-params">difference</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">switch</span> (difference.action) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;REPLACE&quot;</span>:<br>          <span class="hljs-comment">// replaceChild</span><br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;ATTR&quot;</span>:<br>          <span class="hljs-comment">// setAttribute</span><br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;TEXT&quot;</span>:<br>          <span class="hljs-comment">// textContent</span><br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">default</span>:<br>          <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&quot;unknow patch action&quot;</span>);<br>      &#125;<br>    &#125;);<br>  &#125;<br>  element.childNodes.forEach(<span class="hljs-function">(<span class="hljs-params">child, childIndex</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (child.nodeType === <span class="hljs-number">1</span>) &#123;<br>      <span class="hljs-comment">// åªéå†å…ƒç´ èŠ‚ç‚¹</span><br>      applyPatchToElement(child <span class="hljs-keyword">as</span> Element, index + childIndex + <span class="hljs-number">1</span>, patches);<br>    &#125;<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><p>å®Œæ•´ä»£ç ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">let</span> prevVDom: VDOM | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reactDomRender</span>(<span class="hljs-params">dom: VDOM, container: HTMLElement</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (prevVDom === <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-keyword">const</span> rootTag = <span class="hljs-built_in">document</span>.createElement(dom.type);<br>    <span class="hljs-keyword">const</span> rootElement = domToElement(dom.props.children, rootTag);<br>    container.innerHTML = <span class="hljs-string">&quot;&quot;</span>;<br>    container.appendChild(rootElement);<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">const</span> patches = diff(prevVDom, dom);<br>    applyPatchToElement(container.children[<span class="hljs-number">0</span>], <span class="hljs-number">0</span>, patches);<br>  &#125;<br>  prevVDom = dom;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyPatchToElement</span>(<span class="hljs-params">element: Element, index, patches: Patch[]</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> patch = patches[index];<br>  <span class="hljs-keyword">if</span> (patch.length &gt; <span class="hljs-number">0</span>) &#123;<br>    patch.forEach(<span class="hljs-function">(<span class="hljs-params">difference</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">switch</span> (difference.action) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;REPLACE&quot;</span>:<br>          <span class="hljs-keyword">const</span> parent = element.parentElement;<br>          <span class="hljs-keyword">const</span> &#123; dom &#125; = difference;<br>          <span class="hljs-keyword">const</span> rootTag = <span class="hljs-built_in">document</span>.createElement(dom.type);<br>          <span class="hljs-keyword">const</span> rootElement = domToElement(dom.props.children, rootTag);<br>          parent.replaceChild(rootElement, element);<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;ATTR&quot;</span>:<br>          <span class="hljs-keyword">const</span> &#123; key, <span class="hljs-attr">value</span>: attribute &#125; = difference;<br>          element.setAttribute(key, attribute);<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;TEXT&quot;</span>:<br>          <span class="hljs-keyword">const</span> &#123; value, childIndex &#125; = difference;<br>          element.childNodes[childIndex].textContent = value;<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">default</span>:<br>          <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&quot;unknow patch action&quot;</span>);<br>      &#125;<br>    &#125;);<br>  &#125;<br>  element.childNodes.forEach(<span class="hljs-function">(<span class="hljs-params">child, childIndex</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (child.nodeType === <span class="hljs-number">1</span>) &#123;<br>      applyPatchToElement(child <span class="hljs-keyword">as</span> Element, index + childIndex + <span class="hljs-number">1</span>, patches);<br>    &#125;<br>  &#125;);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">domToElement</span>(<span class="hljs-params"></span></span><br><span class="hljs-function"><span class="hljs-params">  children: Props[<span class="hljs-string">&quot;children&quot;</span>],</span></span><br><span class="hljs-function"><span class="hljs-params">  parent: HTMLElement</span></span><br><span class="hljs-function"><span class="hljs-params"></span>): <span class="hljs-title">HTMLElement</span> </span>&#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> children === <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>    <span class="hljs-keyword">const</span> content = <span class="hljs-built_in">document</span>.createTextNode(children);<br>    parent.appendChild(content);<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (children <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) &#123;<br>    children.forEach(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> &#123;<br>      domToElement(child, parent);<br>    &#125;);<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; <span class="hljs-keyword">type</span>, props &#125; = children;<br>    <span class="hljs-keyword">const</span> tag = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-keyword">type</span>);<br>    <span class="hljs-built_in">Object</span>.entries(props)<br>      .filter(<span class="hljs-function">(<span class="hljs-params">[key]</span>) =&gt;</span> key !== <span class="hljs-string">&quot;children&quot;</span>)<br>      .forEach(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> &#123;<br>        tag.setAttribute(key, value);<br>      &#125;);<br>    domToElement(props.children, tag);<br>    parent.appendChild(tag);<br>  &#125;<br>  <span class="hljs-keyword">return</span> parent;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å†æ¬¡æµ‹è¯•-tick-å‡½æ•°"><a href="#å†æ¬¡æµ‹è¯•-tick-å‡½æ•°" class="headerlink" title="å†æ¬¡æµ‹è¯• tick å‡½æ•°"></a>å†æ¬¡æµ‹è¯• tick å‡½æ•°</h2><p>æ”¹å†™ä¸€ä¸‹ tick ä»¥æµ‹è¯• REPLACEã€ATTRã€TEXT éƒ½å¯ä»¥é€šè¿‡ç”Ÿæ•ˆ</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; reactDomRender &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../runtime/jsx-runtime&quot;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tick</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime() % <span class="hljs-number">2</span> === <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">const</span> element = (<br>    &lt;div&gt;<br>      &#123;res ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, world!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span> : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>H3<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span>&#125;<br>      &lt;h2 style=&#123;res ? <span class="hljs-string">&quot;color:red&quot;</span> : <span class="hljs-string">&quot;color:orange&quot;</span>&#125;&gt;<br>        It is &#123;<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleTimeString()&#125;.<br>      &lt;/h2&gt;<br>    &lt;/div&gt;<br>  );<br>  reactDomRender(element, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;root&quot;</span>));<br>&#125;<br><br><span class="hljs-built_in">setInterval</span>(tick, <span class="hljs-number">1000</span>);<br></code></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/03/07/pfmSL9y7dPKtUE1.gif" alt="ç»“æœ"></p><p>ç»“æœæ˜¾ç¤ºä¸‰ç§æ”¹å˜å‡ç”Ÿæ•ˆï¼Œä¸”åªæ›´æ–°äº†å·®å¼‚çš„éƒ¨åˆ†</p>]]></content>
    
    
    
    <tags>
      
      <tag>TypeScript</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨ TypeScript å®ç° React ï¼ˆäºŒï¼‰â€”â€”â€” JSX çš„ç¼–è¯‘</title>
    <link href="/2021/02/27/build-your-own-react-2/"/>
    <url>/2021/02/27/build-your-own-react-2/</url>
    
    <content type="html"><![CDATA[<p>å¦‚æœç»†å¿ƒä¸€ç‚¹ä¼šå‘ç°, <code>ReactDOM.render</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ”¯æŒçš„ç±»å‹ä¸º <a href="https://zh-hans.reactjs.org/docs/introducing-jsx.html">JSX</a> è€Œä¸æ˜¯ HTMLElementã€‚å› æ­¤æ¥ä¸‹æ¥éœ€è¦å°†å‚æ•°æ”¯æŒ JSX ç±»å‹ã€‚</p><a id="more"></a><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ol><li><a href="https://baicaisong.github.io/2021/02/27/build-your-own-react/">ä» HTML å¼€å§‹</a></li><li><a href="https://baicaisong.github.io/2021/02/27/build-your-own-react-2/">JSX çš„ç¼–è¯‘</a></li><li><a href="https://baicaisong.github.io/2021/03/01/build-your-own-react-3/">Virtual DOM å’Œ diff</a><br>â€¦</li></ol><p>ä»¥ä¸‹æ˜¯ç¬¬äºŒèŠ‚çš„å†…å®¹ï¼šJSX çš„ç¼–è¯‘</p><h2 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h2><p><img src="https://i.loli.net/2021/03/01/roJLf4CFbSDTwKt.png" alt="æµç¨‹å›¾"><br>ä¾‹å¦‚ä¸€ä¸ª JSX è¯­å¥ <code>&lt;h1&gt;hello TypeScript&lt;/h1&gt;</code>:</p><ol><li>React v17 æ˜¯é€šè¿‡<a href="https://babeljs.io/">Babel</a> æˆ– TypeScript å°† JSX è½¬åŒ–ä¸º<code>_jsx(&#39;h1&#39;,&#123;children:&#39;hello TypeScript&#39;&#125;)</code></li><li>è°ƒç”¨æ–¹æ³•<code>_jsx(type, props)</code>ç”Ÿæˆ HTMLElement</li><li>å¾—åˆ° <code>&lt;h1&gt;hello TypeScript&lt;/h1&gt;</code> å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚</li></ol><h2 id="é€‰æ‹©-Babel-ç¼–è¯‘-JSX"><a href="#é€‰æ‹©-Babel-ç¼–è¯‘-JSX" class="headerlink" title="é€‰æ‹© Babel ç¼–è¯‘ JSX"></a>é€‰æ‹© Babel ç¼–è¯‘ JSX</h2><blockquote><p>å¦‚æœä½ åœ¨ä½¿ç”¨ JSX æ—¶ï¼Œä½¿ç”¨ React ä»¥å¤–çš„åº“ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://babeljs.io/docs/en/babel-preset-react#importsource">importSource</a> é€‰é¡¹ä»è¯¥åº“ä¸­å¼•å…¥</p></blockquote><p>ç¼–è¯‘ç”Ÿæˆçš„ <code>_jsx</code> ä¼šé»˜è®¤ <code>require(&quot;react/jsx-runtime&quot;)</code>,ä½¿ç”¨ babel <code>importSource:&#39;../runtime&#39;</code> å¯ä»¥é‡å®šå‘ä¸º <code>require(&quot;../runtime/jsx-runtime&quot;)</code> ä»¥æ­¤æ¥æŒ‡å‘å¼€å‘è€…è‡ªå·±çš„ä»£ç ã€‚<br>æ­¤ç‰¹æ€§ TypeScript ä¼¼ä¹æ²¡æœ‰æä¾›ï¼Œæ‰€ä»¥è¿™æ¬¡é€‰æ‹© Babel æ¥åš JSX çš„ç¼–è¯‘</p><h3 id="å®‰è£…-Babel"><a href="#å®‰è£…-Babel" class="headerlink" title="å®‰è£… Babel"></a>å®‰è£… Babel</h3><p>å®‰è£…ä»¥ä¸‹ä¾èµ–</p><ul><li>@babel/cli</li><li>@babel/core</li><li>@babel/plugin-transform-react-jsx â€”â€”â€”â€” å°† JSX è½¬åŒ–_jsx()æ¥å—çš„å‚æ•°</li><li>@babel/preset-typescript â€”â€”â€”â€” ä»ç„¶éœ€è¦ç¼–è¯‘ ts ç±»å‹</li></ul><p><code>yarn add @babel/cli @babel/core @babel/plugin-transform-react-jsx @babel/preset-typescript</code></p><blockquote><p>åœ¨ React v17 ä¹‹å‰ï¼ŒJSX åªèƒ½è¢«è½¬åŒ–ä¸º <code>React.createElement</code></p></blockquote><p><code>React.createElement</code> å’Œ <code>_jsx</code> çš„åŒºåˆ«çœ‹<a href="https://zh-hans.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html">è¿™é‡Œ</a></p><h3 id="é…ç½®-babel"><a href="#é…ç½®-babel" class="headerlink" title="é…ç½® babel"></a>é…ç½® babel</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// .babelrc</span><br>&#123;<br>  <span class="hljs-attr">&quot;presets&quot;</span>: [<span class="hljs-string">&quot;@babel/preset-typescript&quot;</span>],<br>  <span class="hljs-attr">&quot;plugins&quot;</span>: [<br>    [<br>      <span class="hljs-string">&quot;@babel/plugin-transform-react-jsx&quot;</span>,<br>      &#123;<br>        <span class="hljs-attr">&quot;runtime&quot;</span>: <span class="hljs-string">&quot;automatic&quot;</span>,<br>        <span class="hljs-attr">&quot;importSource&quot;</span>: <span class="hljs-string">&quot;../runtime&quot;</span><br>      &#125;<br>    ]<br>  ]<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="ä¿®æ”¹æ–‡ä»¶"><a href="#ä¿®æ”¹æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶"></a>ä¿®æ”¹æ–‡ä»¶</h3><ol><li>ä¿®æ”¹ index.ts æ–‡ä»¶ï¼Œä½¿å…¶æ”¯æŒ JSX ç±»å‹</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// index.tsx</span><br><span class="hljs-comment">// &lt;App /&gt;æ˜¯ä¸€ä¸ª JSXï¼›ä½¿ç”¨JSXçš„æ–‡ä»¶åç¼€æ”¹ä¸º.tsx</span><br><span class="hljs-keyword">import</span> &#123; reactDomRender &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../runtime/jsx-runtime&quot;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> (<br>    &lt;div&gt;<br>      title<br>      &lt;button <span class="hljs-keyword">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;button&lt;/button&gt;<br>    &lt;/div&gt;<br>  );<br>&#125;<br><br>reactDomRender(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;root&quot;</span>));<br></code></pre></td></tr></table></figure><h3 id="ç¼–è¯‘-tsx-æ–‡ä»¶"><a href="#ç¼–è¯‘-tsx-æ–‡ä»¶" class="headerlink" title="ç¼–è¯‘ tsx æ–‡ä»¶"></a>ç¼–è¯‘ tsx æ–‡ä»¶</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">//package.json</span><br>  &quot;scripts&quot;: &#123;<br>    &quot;build-src&quot;: &quot;npx babel --out-dir lib src --extensions &#x27;.ts,.tsx&#x27;&quot;,<br>    &quot;build-runtime&quot;: &quot;npx babel --out-dir runtime runtime --extensions &#x27;.ts,.tsx&#x27;&quot;,<br>    &quot;build&quot;: &quot;yarn build-src &amp;&amp; yarn build-runtime&quot;<br>  &#125;,<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œ<code>yarn build</code>ï¼Œåœ¨ lib ä¸‹ç”Ÿæˆäº† index.js æ–‡ä»¶,åœ¨ runtime ä¸‹ç”Ÿæˆäº† jsx-runtime.js æ–‡ä»¶<br>ä¿®æ”¹ index.html çš„å¼•ç”¨è·¯å¾„ä¸º<code>src=&quot;./lib/index.js&quot;</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// lib/index.js</span><br><span class="hljs-keyword">import</span> &#123; reactDomRender &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../runtime/jsx-runtime&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; jsx <span class="hljs-keyword">as</span> _jsx &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../runtime/jsx-runtime&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; jsxs <span class="hljs-keyword">as</span> _jsxs &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../runtime/jsx-runtime&quot;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> _jsxs(<span class="hljs-string">&quot;div&quot;</span>, &#123;<br>    children: [<br>      <span class="hljs-string">&quot;title&quot;</span>,<br>      _jsx(<span class="hljs-string">&quot;button&quot;</span>, &#123;<br>        type: <span class="hljs-string">&quot;submit&quot;</span>,<br>        children: <span class="hljs-string">&quot;button&quot;</span>,<br>      &#125;),<br>    ],<br>  &#125;);<br>&#125;<br><br>reactDomRender(_jsx(App, &#123;&#125;), <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;root&quot;</span>));<br></code></pre></td></tr></table></figure><h2 id="ç¼–å†™-jsx-æ–¹æ³•"><a href="#ç¼–å†™-jsx-æ–¹æ³•" class="headerlink" title="ç¼–å†™_jsx æ–¹æ³•"></a>ç¼–å†™<code>_jsx</code> æ–¹æ³•</h2><p><code>../runtime/jsx-runtime.js</code> ä¸‹å·²ç»æä¾›äº† <code>reactDomRender</code> æ–¹æ³•ï¼Œæ¥ç€æŠŠ <code>jsx()</code> å†™ä¸€ä¸‹</p><h3 id="å®šä¹‰ç±»å‹"><a href="#å®šä¹‰ç±»å‹" class="headerlink" title="å®šä¹‰ç±»å‹"></a>å®šä¹‰ç±»å‹</h3><ul><li><code>jsxs</code> ä¸ <code>jsx</code>éƒ½æ¥å—ä¸¤ä¸ªå‚æ•°,å¹¶è¿”å›ä¸€ä¸ª HTMLElement</li><li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ string ï½œ function</li><li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯èƒ½ä¼šæœ‰ children å±æ€§</li><li>children å¯èƒ½æ˜¯ string ï½œ HTMLElement ï½œ (string | HTMLElement)[]</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> Children = &#123; <span class="hljs-attr">children</span>: <span class="hljs-built_in">string</span> | HTMLElement | (<span class="hljs-built_in">string</span> | HTMLElement)[] &#125;;<br><span class="hljs-keyword">type</span> Props = &#123; [key <span class="hljs-keyword">in</span> <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> &#125; &amp; Partial&lt;Children&gt;;<br><span class="hljs-keyword">interface</span> TypeFunction &#123;<br>  (props: Props): HTMLElement;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jsx</span>(<span class="hljs-params"></span></span><br><span class="hljs-function"><span class="hljs-params">  <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span> ï½œ TypeFunction,</span></span><br><span class="hljs-function"><span class="hljs-params">  props: Props</span></span><br><span class="hljs-function"><span class="hljs-params"></span>): <span class="hljs-title">HTMLElement</span> </span>&#123;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¼ªä»£ç "><a href="#ä¼ªä»£ç " class="headerlink" title="ä¼ªä»£ç "></a>ä¼ªä»£ç </h3><ul><li><p>if (typeof tag === â€œfunctionâ€) æ‰§è¡Œ tag å‡½æ•°ï¼Œtag(props)ï¼›</p></li><li><p>else typeof tag === â€œstringâ€:</p><ol><li>ç”Ÿæˆæ ‡ç­¾ï¼š<code>document.createElement(tag)</code></li><li>éå† props å¯¹è±¡ï¼Œå¦‚æœæœ‰ children å±æ€§ï¼Œè°ƒç”¨å‡½æ•° renderChildrenï¼š<ul><li>children æ˜¯ string ï¼šdocument.createTextNode(children)</li><li>children æ˜¯ HTMLElement ï¼šelement.appendChild(children)</li><li>children æ˜¯ Arrayï¼šé‡å¤ä»¥ä¸Šè¿‡ç¨‹ï¼Œæ‰€ä»¥ renderChildren æ˜¯ä¸€ä¸ªé€’å½’å‡½æ•°</li></ul></li><li>å…¶ä»–å±æ€§ä½œä¸º html æ ‡ç­¾å±æ€§ <code>tag.setAttribute(key, value);</code></li></ol></li></ul><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// runtime/jsx-runtime.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reactDomRender</span>(<span class="hljs-params">element: HTMLElement, container: Element</span>) </span>&#123;<br>  container.appendChild(element);<br>&#125;<br><br><span class="hljs-keyword">type</span> Children = &#123; <span class="hljs-attr">children</span>: <span class="hljs-built_in">string</span> | HTMLElement | (<span class="hljs-built_in">string</span> | HTMLElement)[] &#125;;<br><span class="hljs-keyword">type</span> Props = &#123; [key <span class="hljs-keyword">in</span> <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> &#125; &amp; Partial&lt;Children&gt;;<br><span class="hljs-keyword">interface</span> TypeFunction &#123;<br>  (props: Props): HTMLElement;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jsx</span>(<span class="hljs-params">tag: <span class="hljs-built_in">string</span> | TypeFunction, props: Props</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> tag === <span class="hljs-string">&quot;function&quot;</span>) <span class="hljs-keyword">return</span> tag(props);<br><br>  <span class="hljs-keyword">const</span> newTag = <span class="hljs-built_in">document</span>.createElement(tag);<br>  <span class="hljs-keyword">const</span> &#123; children &#125; = props;<br><br>  renderChildren(children, newTag);<br><br>  <span class="hljs-built_in">Object</span>.entries(props).forEach(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (key !== <span class="hljs-string">&quot;children&quot;</span>) &#123;<br>      newTag.setAttribute(key, value);<br>    &#125;<br>  &#125;);<br>  <span class="hljs-keyword">return</span> newTag;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderChildren</span>(<span class="hljs-params"></span></span><br><span class="hljs-function"><span class="hljs-params">  children: Children[<span class="hljs-string">&quot;children&quot;</span>],</span></span><br><span class="hljs-function"><span class="hljs-params">  element: HTMLElement</span></span><br><span class="hljs-function"><span class="hljs-params"></span>): <span class="hljs-title">HTMLElement</span> </span>&#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> children === <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>    <span class="hljs-keyword">const</span> content = <span class="hljs-built_in">document</span>.createTextNode(children);<br>    element.appendChild(content);<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (children <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) &#123;<br>    children.forEach(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> &#123;<br>      renderChildren(child, element);<br>    &#125;);<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    element.appendChild(children);<br>  &#125;<br>  <span class="hljs-keyword">return</span> element;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> jsxs = jsx;<br></code></pre></td></tr></table></figure><p>é¡µé¢å±•ç¤ºäº†æƒ³è¦çš„æ•ˆæœ<br><img src="https://i.loli.net/2021/03/01/Sj3I6gv18UqtpnF.png" alt="DOM"></p>]]></content>
    
    
    
    <tags>
      
      <tag>TypeScript</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨ TypeScript å®ç° React ï¼ˆä¸€ï¼‰â€”â€”â€” ä» HTML å¼€å§‹</title>
    <link href="/2021/02/27/build-your-own-react/"/>
    <url>/2021/02/27/build-your-own-react/</url>
    
    <content type="html"><![CDATA[<p>æƒ³ç”¨ TypeScript å®ç°ä¸€ä¸ªç®€å•çš„ Reactï¼Œä»¥æ›´å¥½çš„äº†è§£ React çš„åŸºæœ¬è¿ä½œæ–¹å¼ã€‚<br>ä»¥å½“å‰ v17.0.1 ä¸ºç›®æ ‡ã€‚</p><a id="more"></a><h2 id="å‰ææŠ€èƒ½"><a href="#å‰ææŠ€èƒ½" class="headerlink" title="å‰ææŠ€èƒ½"></a>å‰ææŠ€èƒ½</h2><ul><li>ä¼šä½¿ç”¨å‘½ä»¤è¡Œç»ˆç«¯</li><li>äº†è§£ TypeScript å’Œ React çš„åŸºæœ¬ç”¨æ³•</li><li>ä¼šä¸€ç‚¹ç‚¹ç®—æ³•ï¼Œä¾‹å¦‚ä»€ä¹ˆæ˜¯é€’å½’</li></ul><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ol><li><a href="https://baicaisong.github.io/2021/02/27/build-your-own-react/">ä» HTML å¼€å§‹</a></li><li><a href="https://baicaisong.github.io/2021/02/27/build-your-own-react-2/">JSX çš„ç¼–è¯‘</a></li><li><a href="https://baicaisong.github.io/2021/03/01/build-your-own-react-3/">Virtual DOM å’Œ diff</a><br>â€¦</li></ol><p>ä»¥ä¸‹æ˜¯ç¬¬ä¸€èŠ‚çš„å†…å®¹ï¼šä» HTML å¼€å§‹</p><h2 id="åˆå§‹åŒ–é¡¹ç›®"><a href="#åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®"></a>åˆå§‹åŒ–é¡¹ç›®</h2><p>æ–°å»ºç©ºæ–‡ä»¶å¤¹ï¼Œç›®å½•ç»“æ„ï¼š<br>|â€“ index.html<br>|â€“ index.js</p><p>ç”¨æµè§ˆå™¨æ‰“å¼€ index.html å¯ä»¥å¾—åˆ°ä¸€ä¸ªé¡µé¢ï¼Œå…¶ä¸­å¼•å…¥äº†ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ index.jsï¼Œè°ƒç”¨ DOM æ–¹æ³•æ¥æ”¹å˜ HTML çš„å†…å®¹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--index.html--&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;index.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// index.js</span><br><span class="hljs-keyword">const</span> tag = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;h1&quot;</span>);<br><span class="hljs-keyword">const</span> content = <span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-string">&quot;hello world&quot;</span>);<br>tag.appendChild(content);<br><br><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;root&quot;</span>).appendChild(tag);<br></code></pre></td></tr></table></figure><h2 id="å®ç°-ReactDOM-render-æ–¹æ³•"><a href="#å®ç°-ReactDOM-render-æ–¹æ³•" class="headerlink" title="å®ç° ReactDOM.render æ–¹æ³•"></a>å®ç° <code>ReactDOM.render</code> æ–¹æ³•</h2><ol><li>å¦‚æœç”¨ <code>create-react-app</code> æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨é¡¹ç›®çš„ src/index.js æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸€ä¸ª <code>ReactDOM.render</code> æ–¹æ³•</li></ol><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ReactDOM</span>.</span></span>render(<br>  &lt;App /&gt;,<br>  document.get<span class="hljs-constructor">ElementById(&#x27;<span class="hljs-params">root</span>&#x27;)</span>,<br>)<br></code></pre></td></tr></table></figure><p>å…¶ä½œç”¨å’Œä¸Šæ–‡çš„ index.js ç›¸åŒï¼Œè·å– root å…ƒç´ ï¼Œå¹¶å°†æ–°å…ƒç´ åµŒå…¥ã€‚</p><ol start="2"><li>æ–°å»ºä¸€ä¸ªæ–¹æ³• <code>reactDomRender</code> ,å¯æ¥å—ä¸¤ä¸ªå‚æ•° <code>(element, container)</code></li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// æ–°å»ºä¸€ä¸ª index.ts</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reactDomRender</span>(<span class="hljs-params">element: HTMLElement, container: HTMLElement</span>) </span>&#123;<br>  container.innerHTML = <span class="hljs-string">&quot;&quot;</span>;<br>  container.appendChild(element);<br>&#125;<br><br><span class="hljs-keyword">const</span> tag = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;h1&quot;</span>);<br><span class="hljs-keyword">const</span> content = <span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-string">&quot;hello TypeScript&quot;</span>);<br>tag.appendChild(content);<br><br>reactDomRender(tag, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;root&quot;</span>));<br></code></pre></td></tr></table></figure><ol start="3"><li>ç¼–è¯‘æ­¤æ–‡ä»¶ <code>tsc index.ts</code> ç”Ÿæˆå¯¹åº”çš„ js æ–‡ä»¶ï¼Œåˆ·æ–°é¡µé¢æ§åˆ¶å°æŠ¥é”™ï¼š</li></ol><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Access</span> <span class="hljs-keyword">to</span> script at <span class="hljs-string">&#x27;file:///Users/workspace/react/index.js&#x27;</span> <span class="hljs-keyword">from</span> origin <span class="hljs-string">&#x27;null&#x27;</span> has been blocked <span class="hljs-keyword">by</span> CORS <span class="hljs-keyword">policy</span>: <span class="hljs-keyword">Cross</span> origin requests are <span class="hljs-keyword">only</span> supported <span class="hljs-keyword">for</span> protocol schemes: http, data, chrome, chrome-<span class="hljs-keyword">extension</span>, chrome-untrusted, https.<br><span class="hljs-keyword">index</span>.html:<span class="hljs-number">9</span> <span class="hljs-keyword">GET</span> file:///Users/workspace/p/<span class="hljs-keyword">index</span>.js net::ERR_FAILED<br></code></pre></td></tr></table></figure><ol start="4"><li>ä½¿ç”¨<a href="https://www.npmjs.com/package/http-server">http-server</a>å¯åŠ¨æœ¬åœ°é™æ€æœåŠ¡:</li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">yarn <span class="hljs-built_in">global</span> <span class="hljs-built_in">add</span> <span class="hljs-keyword">http</span>-server<br>cd ..<br>serve react<span class="hljs-comment"> //serve [your folder name]</span><br></code></pre></td></tr></table></figure><p>æ‰“å¼€å¯¹åº”åœ°å€ï¼Œé¡µé¢å±•ç¤º hello TypeScript</p><h2 id="åˆ†ç¦»-reactDomRender-å‡½æ•°"><a href="#åˆ†ç¦»-reactDomRender-å‡½æ•°" class="headerlink" title="åˆ†ç¦» reactDomRender å‡½æ•°"></a>åˆ†ç¦» reactDomRender å‡½æ•°</h2><p>å› ä¸º reactDomRender æ˜¯ä¸€ä¸ªåº“å‡½æ•°ï¼ŒæœŸæœ›å°†å®ƒä»å¦ä¸€ä¸ªæ–‡ä»¶å¼•ç”¨è¿‡æ¥ã€‚</p><p>æ–‡ä»¶ç»“æ„ï¼š<br>|â€“ index.htmlâ€”â€”â€”â€”è®°å¾—ä¿®æ”¹ script å¼•ç”¨è·¯å¾„ <code>src=&quot;./src/index.js&quot;</code><br>| |â€“ runtime<br>| | |- jsx-runtime.ts â€”â€”â€”â€”å¯¼å‡º reactDomRender<br>| |â€“ src/ â€”â€”â€”â€”ç¼–å†™çš„æºä»£ç <br>| | |â€“ index.tsâ€”â€”â€”â€“è¢« index.html å¼•ç”¨</p><ol><li>æ–°å»ºä¸€ä¸ªæ–‡ä»¶ <code>runtime/jsx-runtime.ts</code>,å°† reactDomRender export å‡ºæ¥</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//runtime/jsx-runtime.ts</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reactDomRender</span>(<span class="hljs-params">element: HTMLElement, container: HTMLElement</span>) </span>&#123;<br>  container.innerHTML = <span class="hljs-string">&quot;&quot;</span>;<br>  container.appendChild(element);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// index.ts</span><br><span class="hljs-keyword">import</span> &#123; reactDomRender &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../runtime/jsx-runtime&quot;</span>;<br><br><span class="hljs-keyword">const</span> tag = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;h1&quot;</span>);<br><span class="hljs-keyword">const</span> content = <span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-string">&quot;hello TypeScript&quot;</span>);<br>tag.appendChild(content);<br><br>reactDomRender(tag, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;root&quot;</span>));<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œç¼–è¯‘<code>tsc src/index.ts</code>,ä¼šå‘ç°ä¸¤ä¸ªæ–‡ä»¶éƒ½ç”Ÿæˆäº†å¯¹åº”çš„ js æ–‡ä»¶</p><ol start="2"><li>æµè§ˆå™¨æŠ¥é”™</li></ol><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs delphi">Uncaught ReferenceError: <span class="hljs-keyword">exports</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> defined<br>    at <span class="hljs-keyword">index</span>.js:<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>å› ä¸º TypeScript å°† ts æ–‡ä»¶ç¼–è¯‘æˆ js æ—¶ï¼Œé»˜è®¤ç¼–è¯‘æˆ<code>es5</code>ï¼Œè€Œ es5 ä¸åŒ…æ‹¬æ¨¡å—åŒ–ç³»ç»Ÿï¼Œå³ä¸æ”¯æŒ<code>export</code> &amp; <code>import</code>ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨ç¼–è¯‘æ—¶å°†ç»“æœæŒ‡å®šæˆ<code>es6</code>ï¼š<code>tsc src/index.ts --target &#39;es6&#39;</code></p><ol start="3"><li>æŠ¥é”™*2</li></ol><p><code>index.js:1 Uncaught SyntaxError: Cannot use import statement outside a module</code></p><p>å› ä¸ºåœ¨ es6 çš„æ—¶å€™ï¼Œä½¿ç”¨ export&amp;import æ—¶ï¼Œéœ€è¦å°† html ä¸­å£°æ˜çš„æ ‡ç­¾<script></script>ç±»å‹ type æŒ‡å®šä¸º module</p><p>ä¿®æ”¹ index.html æ–‡ä»¶<code>&lt;script type=&quot;module&quot; src=&quot;./src/index.js&quot;&gt;&lt;/script&gt;</code></p><ol start="4"><li>æŠ¥é”™*3<br><code>index.js:1 GET http://localhost:52710/runtime/jsx-runtime net::ERR_ABORTED 404 (Not Found)</code></li></ol><p>å³æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„ runtime/jsx-runtime æ–‡ä»¶ï¼Œä» index.js æ–‡ä»¶ä¸­å‘ç°<code>import &#123; reactDomRender &#125; from &quot;../runtime/jsx-runtime&quot;;</code> ï¼ŒæŒ‡æ˜<code>jsx-runtime</code>ä¸º<code>jsx-runtime.js</code>å¯è§£å†³ã€‚</p><p>é¡µé¢é‡æ–°å±•ç¤º hello TypeScript</p>]]></content>
    
    
    
    <tags>
      
      <tag>TypeScript</tag>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨ GitHub Actions å®ç°Hexoçš„è‡ªåŠ¨éƒ¨ç½²</title>
    <link href="/2021/02/22/github-action/"/>
    <url>/2021/02/22/github-action/</url>
    
    <content type="html"><![CDATA[<p>æœŸæœ›æœ‰ä¸€ä¸ªä»“åº“æ¥ä¿å­˜åŸå§‹çš„ markdown æ–‡ä»¶ï¼Œå¹¶åœ¨æ¯æ¬¡ push æ—¶å°†ä»£ç è‡ªåŠ¨ç¼–è¯‘å¹¶å‘å¸ƒè‡³å¦ä¸€ä¸ªä»“åº“ <code>[yourname].github.io</code>ï¼Œå®ç° GitHub Pages çš„æ›´æ–°ã€‚</p><a id="more"></a><h2 id="æ–°å»ºä¸€ä¸ªä»“åº“æ¥ä¿å­˜åŸå§‹ä»£ç "><a href="#æ–°å»ºä¸€ä¸ªä»“åº“æ¥ä¿å­˜åŸå§‹ä»£ç " class="headerlink" title="æ–°å»ºä¸€ä¸ªä»“åº“æ¥ä¿å­˜åŸå§‹ä»£ç "></a>æ–°å»ºä¸€ä¸ªä»“åº“æ¥ä¿å­˜åŸå§‹ä»£ç </h2><p>ä»“åº“<code>[yourname].github.io.git</code>ä¸­åªä¿å­˜ç¼–è¯‘åçš„æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦å†å»ºä¸€ä¸ªä»“åº“æ¥ä¿å­˜åŸ markdown æ–‡ä»¶ã€‚<br>æ–°å»ºä¸€ä¸ªä»“åº“åä¸º <code>blog</code> ,æŠŠæºä»£ç  push åˆ°æ­¤ä»“åº“</p><h2 id="é…ç½®å¯†é’¥"><a href="#é…ç½®å¯†é’¥" class="headerlink" title="é…ç½®å¯†é’¥"></a>é…ç½®å¯†é’¥</h2><p>å°†ä¹‹å‰å…³è”åˆ° github çš„ ssh å¯†é’¥åˆ†åˆ«å­˜å…¥ä¸¤ä¸ªä»“åº“çš„ secret ä¸­</p><ol><li><code>/blog/settings/secrets</code> ä¸‹ æ–°å»º secret</li></ol><ul><li>Name :<code>HEXO_DEPLOY_PRI</code></li><li>Vaule : <code>cat ~/.ssh/id_ed25519</code>é‡Œçš„æ•°æ®</li></ul><ol start="2"><li><code>/yourname.github.io/settings/secrets</code>ä¸‹ æ–°å»º secret</li></ol><ul><li>Name :<code>HEXO_DEPLOY_PUB</code></li><li>Vaule : <code>cat ~/.ssh/id_ed25519.pub</code>é‡Œçš„æ•°æ®</li></ul><h2 id="ç¼–å†™-action-è„šæœ¬"><a href="#ç¼–å†™-action-è„šæœ¬" class="headerlink" title="ç¼–å†™ action è„šæœ¬"></a>ç¼–å†™ action è„šæœ¬</h2><h3 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h3><p>åœ¨ blog ä»“åº“æ ¹ç›®å½•ä¸‹åˆ›å»º <code>.github/workflows/deploy.yml</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Hexo</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">CI</span><br><br><span class="hljs-attr">on:</span><br>  <span class="hljs-attr">push:</span><br>    <span class="hljs-attr">branches:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">master</span><br><br><span class="hljs-attr">env:</span><br>  <span class="hljs-attr">GIT_USER:</span> <span class="hljs-string">baicaisong</span><br>  <span class="hljs-attr">GIT_EMAIL:</span> <span class="hljs-string">im.jwsong@gmail.com</span><br>  <span class="hljs-attr">THEME_REPO:</span> <span class="hljs-string">theme-next/hexo-theme-next</span><br>  <span class="hljs-attr">THEME_BRANCH:</span> <span class="hljs-string">master</span><br>  <span class="hljs-attr">DEPLOY_REPO:</span> <span class="hljs-string">baicaisong/baicaisong.github.io</span><br>  <span class="hljs-attr">DEPLOY_BRANCH:</span> <span class="hljs-string">master</span><br><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">build:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">on</span> <span class="hljs-string">node</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">matrix.node_version</span> <span class="hljs-string">&#125;&#125;</span> <span class="hljs-string">and</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">matrix.os</span> <span class="hljs-string">&#125;&#125;</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attr">strategy:</span><br>      <span class="hljs-attr">matrix:</span><br>        <span class="hljs-attr">os:</span> [<span class="hljs-string">ubuntu-latest</span>]<br>        <span class="hljs-attr">node_version:</span> [<span class="hljs-number">14.</span><span class="hljs-string">x</span>]<br><br>    <span class="hljs-attr">steps:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">theme</span> <span class="hljs-string">repo</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">repository:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.THEME_REPO</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">ref:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.THEME_BRANCH</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">path:</span> <span class="hljs-string">themes/next</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">deploy</span> <span class="hljs-string">repo</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">repository:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.DEPLOY_REPO</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">ref:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.DEPLOY_BRANCH</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">path:</span> <span class="hljs-string">.deploy_git</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Use</span> <span class="hljs-string">Node.js</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">matrix.node_version</span> <span class="hljs-string">&#125;&#125;</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v1</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">node-version:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">matrix.node_version</span> <span class="hljs-string">&#125;&#125;</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configuration</span> <span class="hljs-string">environment</span><br>        <span class="hljs-attr">env:</span><br>          <span class="hljs-attr">HEXO_DEPLOY_PRI:</span> <span class="hljs-string">$&#123;&#123;secrets.HEXO_DEPLOY_PRI&#125;&#125;</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br>          <span class="hljs-string">mkdir</span> <span class="hljs-string">-p</span> <span class="hljs-string">~/.ssh/</span><br>          <span class="hljs-string">echo</span> <span class="hljs-string">&quot;$HEXO_DEPLOY_PRI&quot;</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">~/.ssh/id_ed25519</span><br>          <span class="hljs-string">chmod</span> <span class="hljs-number">600</span> <span class="hljs-string">~/.ssh/id_ed25519</span><br>          <span class="hljs-string">ssh-keyscan</span> <span class="hljs-string">github.com</span> <span class="hljs-string">&gt;&gt;</span> <span class="hljs-string">~/.ssh/known_hosts</span><br>          <span class="hljs-string">git</span> <span class="hljs-string">config</span> <span class="hljs-string">--global</span> <span class="hljs-string">user.name</span> <span class="hljs-string">$GIT_USER</span><br>          <span class="hljs-string">git</span> <span class="hljs-string">config</span> <span class="hljs-string">--global</span> <span class="hljs-string">user.email</span> <span class="hljs-string">$GIT_EMAIL</span><br>          <span class="hljs-string">cp</span> <span class="hljs-string">_config.theme.yml</span> <span class="hljs-string">themes/next/_config.yml</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">dependencies</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br>          <span class="hljs-string">yarn</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">hexo</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br>          <span class="hljs-string">yarn</span> <span class="hljs-string">d</span><br></code></pre></td></tr></table></figure><h3 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h3><ul><li>name: åå­—</li><li>on: è§¦å‘æ¡ä»¶ï¼Œæ­¤å¤„æŒ‡å½“ push master åˆ†æ”¯æ—¶ä¼šæ‰§è¡Œ</li><li>env: ç¯å¢ƒå˜é‡ï¼Œä¼šåœ¨ jobs ä¸­è°ƒç”¨</li><li>jobs:ä»»åŠ¡åˆ—è¡¨ã€‚<ul><li>name ä»»åŠ¡åç§°</li><li>runs-on ä»»åŠ¡æ‰€éœ€å®¹å™¨ï¼Œå¯é€‰å€¼ï¼šubuntu-latestã€windows-latestã€macos-latestã€‚</li><li>strategy</li><li>steps ä»»åŠ¡æ­¥éª¤</li></ul></li></ul><h3 id="steps-å‚æ•°è¯´æ˜"><a href="#steps-å‚æ•°è¯´æ˜" class="headerlink" title="steps å‚æ•°è¯´æ˜"></a>steps å‚æ•°è¯´æ˜</h3><ul><li>name:æ­¥éª¤å</li><li>uses:æ‰€è¦è°ƒç”¨çš„ç¬¬ä¸‰æ–¹ Actionï¼Œ<a href="https://github.com/actions">æŸ¥çœ‹æ›´å¤š</a>ã€‚<br>æ­¤å¤„ç”¨äº†ä¸¤ä¸ª Action<ul><li><code>actions/checkout@v2</code> â€”â€” å®ç° Checkout ä¸€ä¸ª git ä»“åº“åˆ°å®¹å™¨ã€‚</li><li><code>actions/setup-node@v1</code> â€”â€” å¯ä»¥é…ç½®å®¹å™¨ Node.js ç¯å¢ƒ</li></ul></li><li>with:ä¼ ç»™ Action çš„å‚æ•°ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹æ‰€ä½¿ç”¨ Action çš„è¯´æ˜ã€‚</li></ul><ol><li>å°†æ­¤ä»“åº“ checkout åˆ°å®¹å™¨ä¸­</li></ol><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs delphi">- <span class="hljs-keyword">name</span>: Checkout<br>  <span class="hljs-keyword">uses</span>: actions/checkout@v2<br></code></pre></td></tr></table></figure><p>ä¸å¸¦ with å‚æ•°æ—¶é»˜è®¤æ“ä½œå½“å‰ä»“åº“</p><ol start="2"><li>å¤åŸ .deploy_git</li></ol><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="xml">- name: Checkout deploy repo</span><br><span class="xml">  uses: actions/checkout@v2</span><br><span class="xml">  with:</span><br><span class="xml">    repository: $</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">env.DEPLOY_REPO</span> &#125;&#125;</span><br><span class="xml">    ref: $</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">env.DEPLOY_BRANCH</span> &#125;&#125;</span><br><span class="xml">    path: .deploy_git</span><br></code></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤çš„æ„æ€ä¸ºå°†ç¬¬ä¸‰æ–¹ä»“åº“ <code>git@github.com:baicaisong/baicaisong.github.io.git</code> çš„ master åˆ†æ”¯ checkout åˆ°è·¯å¾„ .deploy_git ä¸‹ã€‚</p><ol start="3"><li>å®‰è£… Node.js ç‰ˆæœ¬ v14 åˆ°å®¹å™¨ä¸­</li></ol><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">- name: Use Node.js $&#123;&#123; matrix.node_version &#125;&#125;<br>  uses: actions/setup-<span class="hljs-keyword">node</span><span class="hljs-title">@v1</span><br>  with:<br>    <span class="hljs-keyword">node</span>-version:<span class="hljs-title"> $</span>&#123;&#123; matrix.node_version &#125;&#125;<br></code></pre></td></tr></table></figure><ol start="4"><li>å¤åŸ configuration</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">- name: Configuration environment<br>  env:<br>    HEXO_DEPLOY_PRI: <span class="hljs-variable">$&#123;&#123;secrets.HEXO_DEPLOY_PRI&#125;</span>&#125;<br>  run: |<br>    mkdir -p ~<span class="hljs-regexp">/.ssh/</span><br>    echo <span class="hljs-string">&quot;$HEXO_DEPLOY_PRI&quot;</span> &gt; ~<span class="hljs-regexp">/.ssh/i</span>d_ed25519<br>    chmod <span class="hljs-number">600</span> ~<span class="hljs-regexp">/.ssh/i</span>d_ed25519<br>    ssh-keyscan github.com &gt;&gt; ~<span class="hljs-regexp">/.ssh/</span>known_hosts<br>    git config --global user.name <span class="hljs-variable">$GIT_USER</span><br>    git config --global user.email <span class="hljs-variable">$GIT_EMAIL</span><br></code></pre></td></tr></table></figure><p>åœ¨<code>~/.ssh</code>ä¸‹çš„ä¸¤ä¸ªæ–‡ä»¶ï¼š</p><ul><li>id_ed25519:ç§é’¥ï¼ŒåŒé…ç½®åœ¨ repo blog çš„ secrets</li><li>known_hosts</li></ul><ol start="5"><li>å®‰è£…ä¾èµ–å¹¶å‘å¸ƒ</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">dependencies</span><br>  <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br>    <span class="hljs-string">yarn</span><br><br><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">hexo</span><br>  <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br>    <span class="hljs-string">yarn</span> <span class="hljs-string">d</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>GitHub</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode(201-âˆ)</title>
    <link href="/2020/07/28/leetcode-200/"/>
    <url>/2020/07/28/leetcode-200/</url>
    
    <content type="html"><![CDATA[<p>è®°å½• LeetCode 200 é¢˜åçš„ä»£ç ï¼Œè¯­è¨€ï¼šjs</p><a id="more"></a><h2 id="202-å¿«ä¹æ•°"><a href="#202-å¿«ä¹æ•°" class="headerlink" title="202.å¿«ä¹æ•°"></a>202.å¿«ä¹æ•°</h2><p>éå¿«ä¹æ•°ä¼šå½¢æˆç¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> isHappy = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">n</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> exist = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nextN</span>(<span class="hljs-params">num</span>) </span>&#123;<br>    <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> cur <span class="hljs-keyword">of</span> <span class="hljs-built_in">String</span>(num)) &#123;<br>      sum += <span class="hljs-built_in">Number</span>(cur) * <span class="hljs-built_in">Number</span>(cur);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (sum === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">if</span> (exist.get(sum)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    exist.set(sum, <span class="hljs-literal">true</span>);<br>    <span class="hljs-keyword">return</span> nextN(sum);<br>  &#125;<br>  <span class="hljs-keyword">return</span> nextN(n);<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="213-æ‰“å®¶åŠ«èˆ-II"><a href="#213-æ‰“å®¶åŠ«èˆ-II" class="headerlink" title="213.æ‰“å®¶åŠ«èˆ II"></a>213.æ‰“å®¶åŠ«èˆ II</h2><p>æ‹†åˆ†æˆä¸¤ä¸ªå•æ’ï¼Œä¸ç®—ç¬¬ä¸€ä¸ªæˆ¿é—´&amp;ä¸ç®—æœ€åä¸€ä¸ªæˆ¿é—´ï¼Œæ–¹æ³• <code>rob1</code> ä¸ºé¢˜ç›® 198 çš„è§£æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> rob1 = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = nums.length;<br>  <span class="hljs-keyword">if</span> (len === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">if</span> (len === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> nums[<span class="hljs-number">0</span>];<br>  <span class="hljs-keyword">if</span> (len === <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.max(nums[<span class="hljs-number">0</span>], nums[<span class="hljs-number">1</span>]);<br>  <span class="hljs-keyword">let</span> dp = [nums[<span class="hljs-number">0</span>], nums[<span class="hljs-number">1</span>]];<br>  <span class="hljs-keyword">let</span> max = <span class="hljs-built_in">Math</span>.max(nums[<span class="hljs-number">0</span>], nums[<span class="hljs-number">1</span>]);<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">2</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> curTotal = dp[<span class="hljs-number">0</span>] + nums[i];<br>    max = <span class="hljs-built_in">Math</span>.max(curTotal, dp[<span class="hljs-number">1</span>]);<br>    dp[<span class="hljs-number">0</span>] = <span class="hljs-built_in">Math</span>.max(dp[<span class="hljs-number">1</span>], dp[<span class="hljs-number">0</span>]);<br>    dp[<span class="hljs-number">1</span>] = curTotal;<br>  &#125;<br>  <span class="hljs-keyword">return</span> max;<br>&#125;;<br><br><span class="hljs-keyword">var</span> rob = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = nums.length;<br>  <span class="hljs-keyword">if</span> (len === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">if</span> (len === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> nums[<span class="hljs-number">0</span>];<br>  <span class="hljs-keyword">if</span> (len === <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.max(nums[<span class="hljs-number">0</span>], nums[<span class="hljs-number">1</span>]);<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.max(rob1(nums.slice(<span class="hljs-number">1</span>)), rob1(nums.slice(<span class="hljs-number">0</span>, len - <span class="hljs-number">1</span>)));<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="217-å­˜åœ¨é‡å¤å…ƒç´ "><a href="#217-å­˜åœ¨é‡å¤å…ƒç´ " class="headerlink" title="217.å­˜åœ¨é‡å¤å…ƒç´ "></a>217.å­˜åœ¨é‡å¤å…ƒç´ </h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> containsDuplicate = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> cur <span class="hljs-keyword">of</span> nums) &#123;<br>    <span class="hljs-keyword">if</span> (map.get(cur)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    map.set(cur, <span class="hljs-literal">true</span>);<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="219-å­˜åœ¨é‡å¤å…ƒç´ -II"><a href="#219-å­˜åœ¨é‡å¤å…ƒç´ -II" class="headerlink" title="219.å­˜åœ¨é‡å¤å…ƒç´  II"></a>219.å­˜åœ¨é‡å¤å…ƒç´  II</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> containsNearbyDuplicate = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, k</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (nums.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> i <span class="hljs-keyword">in</span> nums) &#123;<br>    <span class="hljs-keyword">const</span> cur = nums[i];<br>    <span class="hljs-keyword">const</span> index = map.get(cur);<br>    <span class="hljs-keyword">if</span> (index !== <span class="hljs-literal">undefined</span> &amp;&amp; <span class="hljs-built_in">Number</span>(i) - index &lt;= k) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    map.set(cur, <span class="hljs-built_in">Number</span>(i));<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="263-ä¸‘æ•°"><a href="#263-ä¸‘æ•°" class="headerlink" title="263.ä¸‘æ•°"></a>263.ä¸‘æ•°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> isUgly = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">num</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (num === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">if</span> (num === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  <span class="hljs-keyword">while</span> (num !== <span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-keyword">if</span> (num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>) num /= <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (num % <span class="hljs-number">3</span> === <span class="hljs-number">0</span>) num /= <span class="hljs-number">3</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (num % <span class="hljs-number">5</span> === <span class="hljs-number">0</span>) num /= <span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="268-ç¼ºå¤±æ•°å­—"><a href="#268-ç¼ºå¤±æ•°å­—" class="headerlink" title="268.ç¼ºå¤±æ•°å­—"></a>268.ç¼ºå¤±æ•°å­—</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> missingNumber = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = nums.length;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len + <span class="hljs-number">1</span>; i++) &#123;<br>    res ^= i ^ (nums[i] || <span class="hljs-number">0</span>);<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="322-é›¶é’±å…‘æ¢"><a href="#322-é›¶é’±å…‘æ¢" class="headerlink" title="322.é›¶é’±å…‘æ¢"></a>322.é›¶é’±å…‘æ¢</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> coinChange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">coins, amount</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(amount + <span class="hljs-number">1</span>).fill(amount + <span class="hljs-number">1</span>);<br>  dp[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; dp.length; i++) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> coin <span class="hljs-keyword">of</span> coins) &#123;<br>      <span class="hljs-keyword">if</span> (i - coin &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span>;<br>      dp[i] = <span class="hljs-built_in">Math</span>.min(dp[i], dp[i - coin] + <span class="hljs-number">1</span>);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> dp[amount] === amount + <span class="hljs-number">1</span> ? -<span class="hljs-number">1</span> : dp[amount];<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="374-çŒœæ•°å­—å¤§å°"><a href="#374-çŒœæ•°å­—å¤§å°" class="headerlink" title="374.çŒœæ•°å­—å¤§å°"></a>374.çŒœæ•°å­—å¤§å°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> guessNumber = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">n</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> left = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">let</span> right = n;<br>  <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>    <span class="hljs-keyword">const</span> mid = getMid(left, right);<br>    <span class="hljs-keyword">const</span> res = guess(mid);<br>    <span class="hljs-keyword">if</span> (res === <span class="hljs-number">1</span>) &#123;<br>      left = mid + <span class="hljs-number">1</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (res === -<span class="hljs-number">1</span>) &#123;<br>      right = mid - <span class="hljs-number">1</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> mid;<br>  &#125;<br>  <span class="hljs-keyword">return</span> left;<br>&#125;;<br><br><span class="hljs-keyword">var</span> getMid = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">left, right</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = left + right;<br>  <span class="hljs-keyword">if</span> (len % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> len / <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">return</span> (len - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="389-æ‰¾ä¸åŒ"><a href="#389-æ‰¾ä¸åŒ" class="headerlink" title="389.æ‰¾ä¸åŒ"></a>389.æ‰¾ä¸åŒ</h2><p>å¼‚æˆ–ä½è¿ç®—ï¼Œå­—æ¯è¦è½¬æ¢ä¸º code ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> findTheDifference = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s, t</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> cur <span class="hljs-keyword">of</span> s) &#123;<br>    res ^= cur.charCodeAt();<br>  &#125;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> cur <span class="hljs-keyword">of</span> t) &#123;<br>    res ^= cur.charCodeAt();<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">String</span>.fromCharCode(res);<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="397-æ•´æ•°æ›¿æ¢"><a href="#397-æ•´æ•°æ›¿æ¢" class="headerlink" title="397.æ•´æ•°æ›¿æ¢"></a>397.æ•´æ•°æ›¿æ¢</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> integerReplacement = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">n</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (n === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">if</span> (n === <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-keyword">return</span> integerReplacement(n / <span class="hljs-number">2</span>) + <span class="hljs-number">1</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.min(<br>      integerReplacement(n - <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>,<br>      integerReplacement(n + <span class="hljs-number">1</span>) + <span class="hljs-number">1</span><br>    );<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="400-ç¬¬-N-ä¸ªæ•°å­—"><a href="#400-ç¬¬-N-ä¸ªæ•°å­—" class="headerlink" title="400.ç¬¬ N ä¸ªæ•°å­—"></a>400.ç¬¬ N ä¸ªæ•°å­—</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> findNthDigit = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">n</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> z = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">let</span> preLen = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">for</span> (i; i &lt; <span class="hljs-number">32</span>; i++) &#123;<br>    <span class="hljs-keyword">let</span> curLen = <span class="hljs-number">9</span> * z * i;<br>    <span class="hljs-keyword">const</span> total = preLen + curLen;<br>    <span class="hljs-keyword">if</span> (n &lt;= total) &#123;<br>      <span class="hljs-keyword">break</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      preLen = total;<br>    &#125;<br>    z *= <span class="hljs-number">10</span>;<br>  &#125;<br>  <span class="hljs-keyword">const</span> rest = n - preLen;<br>  <span class="hljs-keyword">const</span> t = <span class="hljs-built_in">Math</span>.ceil(rest / i) - <span class="hljs-number">1</span> + z;<br>  <span class="hljs-keyword">let</span> index;<br>  <span class="hljs-keyword">if</span> (rest % i === <span class="hljs-number">0</span>) &#123;<br>    index = i - <span class="hljs-number">1</span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    index = (rest % i) - <span class="hljs-number">1</span>;<br>  &#125;<br>  <span class="hljs-keyword">const</span> res = <span class="hljs-built_in">Number</span>(<span class="hljs-built_in">String</span>(t)[index]);<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="454-å››æ•°ç›¸åŠ -II"><a href="#454-å››æ•°ç›¸åŠ -II" class="headerlink" title="454.å››æ•°ç›¸åŠ  II"></a>454.å››æ•°ç›¸åŠ  II</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> fourSumCount = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">A, B, C, D</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> length = A.length;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> map = &#123;&#125;;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) &#123;<br>    <span class="hljs-keyword">const</span> a = A[i];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; length; j++) &#123;<br>      <span class="hljs-keyword">const</span> b = B[j];<br>      <span class="hljs-keyword">const</span> sum = a + b;<br>      <span class="hljs-keyword">if</span> (map[sum]) &#123;<br>        map[sum].push([i, j]);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        map[sum] = [[i, j]];<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) &#123;<br>    <span class="hljs-keyword">const</span> c = C[i];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; length; j++) &#123;<br>      <span class="hljs-keyword">const</span> d = D[j];<br>      <span class="hljs-keyword">const</span> sum = c + d;<br>      <span class="hljs-keyword">if</span> (map[-sum]) &#123;<br>        res += map[-sum].length;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="495-æè«æ”»å‡»"><a href="#495-æè«æ”»å‡»" class="headerlink" title="495.æè«æ”»å‡»"></a>495.æè«æ”»å‡»</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> findPoisonedDuration = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">timeSeries, duration</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (timeSeries.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; timeSeries.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> cur = timeSeries[i];<br>    <span class="hljs-keyword">const</span> pre = timeSeries[i - <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">if</span> (cur - pre &gt;= duration) &#123;<br>      res += duration;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      res += cur - pre;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res + duration;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="516-æœ€é•¿å›æ–‡å­åºåˆ—"><a href="#516-æœ€é•¿å›æ–‡å­åºåˆ—" class="headerlink" title="516.æœ€é•¿å›æ–‡å­åºåˆ—"></a>516.æœ€é•¿å›æ–‡å­åºåˆ—</h2><p>å†™æ³• 1:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> longestPalindromeSubseq = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = s.length;<br>  <span class="hljs-keyword">if</span> (!s || len === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">let</span> dp = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = len - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>    dp[i] = [];<br>    dp[i][i] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = i + <span class="hljs-number">1</span>; j &lt; len; j++) &#123;<br>      <span class="hljs-keyword">if</span> (s[i] === s[j]) &#123;<br>        <span class="hljs-keyword">if</span> (j - i === <span class="hljs-number">1</span>) dp[i][j] = <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">else</span> dp[i][j] = dp[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">2</span>;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        dp[i][j] = <span class="hljs-built_in">Math</span>.max(dp[i][j - <span class="hljs-number">1</span>], dp[i + <span class="hljs-number">1</span>][j]);<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>][len - <span class="hljs-number">1</span>];<br>&#125;;<br></code></pre></td></tr></table></figure><p>å†™æ³• 2:é™ç»´ï¼š(?)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> longestPalindromeSubseq = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> length = s.length;<br><br>  <span class="hljs-keyword">let</span> dp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(length).fill(<span class="hljs-number">1</span>);<br><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>    <span class="hljs-keyword">let</span> prev = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = i + <span class="hljs-number">1</span>; j &lt; length; j++) &#123;<br>      <span class="hljs-keyword">let</span> tmp = dp[j];<br>      <span class="hljs-keyword">if</span> (s[i] === s[j]) &#123;<br>        dp[j] = prev + <span class="hljs-number">2</span>;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        dp[j] = <span class="hljs-built_in">Math</span>.max(dp[j], dp[j - <span class="hljs-number">1</span>]);<br>      &#125;<br>      prev = tmp;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> dp[length - <span class="hljs-number">1</span>];<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="605-ç§èŠ±é—®é¢˜"><a href="#605-ç§èŠ±é—®é¢˜" class="headerlink" title="605.ç§èŠ±é—®é¢˜"></a>605.ç§èŠ±é—®é¢˜</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> canPlaceFlowers = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">flowerbed, n</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> last = -<span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; flowerbed.length; i++) &#123;<br>    <span class="hljs-keyword">if</span> (flowerbed[i] === <span class="hljs-number">1</span>) &#123;<br>      last = i;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">if</span> (i &gt; last + <span class="hljs-number">1</span> &amp;&amp; flowerbed[i + <span class="hljs-number">1</span>] !== <span class="hljs-number">1</span>) &#123;<br>        count++;<br>        last = i;<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (count &gt;= n) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="647-å›æ–‡å­ä¸²"><a href="#647-å›æ–‡å­ä¸²" class="headerlink" title="647.å›æ–‡å­ä¸²"></a>647.å›æ–‡å­ä¸²</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> countSubstrings = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = s.length;<br>  <span class="hljs-keyword">if</span> (!s || len === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> dp = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = len - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>    dp[i] = [];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = i; j &lt; len; j++) &#123;<br>      <span class="hljs-keyword">if</span> (j === i) dp[i][j] = <span class="hljs-literal">true</span>;<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j - i === <span class="hljs-number">1</span> &amp;&amp; s[i] === s[j]) dp[i][j] = <span class="hljs-literal">true</span>;<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dp[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] &amp;&amp; s[i] === s[j]) dp[i][j] = <span class="hljs-literal">true</span>;<br><br>      <span class="hljs-keyword">if</span> (dp[i][j]) &#123;<br>        res++;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="657-æœºå™¨äººèƒ½å¦è¿”å›åŸç‚¹"><a href="#657-æœºå™¨äººèƒ½å¦è¿”å›åŸç‚¹" class="headerlink" title="657.æœºå™¨äººèƒ½å¦è¿”å›åŸç‚¹"></a>657.æœºå™¨äººèƒ½å¦è¿”å›åŸç‚¹</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> judgeCircle = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">moves</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> row = <span class="hljs-number">0</span>,<br>    col = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> cur <span class="hljs-keyword">of</span> moves) &#123;<br>    <span class="hljs-keyword">switch</span> (cur) &#123;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;R&quot;</span>:<br>        row++;<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;L&quot;</span>:<br>        row--;<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;U&quot;</span>:<br>        col++;<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;D&quot;</span>:<br>        col--;<br>        <span class="hljs-keyword">break</span>;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">if</span> (row === <span class="hljs-number">0</span> &amp;&amp; col === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="680-éªŒè¯å›æ–‡å­—ç¬¦ä¸²-â…¡"><a href="#680-éªŒè¯å›æ–‡å­—ç¬¦ä¸²-â…¡" class="headerlink" title="680.éªŒè¯å›æ–‡å­—ç¬¦ä¸² â…¡"></a>680.éªŒè¯å›æ–‡å­—ç¬¦ä¸² â…¡</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> validPalindrome = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> right = s.length - <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>    <span class="hljs-keyword">const</span> a = s[left];<br>    <span class="hljs-keyword">const</span> b = s[right];<br>    <span class="hljs-keyword">if</span> (a !== b) &#123;<br>      <span class="hljs-keyword">if</span> (<br>        !isPalindrome(left + <span class="hljs-number">1</span>, right, s) &amp;&amp;<br>        !isPalindrome(left, right - <span class="hljs-number">1</span>, s)<br>      )<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>      <span class="hljs-keyword">break</span>;<br>    &#125;<br>    left++;<br>    right--;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;;<br><br><span class="hljs-keyword">var</span> isPalindrome = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">left, right, str</span>) </span>&#123;<br>  <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>    <span class="hljs-keyword">const</span> a = str[left];<br>    <span class="hljs-keyword">const</span> b = str[right];<br>    <span class="hljs-keyword">if</span> (a !== b) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    left++;<br>    right--;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="697-æ•°ç»„çš„åº¦"><a href="#697-æ•°ç»„çš„åº¦" class="headerlink" title="697.æ•°ç»„çš„åº¦"></a>697.æ•°ç»„çš„åº¦</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> findShortestSubArray = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> maxCount = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> maxLen = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> cur = nums[i];<br>    <span class="hljs-keyword">const</span> val = map.get(cur);<br>    <span class="hljs-keyword">let</span> count, len;<br>    <span class="hljs-keyword">if</span> (val) &#123;<br>      count = val[<span class="hljs-number">2</span>] + <span class="hljs-number">1</span>;<br>      len = i - val[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>;<br>      map.set(cur, [val[<span class="hljs-number">0</span>], i, count]);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      count = <span class="hljs-number">1</span>;<br>      len = <span class="hljs-number">1</span>;<br>      map.set(cur, [i, i, count]);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (count &gt; maxCount) &#123;<br>      maxLen = len;<br>      maxCount = count;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (count === maxCount) &#123;<br>      maxLen = <span class="hljs-built_in">Math</span>.min(maxLen, len);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> maxLen;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="784-å­—æ¯å¤§å°å†™å…¨æ’åˆ—"><a href="#784-å­—æ¯å¤§å°å†™å…¨æ’åˆ—" class="headerlink" title="784.å­—æ¯å¤§å°å†™å…¨æ’åˆ—"></a>784.å­—æ¯å¤§å°å†™å…¨æ’åˆ—</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> letterCasePermutation = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">S</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = [];<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recursion</span>(<span class="hljs-params">track, pivot</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (track.length === S.length) &#123;<br>      res.push(track);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">const</span> cur = S[pivot];<br>    <span class="hljs-keyword">if</span> ((cur &gt;= <span class="hljs-string">&quot;a&quot;</span> &amp;&amp; cur &lt;= <span class="hljs-string">&quot;z&quot;</span>) || (cur &gt;= <span class="hljs-string">&quot;A&quot;</span> &amp;&amp; cur &lt;= <span class="hljs-string">&quot;Z&quot;</span>)) &#123;<br>      <span class="hljs-keyword">const</span> low = cur.toLowerCase();<br>      <span class="hljs-keyword">const</span> up = cur.toUpperCase();<br>      recursion(track + low, pivot + <span class="hljs-number">1</span>);<br>      recursion(track + up, pivot + <span class="hljs-number">1</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      recursion(track + cur, pivot + <span class="hljs-number">1</span>);<br>    &#125;<br>  &#125;<br>  recursion(<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="852-å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•"><a href="#852-å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•" class="headerlink" title="852.å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•"></a>852.å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•</h2><p>äºŒåˆ†æ³•ï¼Œè§[é¢˜ 162.å¯»æ‰¾å³°å€¼]</p><h2 id="973-æœ€æ¥è¿‘åŸç‚¹çš„-K-ä¸ªç‚¹"><a href="#973-æœ€æ¥è¿‘åŸç‚¹çš„-K-ä¸ªç‚¹" class="headerlink" title="973.æœ€æ¥è¿‘åŸç‚¹çš„ K ä¸ªç‚¹"></a>973.æœ€æ¥è¿‘åŸç‚¹çš„ K ä¸ªç‚¹</h2><p>æœ¬è´¨æ˜¯æ’åº pointsï¼Œå–å‰ K ä¸ªï¼Œä½¿ç”¨é€’å½’å¿«æ’</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> kClosest = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">points, K</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> lenArr = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> i <span class="hljs-keyword">in</span> points) &#123;<br>    <span class="hljs-keyword">const</span> cur = points[i];<br>    <span class="hljs-keyword">const</span> len = cur[<span class="hljs-number">0</span>] * cur[<span class="hljs-number">0</span>] + cur[<span class="hljs-number">1</span>] * cur[<span class="hljs-number">1</span>];<br>    lenArr.push(&#123; len, <span class="hljs-attr">i</span>: <span class="hljs-built_in">Number</span>(i) &#125;);<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> newLenArr = recursion(lenArr);<br><br>  <span class="hljs-keyword">let</span> n = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> res = [];<br>  <span class="hljs-keyword">while</span> (n &lt; K) &#123;<br>    <span class="hljs-keyword">const</span> cur = points[newLenArr[n].i];<br>    res.push(cur);<br>    n++;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br><br><span class="hljs-keyword">var</span> recursion = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (arr.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> arr;<br>  <span class="hljs-keyword">const</span> base = arr[<span class="hljs-number">0</span>];<br>  <span class="hljs-keyword">let</span> left = [];<br>  <span class="hljs-keyword">let</span> right = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; arr.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> cur = arr[i];<br>    <span class="hljs-keyword">if</span> (cur.len &lt; base.len) &#123;<br>      left.push(cur);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      right.push(cur);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> recursion(left).concat([base]).concat(recursion(right));<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä¼˜åŒ–æ–¹æ³• 1ï¼Œå½“æ•°é‡æ»¡è¶³ K æ—¶ï¼Œä¸ç»§ç»­æ’åºååŠéƒ¨åˆ†æ•°ç»„</p>]]></content>
    
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode(1-200)</title>
    <link href="/2020/07/11/leetcode/"/>
    <url>/2020/07/11/leetcode/</url>
    
    <content type="html"><![CDATA[<p>è®°å½• LeetCode 1-200 é¢˜çš„ä»£ç ï¼Œè¯­è¨€ï¼šjs</p><a id="more"></a><h2 id="1-ä¸¤æ•°ä¹‹åˆ"><a href="#1-ä¸¤æ•°ä¹‹åˆ" class="headerlink" title="1.ä¸¤æ•°ä¹‹åˆ"></a>1.ä¸¤æ•°ä¹‹åˆ</h2><p>éå† numsï¼Œå°† <code>nums[i],i</code> ä½œä¸ºé”®å€¼å¯¹å­˜å…¥æ•£åˆ—è¡¨ map ä¸­ï¼›<br>åŒæ—¶æ¯”è¾ƒå·®å€¼ difference æ˜¯å¦å­˜åœ¨äº map ä¸­</p><p>æ—¶é—´å¤æ‚åº¦ O(n),ç©ºé—´å¤æ‚åº¦ O(n)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> twoSum = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, target</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> map = &#123;&#125;;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> key = nums[i];<br>    <span class="hljs-keyword">const</span> difference = target - key;<br>    <span class="hljs-keyword">if</span> (map[difference] !== <span class="hljs-literal">undefined</span>) &#123;<br>      <span class="hljs-keyword">return</span> [map[difference], i];<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      map[key] = i;<br>    &#125;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="2-ä¸¤æ•°ç›¸åŠ "><a href="#2-ä¸¤æ•°ç›¸åŠ " class="headerlink" title="2.ä¸¤æ•°ç›¸åŠ "></a>2.ä¸¤æ•°ç›¸åŠ </h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> addTwoNumbers = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">l1, l2</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> up = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> temp = <span class="hljs-keyword">new</span> ListNode();<br>  <span class="hljs-keyword">let</span> l3 = temp;<br>  <span class="hljs-keyword">while</span> (l1 || l2) &#123;<br>    <span class="hljs-keyword">let</span> val = (l1 ? l1.val : <span class="hljs-number">0</span>) + (l2 ? l2.val : <span class="hljs-number">0</span>) + up;<br>    <span class="hljs-keyword">if</span> (val &gt;= <span class="hljs-number">10</span>) &#123;<br>      l3.next = <span class="hljs-keyword">new</span> ListNode(val % <span class="hljs-number">10</span>);<br>      up = <span class="hljs-number">1</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      l3.next = <span class="hljs-keyword">new</span> ListNode(val);<br>      up = <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l1) l1 = l1.next;<br>    <span class="hljs-keyword">if</span> (l2) l2 = l2.next;<br>    l3 = l3.next;<br>  &#125;<br>  <span class="hljs-keyword">if</span> (up === <span class="hljs-number">1</span>) &#123;<br>    l3.next = <span class="hljs-keyword">new</span> ListNode(<span class="hljs-number">1</span>);<br>  &#125;<br>  <span class="hljs-keyword">return</span> temp.next;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"><a href="#3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²" class="headerlink" title="3.æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"></a>3.æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</h2><p>éå† s,å‡ºç°é‡å¤å­—ç¬¦åˆ™ä»ä¸Šä¸€ä¸ªé‡å¤å­—ç¬¦çš„åœ°æ–¹é‡æ–°è®¡ç®—é•¿åº¦<br>æ—¶é—´å¤æ‚åº¦ O(n),ç©ºé—´å¤æ‚åº¦ O(1)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> lengthOfLongestSubstring = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> min = <span class="hljs-number">0</span>;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recursion</span>(<span class="hljs-params">track, pivot</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (pivot === s.length) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">const</span> cur = s[pivot];<br>    <span class="hljs-keyword">const</span> exist = track.indexOf(cur);<br>    <span class="hljs-keyword">if</span> (exist === -<span class="hljs-number">1</span>) &#123;<br>      <span class="hljs-keyword">if</span> (min &lt; track.length + <span class="hljs-number">1</span>) &#123;<br>        min = track.length + <span class="hljs-number">1</span>;<br>      &#125;<br>      recursion(track + cur, pivot + <span class="hljs-number">1</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      recursion(track.substring(exist + <span class="hljs-number">1</span>) + cur, pivot + <span class="hljs-number">1</span>);<br>    &#125;<br>  &#125;<br>  recursion(<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span> min;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="5-æœ€é•¿å›æ–‡å­ä¸²"><a href="#5-æœ€é•¿å›æ–‡å­ä¸²" class="headerlink" title="5.æœ€é•¿å›æ–‡å­ä¸²"></a>5.æœ€é•¿å›æ–‡å­ä¸²</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> longestPalindrome = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = s.length;<br>  <span class="hljs-keyword">if</span> (!s || len === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">let</span> dp = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = len - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>    dp[i] = [];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = i; j &lt; len; j++) &#123;<br>      <span class="hljs-keyword">if</span> (j === i) dp[i][j] = <span class="hljs-literal">true</span>;<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j - i === <span class="hljs-number">1</span> &amp;&amp; s[i] === s[j]) dp[i][j] = <span class="hljs-literal">true</span>;<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dp[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] &amp;&amp; s[i] === s[j]) dp[i][j] = <span class="hljs-literal">true</span>;<br><br>      <span class="hljs-keyword">if</span> (dp[i][j] &amp;&amp; j - i + <span class="hljs-number">1</span> &gt; res.length) &#123;<br>        res = s.slice(i, j + <span class="hljs-number">1</span>);<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="6-Z-å­—å½¢å˜æ¢"><a href="#6-Z-å­—å½¢å˜æ¢" class="headerlink" title="6.Z å­—å½¢å˜æ¢"></a>6.Z å­—å½¢å˜æ¢</h2><p>res æ˜¯ä¸€ä¸ª numRows ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œç”¨æ¥å­˜æ”¾æ¯ä¸€è¡Œçš„ string;<br>éå† sï¼Œå°†æ¯ä¸€ä¸ªå­—ç¬¦æ”¾åˆ°å¯¹åº”çš„ <code>res[pointer]</code> é‡Œ;<br><code>flag</code> ç”¨æ¥è¡¨ç¤ºæ­£å‘è¿˜æ˜¯é€†å‘</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> convert = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s, numRows</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (numRows === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> s;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(numRows).fill(<span class="hljs-string">&quot;&quot;</span>);<br>  <span class="hljs-keyword">let</span> flag = <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">let</span> pointer = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; s.length; i++) &#123;<br>    <span class="hljs-keyword">if</span> (i % (numRows - <span class="hljs-number">1</span>) === <span class="hljs-number">0</span> &amp;&amp; i !== <span class="hljs-number">0</span>) &#123;<br>      flag = !flag;<br>    &#125;<br>    res[pointer] += s[i];<br>    <span class="hljs-keyword">if</span> (flag) &#123;<br>      pointer++;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      pointer--;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">let</span> sum = <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">in</span> res) &#123;<br>    sum += res[i];<br>  &#125;<br>  <span class="hljs-keyword">return</span> sum;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="7-æ•´æ•°åè½¬"><a href="#7-æ•´æ•°åè½¬" class="headerlink" title="7.æ•´æ•°åè½¬"></a>7.æ•´æ•°åè½¬</h2><p>js ä¸­æ•°å­—ç”¨ 64 ä½æµ®ç‚¹æ•°å­˜å‚¨ï¼Œè¿›è¡Œä½è¿ç®—æ—¶ï¼Œä¼šå°†æ•°å­—è½¬åŒ–ä¸º 32 ä½æ•´æ•°ã€‚<br>ä¸€äº›ä½è¿ç®—ï¼š <code>x | 0</code> å¯ä»¥å¯¹ x å–æ•´ï¼ˆèˆå¼ƒå°æ•°ç‚¹ï¼‰;<code>n &amp; (n - 1)===0</code> n ä¸º 2 çš„æ•´æ•°å¹‚ ;<code>å¶æ•° &amp; 1 = 0;å¥‡æ•° &amp; 1 = 1</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> reverseBits = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">n</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">32</span>; i++) &#123;<br>    res = (res &lt;&lt; <span class="hljs-number">1</span>) + (n &amp; <span class="hljs-number">1</span>);<br>    n &gt;&gt;= <span class="hljs-number">1</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res &gt;&gt;&gt; <span class="hljs-number">0</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="8-å­—ç¬¦ä¸²è½¬æ¢æ•´æ•°-atoi"><a href="#8-å­—ç¬¦ä¸²è½¬æ¢æ•´æ•°-atoi" class="headerlink" title="8.å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)"></a>8.å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)</h2><p>æ³¨æ„ç‰¹æ®Šæƒ…å†µ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> myAtoi = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">str</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>;<br>  &lt;!-- åˆ¤æ–­æ­£è´Ÿ --&gt;<br>  <span class="hljs-keyword">let</span> positive = <span class="hljs-literal">true</span>;<br>  &lt;!-- åˆ¤æ–­æ˜¯å¦å¼€å§‹ï¼Œè¿‡æ»¤æ‰â€œ+-<span class="hljs-number">2</span>â€è¿™ç§ç‰¹æ®Šçš„å­—ç¬¦ä¸² --&gt;<br>  <span class="hljs-keyword">let</span> init = <span class="hljs-literal">false</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; str.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> cur = str[i];<br>    <span class="hljs-keyword">if</span> (cur === <span class="hljs-string">&quot; &quot;</span>) &#123;<br>      <span class="hljs-keyword">if</span> (!init) <span class="hljs-keyword">continue</span>;<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cur === <span class="hljs-string">&quot;-&quot;</span> &amp;&amp; !init) &#123;<br>      positive = <span class="hljs-literal">false</span>;<br>      init = <span class="hljs-literal">true</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cur === <span class="hljs-string">&quot;+&quot;</span> &amp;&amp; !init) &#123;<br>      positive = <span class="hljs-literal">true</span>;<br>      init = <span class="hljs-literal">true</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(cur)) <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">const</span> n = str.charCodeAt(i) - <span class="hljs-number">48</span>;<br>      res = res * <span class="hljs-number">10</span> + n;<br>      init = <span class="hljs-literal">true</span>;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">if</span> (!positive) res = -res;<br>  <span class="hljs-keyword">if</span> (res &gt; <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">31</span>) - <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">31</span>) - <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (res &lt; <span class="hljs-built_in">Math</span>.pow(-<span class="hljs-number">2</span>, <span class="hljs-number">31</span>)) <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.pow(-<span class="hljs-number">2</span>, <span class="hljs-number">31</span>);<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="9-å›æ–‡æ•°"><a href="#9-å›æ–‡æ•°" class="headerlink" title="9.å›æ–‡æ•°"></a>9.å›æ–‡æ•°</h2><ol><li>è½¬åŒ–ä¸º string</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> isPalindrome = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  <span class="hljs-keyword">if</span> (x === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">const</span> string = x.toString();<br>  <span class="hljs-keyword">const</span> length = string.length;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length / <span class="hljs-number">2</span>; i++) &#123;<br>    <span class="hljs-keyword">if</span> (string[i] !== string[length - <span class="hljs-number">1</span> - i]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><ol start="2"><li>é€šè¿‡ç®—æ•°é€†è½¬ x å¾—åˆ° resï¼Œåˆ¤æ–­ res ä¸ x æ˜¯å¦ç›¸åŒ</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> isPalindrome = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">10</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> y = x;<br>  <span class="hljs-keyword">while</span> (y !== <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-keyword">const</span> last = y % <span class="hljs-number">10</span>;<br>    res = res * <span class="hljs-number">10</span> + last;<br>    y = (y / <span class="hljs-number">10</span>) | <span class="hljs-number">0</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res === x;<br>&#125;;<br></code></pre></td></tr></table></figure><ol start="3"><li>é€šè¿‡ç®—æ•°å–åˆ°é¦–å°¾æ•°å¹¶æ¯”è¾ƒï¼šå°¾æ•° <code>x % 10</code> ,é¦–æ•°<code>(x / n) | 0</code> ã€‚<br>n ä¸º x çš„æ•°é‡çº§,<code>n = Math.pow(10,Math.log10(x) | 0)</code> ã€‚<br><code>| 0</code> æ˜¯å–æ•´çš„æ“ä½œ,å¯ä»¥ç”¨ <code>Math.floor</code>æ›¿ä»£</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> isPalindrome = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">10</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">const</span> f = <span class="hljs-built_in">Math</span>.log10(x) | <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> n = <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">10</span>, f);<br>  <span class="hljs-keyword">while</span> (n &gt; <span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-keyword">const</span> first = (x / n) | <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">const</span> last = x % <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">if</span> (first !== last) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    x = ((x % n) / <span class="hljs-number">10</span>) | <span class="hljs-number">0</span>;<br>    n /= <span class="hljs-number">100</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="11-ç››æœ€å¤šæ°´çš„å®¹å™¨"><a href="#11-ç››æœ€å¤šæ°´çš„å®¹å™¨" class="headerlink" title="11.ç››æœ€å¤šæ°´çš„å®¹å™¨"></a>11.ç››æœ€å¤šæ°´çš„å®¹å™¨</h2><ol><li> æš´åŠ›è§£</li><li>åŒæŒ‡é’ˆï¼Œç§»åŠ¨é«˜åº¦è¾ƒå°çš„è¾¹<br> æ—¶é—´å¤æ‚åº¦ O(n),ç©ºé—´å¤æ‚åº¦ O(1)</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> maxArea = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">height</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = height.length;<br>  <span class="hljs-keyword">let</span> maxArea = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> right = len - <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">var</span> getMaxArea = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">area</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (area &gt; maxArea) &#123;<br>      maxArea = area;<br>    &#125;<br>  &#125;;<br>  <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>    <span class="hljs-keyword">const</span> a = height[left];<br>    <span class="hljs-keyword">const</span> b = height[right];<br>    <span class="hljs-keyword">const</span> width = right - left;<br>    <span class="hljs-keyword">if</span> (a &gt; b) &#123;<br>      getMaxArea(b * width);<br>      right--;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a &lt; b) &#123;<br>      getMaxArea(a * width);<br>      left++;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      getMaxArea(a * width);<br>      left++;<br>      right--;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> maxArea;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="12-æ•´æ•°è½¬ç½—é©¬æ•°å­—"><a href="#12-æ•´æ•°è½¬ç½—é©¬æ•°å­—" class="headerlink" title="12.æ•´æ•°è½¬ç½—é©¬æ•°å­—"></a>12.æ•´æ•°è½¬ç½—é©¬æ•°å­—</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> intToRoman = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">num</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">const</span> roman = &#123;<br>    <span class="hljs-number">1</span>: <span class="hljs-string">&quot;I&quot;</span>,<br>    <span class="hljs-number">5</span>: <span class="hljs-string">&quot;V&quot;</span>,<br>    <span class="hljs-number">10</span>: <span class="hljs-string">&quot;X&quot;</span>,<br>    <span class="hljs-number">50</span>: <span class="hljs-string">&quot;L&quot;</span>,<br>    <span class="hljs-number">100</span>: <span class="hljs-string">&quot;C&quot;</span>,<br>    <span class="hljs-number">500</span>: <span class="hljs-string">&quot;D&quot;</span>,<br>    <span class="hljs-number">1000</span>: <span class="hljs-string">&quot;M&quot;</span>,<br>  &#125;;<br>  <span class="hljs-keyword">const</span> f = <span class="hljs-built_in">Math</span>.log10(num) | <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> n = <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">10</span>, f);<br>  <span class="hljs-keyword">while</span> (n !== <span class="hljs-number">0.1</span>) &#123;<br>    <span class="hljs-keyword">let</span> first = (num / n) | <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (first &gt; <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-keyword">if</span> (first === <span class="hljs-number">9</span>) &#123;<br>        res += roman[n] + roman[n * <span class="hljs-number">10</span>];<br>        first -= <span class="hljs-number">9</span>;<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (first &gt;= <span class="hljs-number">5</span>) &#123;<br>        res += roman[n * <span class="hljs-number">5</span>];<br>        first -= <span class="hljs-number">5</span>;<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (first === <span class="hljs-number">4</span>) &#123;<br>        res += roman[n] + roman[n * <span class="hljs-number">5</span>];<br>        first -= <span class="hljs-number">4</span>;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        res += roman[n];<br>        first--;<br>      &#125;<br>    &#125;<br>    num %= n;<br>    n /= <span class="hljs-number">10</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="13-ç½—é©¬æ•°å­—è½¬æ•´æ•°"><a href="#13-ç½—é©¬æ•°å­—è½¬æ•´æ•°" class="headerlink" title="13.ç½—é©¬æ•°å­—è½¬æ•´æ•°"></a>13.ç½—é©¬æ•°å­—è½¬æ•´æ•°</h2><p>éå† stringï¼Œå³ï¼ˆå½“å‰ï¼‰å¤§äºå·¦ï¼ˆå‰ä¸€ä¸ªï¼‰æ—¶ï¼Œå‡å»å‰ä¸€ä¸ªæ•°å­—çš„ 2 å€</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> romanToInt = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> roman = &#123;<br>    I: <span class="hljs-number">1</span>,<br>    V: <span class="hljs-number">5</span>,<br>    X: <span class="hljs-number">10</span>,<br>    L: <span class="hljs-number">50</span>,<br>    C: <span class="hljs-number">100</span>,<br>    D: <span class="hljs-number">500</span>,<br>    M: <span class="hljs-number">1000</span>,<br>  &#125;;<br>  <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; s.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> cur = roman[s[i]];<br>    <span class="hljs-keyword">const</span> pre = i &lt; <span class="hljs-number">1</span> ? <span class="hljs-number">0</span> : roman[s[i - <span class="hljs-number">1</span>]];<br>    sum += pre &lt; cur ? cur - pre * <span class="hljs-number">2</span> : cur;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> sum;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="14-æœ€é•¿å…¬å…±å‰ç¼€"><a href="#14-æœ€é•¿å…¬å…±å‰ç¼€" class="headerlink" title="14.æœ€é•¿å…¬å…±å‰ç¼€"></a>14.æœ€é•¿å…¬å…±å‰ç¼€</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> longestCommonPrefix = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">strs</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (strs.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">if</span> (strs.length === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> strs[<span class="hljs-number">0</span>];<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">let</span> pivot = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">while</span> (pivot &lt; strs[<span class="hljs-number">0</span>].length) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; strs.length; i++) &#123;<br>      <span class="hljs-keyword">if</span> (!strs[i][pivot]) <span class="hljs-keyword">return</span> res;<br>      <span class="hljs-keyword">if</span> (strs[i][pivot] !== strs[i - <span class="hljs-number">1</span>][pivot]) <span class="hljs-keyword">return</span> res;<br>      <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">if</span> (i === strs.length - <span class="hljs-number">1</span>) &#123;<br>          res += strs[<span class="hljs-number">0</span>][pivot];<br>        &#125;<br>      &#125;<br>    &#125;<br>    pivot++;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="15-ä¸‰æ•°ä¹‹å’Œ"><a href="#15-ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="15.ä¸‰æ•°ä¹‹å’Œ"></a>15.ä¸‰æ•°ä¹‹å’Œ</h2><p>å…ˆå¿«æ’å¯¹ nums å‡åºæ’åˆ—</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> threeSum = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> length = nums.length;<br>  <span class="hljs-keyword">const</span> newNums = sortNumber(nums);<br>  <span class="hljs-keyword">let</span> res = [];<br>  <span class="hljs-comment">// è®°å½•å‰ä¸€ä¸ªaï¼Œç›¸åŒåˆ™è·³è¿‡æœ¬æ¬¡açš„å¾ªç¯</span><br>  <span class="hljs-keyword">let</span> preA;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) &#123;<br>    <span class="hljs-keyword">const</span> a = newNums[i];<br>    <span class="hljs-keyword">if</span> (preA === a) <span class="hljs-keyword">continue</span>;<br>    preA = a;<br>    <span class="hljs-comment">// preSecondè®°å½•ç¬¬äºŒæ¬¡å¾ªç¯çš„èµ·å§‹å€¼ï¼Œåœ¨åŒä¸€ä¸ªaé‡Œï¼Œç›¸åŒåˆ™è·³è¿‡æœ¬æ¬¡secondå¾ªç¯</span><br>    <span class="hljs-keyword">let</span> left = i + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">let</span> right = length - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">let</span> preSecond;<br><br>    <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>      <span class="hljs-keyword">const</span> baseLeft = newNums[left];<br><br>      <span class="hljs-keyword">if</span> (baseLeft === preSecond) &#123;<br>        left++;<br>        <span class="hljs-keyword">continue</span>;<br>      &#125;<br><br>      <span class="hljs-keyword">const</span> b = baseLeft;<br>      <span class="hljs-keyword">const</span> c = newNums[right];<br>      <span class="hljs-keyword">const</span> sum = b + c;<br>      <span class="hljs-keyword">if</span> (sum === -a) &#123;<br>        res.push([a, b, c]);<br>        preSecond = baseLeft;<br>        left++;<br>        right--;<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sum &gt; -a) &#123;<br>        right--;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        preSecond = baseLeft;<br>        left++;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br><span class="hljs-keyword">var</span> sortNumber = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (nums.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> nums;<br>  <span class="hljs-keyword">const</span> pivot = nums[<span class="hljs-number">0</span>];<br>  <span class="hljs-keyword">let</span> left = [];<br>  <span class="hljs-keyword">let</span> right = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> cur = nums[i];<br>    <span class="hljs-keyword">if</span> (cur &lt; pivot) &#123;<br>      left.push(cur);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      right.push(cur);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> sortNumber(left).concat([pivot], sortNumber(right));<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="16-æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ"><a href="#16-æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="16.æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ"></a>16.æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> threeSumClosest = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, target</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> length = nums.length;<br>  <span class="hljs-keyword">const</span> newNums = sortNumber(nums);<br>  <span class="hljs-keyword">let</span> minGap = <span class="hljs-built_in">Number</span>.MAX_VALUE;<br>  <span class="hljs-keyword">let</span> allSum;<br>  <span class="hljs-comment">// è®°å½•å‰ä¸€ä¸ªaï¼Œç›¸åŒåˆ™è·³è¿‡æœ¬æ¬¡açš„å¾ªç¯</span><br>  <span class="hljs-keyword">let</span> preA;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) &#123;<br>    <span class="hljs-keyword">const</span> a = newNums[i];<br>    <span class="hljs-keyword">if</span> (preA === a) <span class="hljs-keyword">continue</span>;<br>    preA = a;<br>    <span class="hljs-comment">// preSecondè®°å½•ç¬¬äºŒæ¬¡å¾ªç¯çš„èµ·å§‹å€¼ï¼Œåœ¨åŒä¸€ä¸ªaé‡Œï¼Œç›¸åŒåˆ™è·³è¿‡æœ¬æ¬¡secondå¾ªç¯</span><br>    <span class="hljs-keyword">let</span> left = i + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">let</span> right = length - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">let</span> preSecond;<br><br>    <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>      <span class="hljs-keyword">const</span> baseLeft = newNums[left];<br><br>      <span class="hljs-keyword">if</span> (baseLeft === preSecond) &#123;<br>        left++;<br>        <span class="hljs-keyword">continue</span>;<br>      &#125;<br><br>      <span class="hljs-keyword">const</span> b = baseLeft;<br>      <span class="hljs-keyword">const</span> c = newNums[right];<br>      <span class="hljs-keyword">const</span> sum = a + b + c;<br>      <span class="hljs-keyword">debugger</span>;<br>      <span class="hljs-keyword">if</span> (sum === target) &#123;<br>        <span class="hljs-keyword">return</span> sum;<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sum &gt; target) &#123;<br>        <span class="hljs-keyword">const</span> gap = sum - target;<br>        <span class="hljs-keyword">if</span> (gap &lt; minGap) &#123;<br>          minGap = gap;<br>          allSum = sum;<br>        &#125;<br>        right--;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">const</span> gap = target - sum;<br>        <span class="hljs-keyword">if</span> (gap &lt; minGap) &#123;<br>          minGap = gap;<br>          allSum = sum;<br>        &#125;<br>        preSecond = baseLeft;<br>        left++;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> allSum;<br>&#125;;<br><span class="hljs-keyword">var</span> sortNumber = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (nums.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> nums;<br>  <span class="hljs-keyword">const</span> pivot = nums[<span class="hljs-number">0</span>];<br>  <span class="hljs-keyword">let</span> left = [];<br>  <span class="hljs-keyword">let</span> right = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> cur = nums[i];<br>    <span class="hljs-keyword">if</span> (cur &lt; pivot) &#123;<br>      left.push(cur);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      right.push(cur);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> sortNumber(left).concat([pivot], sortNumber(right));<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="17-ç”µè¯å·ç çš„å­—æ¯ç»„åˆ"><a href="#17-ç”µè¯å·ç çš„å­—æ¯ç»„åˆ" class="headerlink" title="17.ç”µè¯å·ç çš„å­—æ¯ç»„åˆ"></a>17.ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> letterCombinations = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">digits</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (!digits) <span class="hljs-keyword">return</span> [];<br>  <span class="hljs-keyword">const</span> map = &#123;<br>    <span class="hljs-number">2</span>: <span class="hljs-string">&quot;abc&quot;</span>,<br>    <span class="hljs-number">3</span>: <span class="hljs-string">&quot;def&quot;</span>,<br>    <span class="hljs-number">4</span>: <span class="hljs-string">&quot;ghi&quot;</span>,<br>    <span class="hljs-number">5</span>: <span class="hljs-string">&quot;jkl&quot;</span>,<br>    <span class="hljs-number">6</span>: <span class="hljs-string">&quot;mno&quot;</span>,<br>    <span class="hljs-number">7</span>: <span class="hljs-string">&quot;pqrs&quot;</span>,<br>    <span class="hljs-number">8</span>: <span class="hljs-string">&quot;tuv&quot;</span>,<br>    <span class="hljs-number">9</span>: <span class="hljs-string">&quot;wxzy&quot;</span>,<br>  &#125;;<br>  <span class="hljs-keyword">let</span> res = [];<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">backTrack</span>(<span class="hljs-params">digits, track</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (digits.length === <span class="hljs-number">0</span>) &#123;<br>      res.push(track);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">const</span> d = map[digits[<span class="hljs-number">0</span>]];<br>    <span class="hljs-keyword">const</span> restDigits = digits.substring(<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">in</span> d) &#123;<br>      <span class="hljs-keyword">const</span> cur = d[i];<br>      backTrack(restDigits, track + cur);<br>    &#125;<br>  &#125;<br>  backTrack(digits, <span class="hljs-string">&quot;&quot;</span>);<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="18-å››æ•°ä¹‹å’Œ"><a href="#18-å››æ•°ä¹‹å’Œ" class="headerlink" title="18.å››æ•°ä¹‹å’Œ"></a>18.å››æ•°ä¹‹å’Œ</h2><p>åœ¨é¢˜ 15.ä¸‰æ•°ä¹‹å’Œçš„å¤–å±‚åŠ ä¸€ä¸ª d</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> fourSum = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, target</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> length = nums.length;<br>  <span class="hljs-keyword">const</span> newNums = sortNumber(nums);<br>  <span class="hljs-keyword">let</span> res = [];<br>  <span class="hljs-keyword">let</span> preD;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; length; j++) &#123;<br>    <span class="hljs-keyword">const</span> d = newNums[j];<br>    <span class="hljs-keyword">if</span> (preD === d) <span class="hljs-keyword">continue</span>;<br>    preD = d;<br>    <span class="hljs-keyword">let</span> preA;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = j + <span class="hljs-number">1</span>; i &lt; length; i++) &#123;<br>      <span class="hljs-keyword">const</span> a = newNums[i];<br>      <span class="hljs-keyword">if</span> (preA === a) <span class="hljs-keyword">continue</span>;<br>      preA = a;<br>      <span class="hljs-keyword">let</span> left = i + <span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">let</span> right = length - <span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">let</span> preSecond;<br><br>      <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>        <span class="hljs-keyword">const</span> baseLeft = newNums[left];<br><br>        <span class="hljs-keyword">if</span> (baseLeft === preSecond) &#123;<br>          left++;<br>          <span class="hljs-keyword">continue</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">const</span> b = baseLeft;<br>        <span class="hljs-keyword">const</span> c = newNums[right];<br>        <span class="hljs-keyword">const</span> sum = a + b + c;<br>        <span class="hljs-keyword">if</span> (sum === target - d) &#123;<br>          res.push([d, a, b, c]);<br>          preSecond = baseLeft;<br>          left++;<br>          right--;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sum &gt; target - d) &#123;<br>          right--;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          preSecond = baseLeft;<br>          left++;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br><span class="hljs-keyword">var</span> sortNumber = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (nums.length &lt;= <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> nums;<br>  <span class="hljs-keyword">const</span> pivot = nums[<span class="hljs-number">0</span>];<br>  <span class="hljs-keyword">let</span> left = [];<br>  <span class="hljs-keyword">let</span> right = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> cur = nums[i];<br>    <span class="hljs-keyword">if</span> (cur &lt; pivot) &#123;<br>      left.push(cur);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      right.push(cur);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> sortNumber(left).concat([pivot], sortNumber(right));<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="20-æœ‰æ•ˆçš„æ‹¬å·"><a href="#20-æœ‰æ•ˆçš„æ‹¬å·" class="headerlink" title="20. æœ‰æ•ˆçš„æ‹¬å·"></a>20. æœ‰æ•ˆçš„æ‹¬å·</h2><p>ç”¨æ ˆï¼šéå† sï¼Œæ˜¯å·¦æ‹¬å·å…¥æ ˆï¼Œæ˜¯å³æ‹¬å·çœ‹æ˜¯å¦åŒ¹é…å‡ºæ ˆçš„å…ƒç´ ã€‚<br>ä½¿ç”¨ Map åšå·¦å³æ‹¬å·çš„å¯¹åº”å…³ç³»</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> isValid = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (s.length % <span class="hljs-number">2</span> === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();<br>  map.set(<span class="hljs-string">&quot;)&quot;</span>, <span class="hljs-string">&quot;(&quot;</span>);<br>  map.set(<span class="hljs-string">&quot;]&quot;</span>, <span class="hljs-string">&quot;[&quot;</span>);<br>  map.set(<span class="hljs-string">&quot;&#125;&quot;</span>, <span class="hljs-string">&quot;&#123;&quot;</span>);<br>  <span class="hljs-keyword">const</span> arr = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; s.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> cur = s[i];<br>    <span class="hljs-keyword">if</span> (cur === <span class="hljs-string">&quot;(&quot;</span> || cur === <span class="hljs-string">&quot;&#123;&quot;</span> || cur === <span class="hljs-string">&quot;[&quot;</span>) &#123;<br>      arr.push(cur);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">if</span> (arr.pop() !== map.get(cur)) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> arr.length === <span class="hljs-number">0</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="21-åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨"><a href="#21-åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨" class="headerlink" title="21.åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨"></a>21.åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> mergeTwoLists = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">l1, l2</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (!l1) <span class="hljs-keyword">return</span> l2;<br>  <span class="hljs-keyword">if</span> (!l2) <span class="hljs-keyword">return</span> l1;<br>  <span class="hljs-keyword">if</span> (l1.val &lt; l2.val) &#123;<br>    l1.next = mergeTwoLists(l1.next, l2);<br>    <span class="hljs-keyword">return</span> l1;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    l2.next = mergeTwoLists(l1, l2.next);<br>    <span class="hljs-keyword">return</span> l2;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="26-åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"><a href="#26-åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹" class="headerlink" title="26.åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"></a>26.åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</h2><p>åŒæŒ‡é’ˆ<br>æ—¶é—´å¤æ‚åº¦ O(n),ç©ºé—´å¤æ‚åº¦ O(1)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> removeDuplicates = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (nums.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">if</span> (nums[i] !== nums[i - <span class="hljs-number">1</span>]) &#123;<br>      j++;<br>      nums[j] = nums[i];<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> j + <span class="hljs-number">1</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="27-ç§»é™¤å…ƒç´ "><a href="#27-ç§»é™¤å…ƒç´ " class="headerlink" title="27.ç§»é™¤å…ƒç´ "></a>27.ç§»é™¤å…ƒç´ </h2><p>ä»åå¾€å‰åˆ é™¤</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> removeElement = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, val</span>) </span>&#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = nums.length - <span class="hljs-number">1</span>; i &gt; -<span class="hljs-number">1</span>; i--) &#123;<br>    <span class="hljs-keyword">if</span> (nums[i] === val) &#123;<br>      nums.splice(i, <span class="hljs-number">1</span>);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> nums.length;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="28-å®ç°-strStr"><a href="#28-å®ç°-strStr" class="headerlink" title="28.å®ç° strStr()"></a>28.å®ç° strStr()</h2><p>åœ¨ haystack ä¸­æ‰¾ needle çš„ç¬¬ä¸€ä¸ªå­—æ¯å¯¹åº”çš„ä¸‹æ ‡ï¼Œå­˜ firstLetter ä¸­ï¼›<br>éå† firstLetterï¼Œæˆªå– haystack å¯¹åº”çš„å­—ç¬¦ä¸²å’Œ needle æ¯”è¾ƒã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> strStr = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">haystack, needle</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (needle === <span class="hljs-string">&quot;&quot;</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> firstLetter = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; haystack.length; j++) &#123;<br>    <span class="hljs-keyword">if</span> (haystack[j] === needle[<span class="hljs-number">0</span>]) &#123;<br>      firstLetter.push(j);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">if</span> (firstLetter.length !== <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; firstLetter.length; i++) &#123;<br>      <span class="hljs-keyword">const</span> index = firstLetter[i];<br>      <span class="hljs-keyword">const</span> ori = haystack.substr(index, needle.length);<br>      <span class="hljs-keyword">if</span> (ori === needle) <span class="hljs-keyword">return</span> index;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="31-ä¸‹ä¸€ä¸ªæ’åˆ—"><a href="#31-ä¸‹ä¸€ä¸ªæ’åˆ—" class="headerlink" title="31.ä¸‹ä¸€ä¸ªæ’åˆ—"></a>31.ä¸‹ä¸€ä¸ªæ’åˆ—</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> nextPermutation = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = nums.length;<br>  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºå®Œå…¨å‡åºæ•°ç»„ï¼Œå¦åšå¤„ç†</span><br>  <span class="hljs-keyword">let</span> ascend = <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = len - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>    <span class="hljs-keyword">const</span> a = nums[i];<br>    <span class="hljs-comment">// bæ˜¯açš„ç›¸é‚»å‡åº</span><br>    <span class="hljs-keyword">const</span> j = i + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">const</span> b = nums[i + <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">if</span> (a &lt; b) &#123;<br>      ascend = <span class="hljs-literal">false</span>;<br>      <span class="hljs-comment">// båä¸å­˜åœ¨æ•°å­—ï¼Œåˆ™ç›´æ¥äº¤æ¢,è¿”å›</span><br>      <span class="hljs-keyword">if</span> (j === len - <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> swapAAndB(nums, i, j);<br>      &#125;<br>      <span class="hljs-comment">// å¦åˆ™å¯»æ‰¾båï¼ˆåŒ…æ‹¬bï¼‰å¤§äºaä¸”æœ€å°çš„æ•°å­—c</span><br>      <span class="hljs-keyword">let</span> cIndex = j;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> z = j + <span class="hljs-number">1</span>; z &lt; len; z++) &#123;<br>        <span class="hljs-keyword">if</span> (nums[z] &gt; a &amp;&amp; nums[z] &lt;= b) &#123;<br>          cIndex = z;<br>        &#125;<br>      &#125;<br>      <span class="hljs-comment">// æ­¤æ—¶ a&lt;c&lt;=b,äº¤æ¢aã€c</span><br>      swapAAndB(nums, i, cIndex);<br>      <span class="hljs-comment">// å°†bä¹‹åçš„æ•°ç»„å‡åºæ’åˆ—ï¼Œå› ä¸ºå®ƒä¸€å®šæ˜¯é™åºçš„ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥åè½¬</span><br>      swapAToB(nums, j, len - <span class="hljs-number">1</span>);<br>      <span class="hljs-keyword">return</span> nums;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">if</span> (ascend) &#123;<br>    <span class="hljs-keyword">return</span> swapAToB(nums, <span class="hljs-number">0</span>, len - <span class="hljs-number">1</span>);<br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">var</span> swapAToB = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, i, j</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> left = i;<br>  <span class="hljs-keyword">let</span> right = j;<br>  <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>    swapAAndB(nums, left, right);<br>    left++;<br>    right--;<br>  &#125;<br>  <span class="hljs-keyword">return</span> nums;<br>&#125;;<br><br><span class="hljs-keyword">var</span> swapAAndB = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, i, j</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> temp = nums[i];<br>  nums[i] = nums[j];<br>  nums[j] = temp;<br>  <span class="hljs-keyword">return</span> nums;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="39-ç»„åˆæ€»å’Œ"><a href="#39-ç»„åˆæ€»å’Œ" class="headerlink" title="39.ç»„åˆæ€»å’Œ"></a>39.ç»„åˆæ€»å’Œ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> combinationSum = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">candidates, target</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> result = [];<br>  <span class="hljs-keyword">var</span> recursion = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">track, target, start</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (target &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">if</span> (target === <span class="hljs-number">0</span>) &#123;<br>      result.push(track);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt; candidates.length; i++) &#123;<br>      <span class="hljs-keyword">const</span> cur = candidates[i];<br>      recursion(track.concat([cur]), target - cur, i);<br>    &#125;<br>  &#125;;<br>  recursion([], target, <span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span> result;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="40-ç»„åˆæ€»å’Œ-II"><a href="#40-ç»„åˆæ€»å’Œ-II" class="headerlink" title="40.ç»„åˆæ€»å’Œ II"></a>40.ç»„åˆæ€»å’Œ II</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> combinationSum2 = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">candidates, target</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> result = [];<br>  candidates.sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b);<br>  <span class="hljs-keyword">var</span> recursion = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">track, target, start</span>) </span>&#123;<br>    <span class="hljs-keyword">debugger</span>;<br>    <span class="hljs-keyword">if</span> (target &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">if</span> (target === <span class="hljs-number">0</span>) &#123;<br>      result.push(track);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt; candidates.length; i++) &#123;<br>      <span class="hljs-keyword">const</span> cur = candidates[i];<br>      <span class="hljs-keyword">if</span> (cur === candidates[i - <span class="hljs-number">1</span>] &amp;&amp; i &gt; start) &#123;<br>        <span class="hljs-keyword">continue</span>;<br>      &#125;<br>      recursion(track.concat([cur]), target - cur, i + <span class="hljs-number">1</span>);<br>    &#125;<br>  &#125;;<br>  recursion([], target, <span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span> result;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="45-è·³è·ƒæ¸¸æˆ-II"><a href="#45-è·³è·ƒæ¸¸æˆ-II" class="headerlink" title="45.è·³è·ƒæ¸¸æˆ II"></a>45.è·³è·ƒæ¸¸æˆ II</h2><ol><li>é€’å½’</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> jump = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = nums.length;<br>  <span class="hljs-keyword">if</span> (len === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recursion</span>(<span class="hljs-params">pivot</span>) </span>&#123;<br>    count++;<br>    <span class="hljs-keyword">const</span> step = nums[pivot];<br>    <span class="hljs-keyword">if</span> (step + pivot &gt;= len - <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">let</span> maxIndex = pivot;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = pivot + <span class="hljs-number">1</span>; i &lt;= pivot + step; i++) &#123;<br>      <span class="hljs-keyword">if</span> (nums[i] + i &gt; nums[maxIndex] + maxIndex) &#123;<br>        maxIndex = i;<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (maxIndex === pivot) <span class="hljs-keyword">return</span>;<br>    recursion(maxIndex);<br>  &#125;<br>  recursion(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span> count;<br>&#125;;<br></code></pre></td></tr></table></figure><ol start="2"><li>å¾ªç¯</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> jump = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = nums.length;<br>  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>,<br>    max = <span class="hljs-number">0</span>,<br>    end = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len - <span class="hljs-number">1</span>; i++) &#123;<br>    max = <span class="hljs-built_in">Math</span>.max(max, i + nums[i]);<br>    <span class="hljs-keyword">if</span> (i === end) &#123;<br>      end = max;<br>      count++;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> count;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="46-å…¨æ’åˆ—"><a href="#46-å…¨æ’åˆ—" class="headerlink" title="46.å…¨æ’åˆ—"></a>46.å…¨æ’åˆ—</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> permute = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = [];<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recursion</span>(<span class="hljs-params">track, used</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (track.length === nums.length) &#123;<br>      res.push(track);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>      <span class="hljs-keyword">const</span> cur = nums[i];<br>      <span class="hljs-keyword">if</span> (used.includes(i)) <span class="hljs-keyword">continue</span>;<br>      recursion(track.concat([cur]), used.concat([i]));<br>    &#125;<br>  &#125;<br>  recursion([], []);<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="47-å…¨æ’åˆ—-II"><a href="#47-å…¨æ’åˆ—-II" class="headerlink" title="47.å…¨æ’åˆ— II"></a>47.å…¨æ’åˆ— II</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> swap = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, i, j</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (i === j) <span class="hljs-keyword">return</span>;<br>  <span class="hljs-keyword">const</span> temp = nums[i];<br>  nums[i] = nums[j];<br>  nums[j] = temp;<br>&#125;;<br><span class="hljs-keyword">var</span> permuteUnique = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = [];<br>  nums.sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b);<br>  <span class="hljs-keyword">const</span> length = nums.length;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recursion</span>(<span class="hljs-params">arr, pivot</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (arr.length === pivot) &#123;<br>      res.push(arr.slice());<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">let</span> map = &#123;&#125;;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = pivot; i &lt; length; i++) &#123;<br>      <span class="hljs-keyword">const</span> cur = arr[i];<br>      <span class="hljs-keyword">if</span> (!map[cur]) &#123;<br>        map[cur] = <span class="hljs-literal">true</span>;<br>        swap(arr, pivot, i);<br>        recursion(arr, pivot + <span class="hljs-number">1</span>);<br>        swap(arr, pivot, i);<br>      &#125;<br>    &#125;<br>  &#125;<br>  recursion(nums, <span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="53-æœ€å¤§å­åºå’Œ"><a href="#53-æœ€å¤§å­åºå’Œ" class="headerlink" title="53.æœ€å¤§å­åºå’Œ"></a>53.æœ€å¤§å­åºå’Œ</h2><p>åŠ¨æ€è§„åˆ’</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> maxSubArray = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> pre = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> max = nums[<span class="hljs-number">0</span>];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> cur <span class="hljs-keyword">of</span> nums) &#123;<br>    pre = <span class="hljs-built_in">Math</span>.max(pre + cur, cur);<br>    max = <span class="hljs-built_in">Math</span>.max(max, pre);<br>  &#125;<br>  <span class="hljs-keyword">return</span> max;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="55-è·³è·ƒæ¸¸æˆ-II"><a href="#55-è·³è·ƒæ¸¸æˆ-II" class="headerlink" title="55.è·³è·ƒæ¸¸æˆ II"></a>55.è·³è·ƒæ¸¸æˆ II</h2><ol><li>ä»ä¸‹æ ‡ 0 å¼€å§‹ï¼Œæ¯æ¬¡å– step é‡Œæœ€å¤§çš„å€¼ä½œä¸ºä¸‹ä¸€ä¸ªä¸‹æ ‡<br>è¿™ä¸ªæ€è·¯é€‚ç”¨äºé¢˜ 45.è·³è·ƒæ¸¸æˆ II</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> canJump = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = nums.length;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-literal">false</span>;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">backTrack</span>(<span class="hljs-params">pivot</span>) </span>&#123;<br>    <span class="hljs-keyword">const</span> step = nums[pivot];<br>    <span class="hljs-keyword">if</span> (step + pivot &gt;= len - <span class="hljs-number">1</span>) &#123;<br>      res = <span class="hljs-literal">true</span>;<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">let</span> maxIndex = pivot;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = pivot + <span class="hljs-number">1</span>; i &lt;= pivot + step; i++) &#123;<br>      <span class="hljs-keyword">if</span> (nums[i] + i &gt; nums[maxIndex] + maxIndex) &#123;<br>        maxIndex = i;<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (maxIndex === pivot) <span class="hljs-keyword">return</span>;<br>    backTrack(maxIndex);<br>  &#125;<br>  backTrack(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><ol start="2"><li>éå† nums,åˆ¤æ–­å½“å‰æ˜¯å¦åœ¨æ­¥æ•° max ä¸­ï¼Œæ˜¯åˆ™æ›´æ–° max çš„æ•°æ®ï¼Œå¦åˆ™è¿”å› false</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> canJump = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> max = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">if</span> (i &lt;= max) &#123;<br>      <span class="hljs-keyword">if</span> (nums[i] + i &gt; max) max = nums[i] + i;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="56-åˆå¹¶åŒºé—´"><a href="#56-åˆå¹¶åŒºé—´" class="headerlink" title="56.åˆå¹¶åŒºé—´"></a>56.åˆå¹¶åŒºé—´</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> merge = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">intervals</span>) </span>&#123;<br>  intervals.sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a[<span class="hljs-number">1</span>] - b[<span class="hljs-number">1</span>]);<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = intervals.length - <span class="hljs-number">1</span>; i &gt; <span class="hljs-number">0</span>; i--) &#123;<br>    <span class="hljs-keyword">const</span> cur = intervals[i];<br>    <span class="hljs-keyword">const</span> pre = intervals[i - <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">if</span> (pre[<span class="hljs-number">0</span>] &gt;= cur[<span class="hljs-number">0</span>]) &#123;<br>      intervals.splice(i - <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pre[<span class="hljs-number">1</span>] &gt;= cur[<span class="hljs-number">0</span>]) &#123;<br>      intervals.splice(i - <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, [pre[<span class="hljs-number">0</span>], cur[<span class="hljs-number">1</span>]]);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> intervals;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="58-æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦"><a href="#58-æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦" class="headerlink" title="58.æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦"></a>58.æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦</h2><p>æ³¨æ„ç‰¹æ®Šæƒ…å†µ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> lengthOfLastWord = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> start = -<span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = s.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>    <span class="hljs-keyword">if</span> (s[i] !== <span class="hljs-string">&quot; &quot;</span> &amp;&amp; start === -<span class="hljs-number">1</span>) &#123;<br>      start = i;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (s[i] === <span class="hljs-string">&quot; &quot;</span> &amp;&amp; start !== -<span class="hljs-number">1</span>) &#123;<br>      <span class="hljs-keyword">return</span> start - i;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> start === -<span class="hljs-number">1</span> ? <span class="hljs-number">0</span> : start + <span class="hljs-number">1</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="60-ç¬¬-k-ä¸ªæ’åˆ—"><a href="#60-ç¬¬-k-ä¸ªæ’åˆ—" class="headerlink" title="60.ç¬¬ k ä¸ªæ’åˆ—"></a>60.ç¬¬ k ä¸ªæ’åˆ—</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> getPermutation = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">n, k</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> dp = [];<br>  <span class="hljs-keyword">let</span> choose = [<span class="hljs-number">1</span>];<br>  dp[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">let</span> m = <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">while</span> (m &lt;= n) &#123;<br>    dp[m] = dp[m - <span class="hljs-number">1</span>] * m;<br>    choose.push(m);<br>    m++;<br>  &#125;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-string">&quot;&quot;</span>;<br>  k--;<br>  <span class="hljs-keyword">while</span> (n &gt; <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-keyword">if</span> (n &gt; <span class="hljs-number">2</span>) &#123;<br>      <span class="hljs-keyword">const</span> quotient = (k / dp[n - <span class="hljs-number">1</span>]) | <span class="hljs-number">0</span>;<br>      <span class="hljs-keyword">const</span> remainder = k % dp[n - <span class="hljs-number">1</span>];<br>      res += choose[quotient];<br>      choose.splice(quotient, <span class="hljs-number">1</span>);<br>      k = remainder;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n === <span class="hljs-number">2</span>) &#123;<br>      res += choose[k];<br>      choose.splice(k, <span class="hljs-number">1</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      res += choose[<span class="hljs-number">0</span>];<br>    &#125;<br>    n--;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="62-ä¸åŒè·¯å¾„"><a href="#62-ä¸åŒè·¯å¾„" class="headerlink" title="62.ä¸åŒè·¯å¾„"></a>62.ä¸åŒè·¯å¾„</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> uniquePaths = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">m, n</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> dp = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>    dp[i] = [];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>      <span class="hljs-keyword">if</span> (i === <span class="hljs-number">0</span> || j === <span class="hljs-number">0</span>) dp[i][j] = <span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">else</span> dp[i][j] = dp[i - <span class="hljs-number">1</span>][j] + dp[i][j - <span class="hljs-number">1</span>];<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> dp[m - <span class="hljs-number">1</span>][n - <span class="hljs-number">1</span>];<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="63-ä¸åŒè·¯å¾„-II"><a href="#63-ä¸åŒè·¯å¾„-II" class="headerlink" title="63.ä¸åŒè·¯å¾„ II"></a>63.ä¸åŒè·¯å¾„ II</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> uniquePathsWithObstacles = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obstacleGrid</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> m = obstacleGrid.length;<br>  <span class="hljs-keyword">const</span> n = obstacleGrid[<span class="hljs-number">0</span>].length;<br>  <span class="hljs-keyword">let</span> dp = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>    dp[i] = [];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>      <span class="hljs-keyword">if</span> (<br>        obstacleGrid[i][j] === <span class="hljs-number">1</span> ||<br>        (i === <span class="hljs-number">0</span> &amp;&amp; j &gt; <span class="hljs-number">0</span> &amp;&amp; dp[i][j - <span class="hljs-number">1</span>] === <span class="hljs-number">0</span>) ||<br>        (j === <span class="hljs-number">0</span> &amp;&amp; i &gt; <span class="hljs-number">0</span> &amp;&amp; dp[i - <span class="hljs-number">1</span>][j] === <span class="hljs-number">0</span>)<br>      )<br>        dp[i][j] = <span class="hljs-number">0</span>;<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i === <span class="hljs-number">0</span> || j === <span class="hljs-number">0</span>) dp[i][j] = <span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">else</span> dp[i][j] = dp[i - <span class="hljs-number">1</span>][j] + dp[i][j - <span class="hljs-number">1</span>];<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> dp[m - <span class="hljs-number">1</span>][n - <span class="hljs-number">1</span>];<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="64-æœ€å°è·¯å¾„å’Œ"><a href="#64-æœ€å°è·¯å¾„å’Œ" class="headerlink" title="64.æœ€å°è·¯å¾„å’Œ"></a>64.æœ€å°è·¯å¾„å’Œ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> minPathSum = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">grid</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> m = grid.length;<br>  <span class="hljs-keyword">const</span> n = grid[<span class="hljs-number">0</span>].length;<br>  <span class="hljs-keyword">let</span> dp = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>    dp[i] = [];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>      <span class="hljs-keyword">const</span> cur = grid[i][j];<br>      <span class="hljs-keyword">if</span> (i === <span class="hljs-number">0</span> &amp;&amp; j === <span class="hljs-number">0</span>) dp[i][j] = grid[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i === <span class="hljs-number">0</span>) dp[i][j] = cur + dp[i][j - <span class="hljs-number">1</span>];<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j === <span class="hljs-number">0</span>) dp[i][j] = cur + dp[i - <span class="hljs-number">1</span>][j];<br>      <span class="hljs-keyword">else</span> dp[i][j] = cur + <span class="hljs-built_in">Math</span>.min(dp[i][j - <span class="hljs-number">1</span>], dp[i - <span class="hljs-number">1</span>][j]);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> dp[m - <span class="hljs-number">1</span>][n - <span class="hljs-number">1</span>];<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="66-åŠ ä¸€"><a href="#66-åŠ ä¸€" class="headerlink" title="66.åŠ ä¸€"></a>66.åŠ ä¸€</h2><p>å€’åºéå†ï¼Œæ˜¯ 9 æ”¹ä¸º 0ï¼Œå¦åˆ™åŠ ä¸€å¹¶ returnï¼›æœ€åå¤„ç†è¿›ä½çš„æƒ…å†µ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> plusOne = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">digits</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> length = digits.length;<br><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>    <span class="hljs-keyword">const</span> cur = digits[i];<br>    <span class="hljs-keyword">if</span> (cur === <span class="hljs-number">9</span>) &#123;<br>      digits[i] = <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      digits[i] = cur + <span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">return</span> digits;<br>    &#125;<br>  &#125;<br>  &lt;!-- è¿›ä½ --&gt;<br>  digits.splice(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<br>  <span class="hljs-keyword">return</span> digits;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="67-äºŒè¿›åˆ¶æ±‚å’Œ"><a href="#67-äºŒè¿›åˆ¶æ±‚å’Œ" class="headerlink" title="67.äºŒè¿›åˆ¶æ±‚å’Œ"></a>67.äºŒè¿›åˆ¶æ±‚å’Œ</h2><p>è¡¥ 0ï¼Œå€’åºè¿›ä½åŠ æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> addBinary = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = [];<br>  <span class="hljs-keyword">const</span> aLen = a.length;<br>  <span class="hljs-keyword">const</span> bLen = b.length;<br>  <span class="hljs-keyword">let</span> maxLength;<br>  <span class="hljs-comment">// è¡¥0</span><br>  <span class="hljs-keyword">if</span> (aLen &gt; bLen) &#123;<br>    maxLength = aLen;<br>    b =<br>      <span class="hljs-built_in">Array</span>(maxLength - bLen)<br>        .fill(<span class="hljs-number">0</span>)<br>        .join(<span class="hljs-string">&quot;&quot;</span>) + b;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    maxLength = bLen;<br>    a =<br>      <span class="hljs-built_in">Array</span>(maxLength - aLen)<br>        .fill(<span class="hljs-number">0</span>)<br>        .join(<span class="hljs-string">&quot;&quot;</span>) + a;<br>  &#125;<br>  <span class="hljs-keyword">let</span> carry = <span class="hljs-literal">false</span>;<br><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = maxLength - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>    <span class="hljs-keyword">const</span> x = <span class="hljs-built_in">Number</span>(a[i]) || <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">const</span> y = <span class="hljs-built_in">Number</span>(b[i]) || <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">const</span> cur = x + y + (carry ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (cur &gt;= <span class="hljs-number">2</span>) &#123;<br>      res.push(cur % <span class="hljs-number">2</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);<br>      carry = <span class="hljs-literal">true</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      res.push(cur);<br>      carry = <span class="hljs-literal">false</span>;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">if</span> (carry) res.push(<span class="hljs-number">1</span>);<br>  <span class="hljs-keyword">return</span> res.reverse().join(<span class="hljs-string">&quot;&quot;</span>);<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="70-çˆ¬æ¥¼æ¢¯"><a href="#70-çˆ¬æ¥¼æ¢¯" class="headerlink" title="70.çˆ¬æ¥¼æ¢¯"></a>70.çˆ¬æ¥¼æ¢¯</h2><p>æ•°å­¦å½’çº³æ³•å¾—å‡ºè¿™æ˜¯ä¸€ä¸ªæ–æ³¢çº³å¥‘æ•°åˆ—<br>æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> climbStairs = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">n</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> pre = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">let</span> cur = <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">if</span> (n === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> pre;<br>  <span class="hljs-keyword">if</span> (n === <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> cur;<br>  <span class="hljs-keyword">let</span> sum;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">3</span>; i &lt;= n; i++) &#123;<br>    sum = pre + cur;<br>    pre = cur;<br>    cur = sum;<br>  &#125;<br>  <span class="hljs-keyword">return</span> sum;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="75-é¢œè‰²åˆ†ç±»"><a href="#75-é¢œè‰²åˆ†ç±»" class="headerlink" title="75.é¢œè‰²åˆ†ç±»"></a>75.é¢œè‰²åˆ†ç±»</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> sortColors = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> p2 = nums.length - <span class="hljs-number">1</span>,<br>    p0 = <span class="hljs-number">0</span>,<br>    cur = <span class="hljs-number">0</span>;<br><br>  <span class="hljs-keyword">while</span> (cur &lt;= p2) &#123;<br>    <span class="hljs-keyword">if</span> (nums[cur] === <span class="hljs-number">0</span>) &#123;<br>      swap(nums, p0, cur);<br>      p0++;<br>      cur++;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nums[cur] === <span class="hljs-number">2</span>) &#123;<br>      swap(nums, p2, cur);<br>      p2--;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      cur++;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> nums;<br>&#125;;<br><span class="hljs-keyword">var</span> swap = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, i, j</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (i === j) <span class="hljs-keyword">return</span>;<br>  <span class="hljs-keyword">const</span> temp = nums[i];<br>  nums[i] = nums[j];<br>  nums[j] = temp;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="77-ç»„åˆ"><a href="#77-ç»„åˆ" class="headerlink" title="77.ç»„åˆ"></a>77.ç»„åˆ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> combine = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">n, k</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = [];<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recursion</span>(<span class="hljs-params">track, start</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (track.length === k) &#123;<br>      res.push(track);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt;= n; i++) &#123;<br>      recursion(track.concat([i]), i + <span class="hljs-number">1</span>);<br>    &#125;<br>  &#125;<br>  recursion([], <span class="hljs-number">1</span>);<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="78-å­é›†"><a href="#78-å­é›†" class="headerlink" title="78.å­é›†"></a>78.å­é›†</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> subsets = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = [];<br>  <span class="hljs-keyword">const</span> length = nums.length;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recursion</span>(<span class="hljs-params">track, pivot</span>) </span>&#123;<br>    res.push(track);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = pivot; i &lt; length; i++) &#123;<br>      <span class="hljs-keyword">const</span> cur = nums[i];<br>      recursion(track.concat([cur]), i + <span class="hljs-number">1</span>);<br>    &#125;<br>  &#125;<br>  recursion([], <span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="80-åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹-II"><a href="#80-åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹-II" class="headerlink" title="80.åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ II"></a>80.åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ II</h2><p>åŒæŒ‡é’ˆ<br>æ—¶é—´å¤æ‚åº¦ O(n),ç©ºé—´å¤æ‚åº¦ O(1)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> removeDuplicates = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> j = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">let</span> count = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">if</span> (nums[i] === nums[i - <span class="hljs-number">1</span>]) &#123;<br>      count++;<br>    &#125; <span class="hljs-keyword">else</span> count = <span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">if</span> (count &lt;= <span class="hljs-number">2</span>) &#123;<br>      nums[j] = nums[i];<br>      j++;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> j;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="83-åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ "><a href="#83-åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ " class="headerlink" title="83.åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ "></a>83.åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ </h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> deleteDuplicates = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">head</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (!head || !head.next) <span class="hljs-keyword">return</span> head;<br>  <span class="hljs-keyword">let</span> cur = head;<br>  <span class="hljs-keyword">let</span> second = cur.next;<br>  <span class="hljs-keyword">while</span> (second) &#123;<br>    <span class="hljs-keyword">if</span> (cur.val === second.val) &#123;<br>      second = second.next;<br>      cur.next = second;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      cur = second;<br>      second = second.next;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> head;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="90-å­é›†-II"><a href="#90-å­é›†-II" class="headerlink" title="90.å­é›† II"></a>90.å­é›† II</h2><p>åœ¨ é¢˜ 78.å­é›†çš„åŸºç¡€ä¸ŠåŠ äº†ä¸¤æ­¥ï¼šæ’åºã€è·³è¿‡åŒå±‚é‡å¤æ•°çš„å¾ªç¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> subsetsWithDup = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = [];<br>  nums.sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b);<br>  <span class="hljs-keyword">const</span> length = nums.length;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recursion</span>(<span class="hljs-params">track, pivot</span>) </span>&#123;<br>    res.push(track);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = pivot; i &lt; length; i++) &#123;<br>      <span class="hljs-keyword">const</span> cur = nums[i];<br>      <span class="hljs-keyword">if</span> (i &gt; pivot &amp;&amp; cur === nums[i - <span class="hljs-number">1</span>]) <span class="hljs-keyword">continue</span>;<br>      recursion(track.concat([cur]), i + <span class="hljs-number">1</span>);<br>    &#125;<br>  &#125;<br>  recursion([], <span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="93-å¤åŸ-IP-åœ°å€"><a href="#93-å¤åŸ-IP-åœ°å€" class="headerlink" title="93.å¤åŸ IP åœ°å€"></a>93.å¤åŸ IP åœ°å€</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> restoreIpAddresses = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = [];<br>  <span class="hljs-keyword">var</span> backTrack = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">pivot, track, pre, count</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">if</span> (pivot === s.length) &#123;<br>      <span class="hljs-keyword">if</span> (count === <span class="hljs-number">3</span>) &#123;<br>        res.push(track + pre);<br>      &#125;<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Number</span>(pre + s[pivot]) &lt; <span class="hljs-number">256</span>) &#123;<br>      <span class="hljs-keyword">if</span> (pre) &#123;<br>        backTrack(pivot, track + pre + <span class="hljs-string">&quot;.&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, count + <span class="hljs-number">1</span>);<br>      &#125;<br>      <span class="hljs-keyword">if</span> (pre !== <span class="hljs-string">&quot;0&quot;</span>) &#123;<br>        backTrack(pivot + <span class="hljs-number">1</span>, track, pre + s[pivot], count);<br>      &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      backTrack(pivot, track + pre + <span class="hljs-string">&quot;.&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, count + <span class="hljs-number">1</span>);<br>    &#125;<br>  &#125;;<br><br>  backTrack(<span class="hljs-number">0</span>, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="100-ç›¸åŒçš„æ ‘"><a href="#100-ç›¸åŒçš„æ ‘" class="headerlink" title="100.ç›¸åŒçš„æ ‘"></a>100.ç›¸åŒçš„æ ‘</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> isSameTree = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">p, q</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (!p &amp;&amp; !q) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!p || !q) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>  <span class="hljs-keyword">if</span> (p.val !== q.val) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  <span class="hljs-keyword">return</span> isSameTree(p.left, q.left) &amp;&amp; isSameTree(p.right, q.right);<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="101-å¯¹ç§°äºŒå‰æ ‘"><a href="#101-å¯¹ç§°äºŒå‰æ ‘" class="headerlink" title="101.å¯¹ç§°äºŒå‰æ ‘"></a>101.å¯¹ç§°äºŒå‰æ ‘</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> isSymmetric = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">root</span>) </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recursion</span>(<span class="hljs-params">p, q</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (!p &amp;&amp; !q) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!p || !q) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">if</span> (p.val !== q.val) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">return</span> recursion(p.left, q.right) &amp;&amp; recursion(q.left, p.right);<br>  &#125;<br>  <span class="hljs-keyword">return</span> recursion(root, root);<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="104-äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦"><a href="#104-äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦" class="headerlink" title="104.äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦"></a>104.äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> maxDepth = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">root</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> max = <span class="hljs-number">0</span>;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recursion</span>(<span class="hljs-params">node, depth</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (!node) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">if</span> (depth + <span class="hljs-number">1</span> &gt; max) &#123;<br>      max = depth + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">const</span> left = node.left;<br>    <span class="hljs-keyword">const</span> right = node.right;<br>    <span class="hljs-keyword">if</span> (left) &#123;<br>      recursion(left, depth + <span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (right) &#123;<br>      recursion(right, depth + <span class="hljs-number">1</span>);<br>    &#125;<br>  &#125;<br>  recursion(root, <span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span> max;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="118-æ¨è¾‰ä¸‰è§’"><a href="#118-æ¨è¾‰ä¸‰è§’" class="headerlink" title="118.æ¨è¾‰ä¸‰è§’"></a>118.æ¨è¾‰ä¸‰è§’</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> generate = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">numRows</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = [];<br>  <span class="hljs-keyword">let</span> curRow = [<span class="hljs-number">1</span>];<br>  <span class="hljs-keyword">let</span> nextRow = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; numRows; i++) &#123;<br>    res.push(curRow);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; i + <span class="hljs-number">2</span>; j++) &#123;<br>      nextRow.push((curRow[j - <span class="hljs-number">1</span>] || <span class="hljs-number">0</span>) + (curRow[j] || <span class="hljs-number">0</span>));<br>    &#125;<br>    curRow = nextRow;<br>    nextRow = [];<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="119-æ¨è¾‰ä¸‰è§’-II"><a href="#119-æ¨è¾‰ä¸‰è§’-II" class="headerlink" title="119.æ¨è¾‰ä¸‰è§’ II"></a>119.æ¨è¾‰ä¸‰è§’ II</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> getRow = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">rowIndex</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = [<span class="hljs-number">1</span>];<br>  <span class="hljs-keyword">let</span> nextRow;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; rowIndex; i++) &#123;<br>    nextRow = [];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; i + <span class="hljs-number">2</span>; j++) &#123;<br>      nextRow.push((res[j - <span class="hljs-number">1</span>] || <span class="hljs-number">0</span>) + (res[j] || <span class="hljs-number">0</span>));<br>    &#125;<br>    res = nextRow;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="120-ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ"><a href="#120-ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ" class="headerlink" title="120.ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ"></a>120.ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> minimumTotal = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">triangle</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = triangle.length;<br>  <span class="hljs-keyword">let</span> dp = [];<br><br>  <span class="hljs-comment">// æœ€åä¸€è¡Œ</span><br>  dp = triangle[len - <span class="hljs-number">1</span>];<br><br>  <span class="hljs-comment">// å€’æ•°ç¬¬äºŒè¡Œå¼€å§‹å‘ä¸Š</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = len - <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; i + <span class="hljs-number">1</span>; j++) &#123;<br>      dp[j] = <span class="hljs-built_in">Math</span>.min(dp[j], dp[j + <span class="hljs-number">1</span>]) + triangle[i][j];<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>];<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"><a href="#121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº" class="headerlink" title="121.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"></a>121.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> maxProfit = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">prices</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> minPrice = prices[<span class="hljs-number">0</span>];<br>  <span class="hljs-keyword">let</span> maxRange = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; prices.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> cur = prices[i];<br>    <span class="hljs-keyword">const</span> pre = prices[i - <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">const</span> diff = cur - pre;<br>    <span class="hljs-keyword">if</span> (diff &lt; <span class="hljs-number">0</span>) &#123;<br>      minPrice = cur &lt; minPrice ? cur : minPrice;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (diff &gt; <span class="hljs-number">0</span>) &#123;<br>      maxRange = getThreeMax(maxRange, diff, cur - minPrice);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> maxRange;<br>&#125;;<br><br><span class="hljs-keyword">var</span> getThreeMax = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (a &gt; b) &#123;<br>    <span class="hljs-keyword">return</span> a &gt; c ? a : c;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">return</span> b &gt; c ? b : c;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="122-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-II"><a href="#122-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-II" class="headerlink" title="122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II"></a>122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> maxProfit = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">prices</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; prices.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> cur = prices[i];<br>    <span class="hljs-keyword">const</span> pre = prices[i - <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">if</span> (cur &gt; pre) &#123;<br>      sum += cur - pre;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> sum;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="125-éªŒè¯å›æ–‡ä¸²"><a href="#125-éªŒè¯å›æ–‡ä¸²" class="headerlink" title="125.éªŒè¯å›æ–‡ä¸²"></a>125.éªŒè¯å›æ–‡ä¸²</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> isPalindrome = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> right = s.length - <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>    <span class="hljs-keyword">const</span> a = s[left];<br>    <span class="hljs-keyword">const</span> b = s[right];<br>    <span class="hljs-keyword">if</span> (isValidStr(a) &amp;&amp; isValidStr(b)) &#123;<br>      <span class="hljs-keyword">if</span> (a.toLowerCase() !== b.toLowerCase()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>      left++;<br>      right--;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (!isValidStr(a)) left++;<br>    <span class="hljs-keyword">if</span> (!isValidStr(b)) right--;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;;<br><span class="hljs-keyword">var</span> isDigit = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> ((d &lt;= <span class="hljs-string">&quot;z&quot;</span> &amp;&amp; d &gt;= <span class="hljs-string">&quot;a&quot;</span>) || (d &lt;= <span class="hljs-string">&quot;Z&quot;</span> &amp;&amp; d &gt;= <span class="hljs-string">&quot;A&quot;</span>)) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;;<br><span class="hljs-keyword">var</span> isNumber = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isNaN</span>(d) &amp;&amp; d !== <span class="hljs-string">&quot; &quot;</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;;<br><span class="hljs-keyword">var</span> isValidStr = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (isDigit(d) || isNumber(d)) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="134-åŠ æ²¹ç«™"><a href="#134-åŠ æ²¹ç«™" class="headerlink" title="134.åŠ æ²¹ç«™"></a>134.åŠ æ²¹ç«™</h2><p>é¦–å…ˆè¦æœ‰ç›´è§‰è¿™æ˜¯æ—¶é—´å¤æ‚åº¦ O(n)å°±å¯ä»¥å®Œæˆçš„äº‹æƒ…ï¼Œéå† gasï¼Œç®—å‡º gas å’Œ cost çš„å·®å€¼ã€‚<br>å·®å€¼ç›¸åŠ çš„ç»“æœ sum&lt;0 è¯´æ˜ä¸å­˜åœ¨ç¼–å·ï¼Œå¦åˆ™è¿”å› sum æœ€å°æ—¶çš„ i çš„åä¸€ä¸ªæ•°ï¼ˆå› ä¸º index å”¯ä¸€ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> canCompleteCircuit = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">gas, cost</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = gas.length;<br>  <span class="hljs-keyword">let</span> index;<br>  <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> min = <span class="hljs-built_in">Number</span>.MAX_VALUE;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>    <span class="hljs-keyword">const</span> dif = gas[i] - cost[i];<br>    sum += dif;<br>    <span class="hljs-keyword">if</span> (sum &lt; min) &#123;<br>      index = i;<br>      min = sum;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> sum &lt; <span class="hljs-number">0</span> ? -<span class="hljs-number">1</span> : (index + <span class="hljs-number">1</span>) % len;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="136-åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"><a href="#136-åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—" class="headerlink" title="136.åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—"></a>136.åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</h2><ol><li>æ•£åˆ—è¡¨</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> singleNumber = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> cur <span class="hljs-keyword">of</span> nums) &#123;<br>    <span class="hljs-keyword">if</span> (map.has(cur)) &#123;<br>      map.delete(cur);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      map.set(cur);<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">of</span> map.keys()) &#123;<br>    <span class="hljs-keyword">return</span> key;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><ol start="2"><li>ä½è¿ç®—â€”â€”å¼‚æˆ–</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> singleNumber = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> cur <span class="hljs-keyword">of</span> nums) &#123;<br>    res ^= cur;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="151-ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯"><a href="#151-ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯" class="headerlink" title="151.ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯"></a>151.ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> reverseWords = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> res = <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">let</span> start = <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = s.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>    <span class="hljs-keyword">debugger</span>;<br>    <span class="hljs-keyword">const</span> cur = s[i];<br>    <span class="hljs-keyword">if</span> (cur !== <span class="hljs-string">&quot; &quot;</span>) &#123;<br>      str = cur + str;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">if</span> (str) count++;<br>      <span class="hljs-keyword">if</span> (count === <span class="hljs-number">1</span>) &#123;<br>        res += (start ? <span class="hljs-string">&quot;&quot;</span> : <span class="hljs-string">&quot; &quot;</span>) + str;<br>        start = <span class="hljs-literal">false</span>;<br>        str = <span class="hljs-string">&quot;&quot;</span>;<br>        count = <span class="hljs-number">0</span>;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">if</span> (str) res += (start ? <span class="hljs-string">&quot;&quot;</span> : <span class="hljs-string">&quot; &quot;</span>) + str;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="152-ä¹˜ç§¯æœ€å¤§å­æ•°ç»„"><a href="#152-ä¹˜ç§¯æœ€å¤§å­æ•°ç»„" class="headerlink" title="152.ä¹˜ç§¯æœ€å¤§å­æ•°ç»„"></a>152.ä¹˜ç§¯æœ€å¤§å­æ•°ç»„</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> maxProduct = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> dpMax = [];<br>  <span class="hljs-keyword">let</span> dpMin = [];<br>  <span class="hljs-keyword">let</span> max = nums[<span class="hljs-number">0</span>];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">let</span> cur;<br>    <span class="hljs-keyword">if</span> (i === <span class="hljs-number">0</span>) &#123;<br>      dpMax[i] = nums[<span class="hljs-number">0</span>];<br>      dpMin[i] = nums[<span class="hljs-number">0</span>];<br>      cur = nums[<span class="hljs-number">0</span>];<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">if</span> (nums[i] &gt; <span class="hljs-number">0</span>) &#123;<br>        cur = <span class="hljs-built_in">Math</span>.max(nums[i] * dpMax[i - <span class="hljs-number">1</span>], nums[i]);<br>        dpMax[i] = <span class="hljs-built_in">Math</span>.max(nums[i] * dpMax[i - <span class="hljs-number">1</span>], nums[i]);<br>        dpMin[i] = <span class="hljs-built_in">Math</span>.min(nums[i] * dpMin[i - <span class="hljs-number">1</span>], nums[i]);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        cur = <span class="hljs-built_in">Math</span>.max(nums[i] * dpMin[i - <span class="hljs-number">1</span>], nums[i]);<br>        dpMax[i] = <span class="hljs-built_in">Math</span>.max(nums[i] * dpMin[i - <span class="hljs-number">1</span>], nums[i]);<br>        dpMin[i] = <span class="hljs-built_in">Math</span>.min(nums[i] * dpMax[i - <span class="hljs-number">1</span>], nums[i]);<br>      &#125;<br>    &#125;<br>    max = <span class="hljs-built_in">Math</span>.max(max, cur);<br>  &#125;<br>  <span class="hljs-keyword">return</span> max;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="162-å¯»æ‰¾å³°å€¼"><a href="#162-å¯»æ‰¾å³°å€¼" class="headerlink" title="162.å¯»æ‰¾å³°å€¼"></a>162.å¯»æ‰¾å³°å€¼</h2><ol><li>é€’å½’</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> findPeakElement = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> length = nums.length;<br><br>  <span class="hljs-keyword">var</span> recursion = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">start, end</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (start === end) <span class="hljs-keyword">return</span> start;<br>    <span class="hljs-keyword">const</span> len = end - start + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">let</span> m = getMid(len) + start;<br>    <span class="hljs-keyword">if</span> (nums[m] &gt; nums[m + <span class="hljs-number">1</span>]) &#123;<br>      <span class="hljs-keyword">return</span> recursion(start, m);<br>    &#125;<br>    <span class="hljs-keyword">return</span> recursion(m + <span class="hljs-number">1</span>, end);<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> recursion(<span class="hljs-number">0</span>, length - <span class="hljs-number">1</span>);<br>&#125;;<br><br><span class="hljs-keyword">var</span> getMid = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">len</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (len % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> len / <span class="hljs-number">2</span> - <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">return</span> (len - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br>&#125;;<br><br><span class="hljs-keyword">var</span> getMid = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">len</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (len % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> len / <span class="hljs-number">2</span> - <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">return</span> (len - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><ol start="2"><li>è¿­ä»£</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> findPeakElement = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> length = nums.length;<br><br>  <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span>,<br>    end = length - <span class="hljs-number">1</span>;<br><br>  <span class="hljs-keyword">while</span> (start &lt; end) &#123;<br>    <span class="hljs-keyword">const</span> len = end - start + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">let</span> m = getMid(len) + start;<br>    <span class="hljs-keyword">if</span> (nums[m] &gt; nums[m + <span class="hljs-number">1</span>]) &#123;<br>      end = m;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      start = m + <span class="hljs-number">1</span>;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> start;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="167-ä¸¤æ•°ä¹‹å’Œ-II-è¾“å…¥æœ‰åºæ•°ç»„"><a href="#167-ä¸¤æ•°ä¹‹å’Œ-II-è¾“å…¥æœ‰åºæ•°ç»„" class="headerlink" title="167.ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„"></a>167.ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„</h2><p>æœ‰åºæ•°ç»„ï¼Œä½¿ç”¨åŒæŒ‡é’ˆ<br>æ—¶é—´å¤æ‚åº¦ O(n),ç©ºé—´å¤æ‚åº¦ O(1)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> twoSum = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums: number[], target: number</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> right = nums.length - <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>    <span class="hljs-keyword">const</span> sum = nums[left] + nums[right];<br>    <span class="hljs-keyword">if</span> (sum === target) <span class="hljs-keyword">return</span> [left + <span class="hljs-number">1</span>, right + <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sum &gt; target) &#123;<br>      right--;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      left++;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> [-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>];<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="169-å¤šæ•°å…ƒç´ "><a href="#169-å¤šæ•°å…ƒç´ " class="headerlink" title="169.å¤šæ•°å…ƒç´ "></a>169.å¤šæ•°å…ƒç´ </h2><p>æŠ•ç¥¨ç®—æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> majorityElement = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> res = nums[<span class="hljs-number">0</span>];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> cur <span class="hljs-keyword">of</span> nums) &#123;<br>    <span class="hljs-keyword">if</span> (count === <span class="hljs-number">0</span>) res = cur;<br>    <span class="hljs-keyword">if</span> (cur === res) count++;<br>    <span class="hljs-keyword">else</span> count--;<br>  &#125;<br>  <span class="hljs-keyword">return</span> res;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="172-é˜¶ä¹˜åçš„é›¶"><a href="#172-é˜¶ä¹˜åçš„é›¶" class="headerlink" title="172.é˜¶ä¹˜åçš„é›¶"></a>172.é˜¶ä¹˜åçš„é›¶</h2><p>æ•° 5 çš„ä¸ªæ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> trailingZeroes = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">n</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> q = <span class="hljs-number">5</span>;<br>  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">while</span> (q &lt;= n) &#123;<br>    <span class="hljs-keyword">const</span> c = <span class="hljs-built_in">Math</span>.floor(n / q);<br>    count += c;<br>    q *= <span class="hljs-number">5</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> count;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="189-æ—‹è½¬æ•°ç»„"><a href="#189-æ—‹è½¬æ•°ç»„" class="headerlink" title="189.æ—‹è½¬æ•°ç»„"></a>189.æ—‹è½¬æ•°ç»„</h2><p>è€ƒè™‘ç‰¹æ®Šæƒ…å†µ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> rotate = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums, k</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = nums.length;<br>  <span class="hljs-keyword">if</span> (len &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> nums;<br>  <span class="hljs-keyword">if</span> (k &gt; len) k = k % len;<br>  <span class="hljs-keyword">let</span> pre = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>    pre.push(nums[i]);<br>    <span class="hljs-keyword">const</span> index = len - k + i;<br>    <span class="hljs-keyword">if</span> (index &lt; len) &#123;<br>      nums[i] = nums[index];<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      nums[i] = pre[i - k];<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> nums;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="191-ä½-1-çš„ä¸ªæ•°"><a href="#191-ä½-1-çš„ä¸ªæ•°" class="headerlink" title="191.ä½ 1 çš„ä¸ªæ•°"></a>191.ä½ 1 çš„ä¸ªæ•°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> hammingWeight = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">n</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">32</span>; i++) &#123;<br>    <span class="hljs-keyword">if</span> ((n &amp; <span class="hljs-number">1</span>) === <span class="hljs-number">1</span>) &#123;<br>      sum++;<br>    &#125;<br>    n &gt;&gt;= <span class="hljs-number">1</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> sum;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="198-æ‰“å®¶åŠ«èˆ"><a href="#198-æ‰“å®¶åŠ«èˆ" class="headerlink" title="198.æ‰“å®¶åŠ«èˆ"></a>198.æ‰“å®¶åŠ«èˆ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> rob = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">nums</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> len = nums.length;<br>  <span class="hljs-keyword">if</span> (len === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">if</span> (len === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> nums[<span class="hljs-number">0</span>];<br>  <span class="hljs-keyword">if</span> (len === <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.max(nums[<span class="hljs-number">0</span>], nums[<span class="hljs-number">1</span>]);<br>  <span class="hljs-keyword">let</span> dp = [nums[<span class="hljs-number">0</span>], nums[<span class="hljs-number">1</span>]];<br>  <span class="hljs-keyword">let</span> max = <span class="hljs-built_in">Math</span>.max(nums[<span class="hljs-number">0</span>], nums[<span class="hljs-number">1</span>]);<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">2</span>; i &lt; nums.length; i++) &#123;<br>    <span class="hljs-keyword">const</span> curTotal = dp[<span class="hljs-number">0</span>] + nums[i];<br>    max = <span class="hljs-built_in">Math</span>.max(curTotal, dp[<span class="hljs-number">1</span>]);<br>    dp[<span class="hljs-number">0</span>] = <span class="hljs-built_in">Math</span>.max(dp[<span class="hljs-number">1</span>], dp[<span class="hljs-number">0</span>]);<br>    dp[<span class="hljs-number">1</span>] = curTotal;<br>  &#125;<br>  <span class="hljs-keyword">return</span> max;<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨Reactæ¥ç¼–å†™2048æ¸¸æˆ</title>
    <link href="/2019/04/19/react-2048/"/>
    <url>/2019/04/19/react-2048/</url>
    
    <content type="html"><![CDATA[<ul><li><a href="https://qzrzvvy8w6.codesandbox.io/">åœ¨çº¿é¢„è§ˆ</a></li><li><a href="https://codesandbox.io/s/qzrzvvy8w6">ä»£ç </a></li><li>æŠ€æœ¯æ ˆ: React &amp; React Hooks</li></ul><a id="more"></a><ul><li>ç›®å½•ç»“æ„ï¼š<br>|â€“ src/<br>| |â€“ components/<br>| | |â€“ Board/â€”â€”â€”â€“æ£‹ç›˜<br>| | | |â€“ index.js<br>| | | |â€“ styles.css<br>| | |â€“ Squareâ€”â€”â€”â€“æ£‹å­<br>| | | |â€“ index.js<br>| | | |â€“ styles.css<br>| |â€“ index.jsâ€”â€”â€”â€“æ–‡ä»¶å…¥å£</li></ul><p>ç¬¬ä¸€æ¬¡ç”¨ React å†™ä¸œè¥¿ï¼Œæœ‰ä¸å¯¹çš„è¯·æŒ‡æ­£</p><h2 id="ç»“æ„è®¾å®š"><a href="#ç»“æ„è®¾å®š" class="headerlink" title="ç»“æ„è®¾å®š"></a>ç»“æ„è®¾å®š</h2><ol><li><p>4*4 çš„æ£‹ç›˜ï¼Œç”¨ 16 ä½çš„ä¸€ç»´æ•°ç»„ squares æ¥è¡¨ç¤º: new Array(16).fill(0)</p></li><li><p>Board:<br>ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šåˆ†æ•°ã€æ£‹ç›˜ã€æŒ‰é’®<br>æ£‹ç›˜çš„æ£‹å­éƒ¨åˆ†å¼•å…¥ Square ç»„ä»¶</p></li></ol><p><img src="https://i.loli.net/2019/04/19/5cb96b36bacb9.png" alt="Board"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> Square <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../../components/Square/index&quot;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Board</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> [squares, setSquares] = useState(setDefaultChess()); <span class="hljs-comment">//æ£‹å­</span><br>  <span class="hljs-keyword">const</span> [score, setScore] = useState(<span class="hljs-number">0</span>); <span class="hljs-comment">//åˆ†æ•°</span><br>  <span class="hljs-keyword">const</span> [gameFailed, setGameFailed] = useState(<span class="hljs-literal">false</span>); <span class="hljs-comment">//æ˜¯å¦å¤±è´¥</span><br><br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderSquare</span>(<span class="hljs-params">i</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Square</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;squares[i]&#125;</span> /&gt;</span></span>;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    &lt;div className=<span class="hljs-string">&quot;Board&quot;</span>&gt;<br>      &#123;<span class="hljs-comment">/* åˆ†æ•° */</span>&#125;<br>      &#123;gameFailed ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>FAIL!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span> : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>score:&#123;score&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>&#125;<br>      &#123;<span class="hljs-comment">/* æ£‹ç›˜ */</span>&#125;<br>      &lt;div className=<span class="hljs-string">&quot;Board-item&quot;</span>&gt;<br>        &lt;div className=<span class="hljs-string">&quot;board-row&quot;</span>&gt;<br>          &#123;renderSquare(<span class="hljs-number">0</span>)&#125;<br>          &#123;renderSquare(<span class="hljs-number">1</span>)&#125;<br>          &#123;renderSquare(<span class="hljs-number">2</span>)&#125;<br>          &#123;renderSquare(<span class="hljs-number">3</span>)&#125;<br>        &lt;/div&gt;<br>        ...<br>      &lt;/div&gt;<br>      &#123;<span class="hljs-comment">/* æŒ‰é’® */</span>&#125;<br>      &lt;div className=<span class="hljs-string">&quot;new-game&quot;</span> onClick=&#123;newGame.bind(<span class="hljs-built_in">this</span>)&#125;&gt;<br>        <span class="hljs-keyword">new</span> game<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Board;<br></code></pre></td></tr></table></figure><ol start="3"><li>Square:</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Square</span>(<span class="hljs-params">props</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> classColor = <span class="hljs-string">`color<span class="hljs-subst">$&#123;props.value&#125;</span>`</span>; <span class="hljs-comment">//é¢œè‰²</span><br>  <span class="hljs-keyword">let</span> visibilityHidden = props.value ? <span class="hljs-string">&quot;&quot;</span> : <span class="hljs-string">&quot;visibilityHidden&quot;</span>; <span class="hljs-comment">//ä¸º0ä¸æ˜¾ç¤ºæ•°æ®</span><br><br>  <span class="hljs-keyword">return</span> (<br>    &lt;div className=&#123;<span class="hljs-string">`button-square <span class="hljs-subst">$&#123;classColor&#125;</span>`</span>&#125;&gt;<br>      &lt;span className=&#123;visibilityHidden&#125;&gt;&#123;props.value&#125;&lt;/span&gt;<br>    &lt;/div&gt;<br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Square;<br></code></pre></td></tr></table></figure><h2 id="React-Hooks-çš„ä½¿ç”¨"><a href="#React-Hooks-çš„ä½¿ç”¨" class="headerlink" title="React Hooks çš„ä½¿ç”¨"></a>React Hooks çš„ä½¿ç”¨</h2><h3 id="useEffect-å’Œ-useRef"><a href="#useEffect-å’Œ-useRef" class="headerlink" title="useEffect å’Œ useRef"></a>useEffect å’Œ useRef</h3><p>ç”¨<code>useEffect</code>è¿™ä¸ªé’©å­æ¥å®ŒæˆåŸæ¥ <code>componentDidMount</code> çš„ä»»åŠ¡ï¼ˆä½†ä¸å®Œå…¨ç›¸ç­‰ï¼Œåé¢ä¼šè§£é‡Šï¼‰ï¼š</p><ol><li>ç›‘å¬é”®ç›˜äº‹ä»¶ï¼Œå½“è§¦å‘ä¸Šä¸‹å·¦å³æ—¶ï¼ŒæŒ‰æƒ…å†µå°†ä¸€ç»´æ•°ç»„å¤„ç†æˆäºŒç»´æ•°ç»„</li><li>è°ƒç”¨(åˆå¹¶)ç®—æ³•ï¼Œè®¡ç®—åˆ†æ•°å¹¶å°†åˆå¹¶åæ–°çš„äºŒç»´æ•°ç»„è¿”å›ï¼ŒæŒ‰æƒ…å†µå¤„ç†æˆä¸€ç»´æ•°ç»„</li><li>æ›´æ–°æ£‹å­</li><li>éšæœºç”Ÿæˆä¸€ä¸ªæ–°æ£‹å­</li><li>åˆ¤æ–­æ£‹ç›˜æ˜¯ä¸æ˜¯æ»¡äº†ï¼Œå¦‚æœæ˜¯ï¼Œè°ƒç”¨(å¤±è´¥)ç®—æ³•æ ¡éªŒæ¸¸æˆæ˜¯å¦ç»“æŸ</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js">useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> listener = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">switch</span> (e.keyCode) &#123;<br>      <span class="hljs-keyword">case</span> <span class="hljs-number">38</span>: <span class="hljs-comment">//ä¸Š</span><br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-number">40</span>: <span class="hljs-comment">//ä¸‹</span><br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-number">37</span>: <span class="hljs-comment">//å·¦</span><br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-number">39</span>: <span class="hljs-comment">//å³</span><br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">default</span>:<br>        <span class="hljs-keyword">break</span>;<br>    &#125;<br>  &#125;;<br>  <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&quot;keyup&quot;</span>, listener);<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">&quot;keyup&quot;</span>, listener);<br>&#125;);<br></code></pre></td></tr></table></figure><p>æ³¨æ„<br>Effect æ‹¿åˆ°çš„æ€»æ˜¯å®šä¹‰å®ƒçš„é‚£æ¬¡æ¸²æŸ“ä¸­çš„ props å’Œ stateã€‚<br>å…·ä½“è¯·çœ‹<a href="https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/">è¿™é‡Œ</a></p><p>ä»¥ä¸Šç¬¬ 3 æ­¥æ‰§è¡Œåï¼Œsquares å·²ç»æ›´æ–°ï¼Œä½†åœ¨ç¬¬ 4 æ­¥ä¸­å–åˆ°çš„ squares ä»ç„¶æ˜¯æ›´æ–°å‰çš„ï¼Œä½†æˆ‘ä»¬å¸Œæœ›ç”Ÿæˆæ–°æ£‹å­æ˜¯åœ¨åˆå¹¶åçš„æ£‹ç›˜åŸºç¡€ä¸Šï¼Œæ‰€ä»¥ä½¿ç”¨ useRef æ¥ä¿å­˜æ›´æ–°åçš„å€¼ã€‚<br><code>const curSquares = useRef(squares);</code><br>åŒç†ç¬¬ 4~5 æ­¥</p><h3 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> [squares, setSquares] = useState(setDefaultChess()); <span class="hljs-comment">//æ£‹å­</span><br><span class="hljs-keyword">const</span> [score, setScore] = useState(<span class="hljs-number">0</span>); <span class="hljs-comment">//åˆ†æ•°</span><br><span class="hljs-keyword">const</span> [gameFailed, setGameFailed] = useState(<span class="hljs-literal">false</span>); <span class="hljs-comment">//æ˜¯å¦å¤±è´¥</span><br></code></pre></td></tr></table></figure><p>ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œå°† squaresã€scoreã€gameFailed éƒ½è®¾ä¸ºåˆå§‹çŠ¶æ€</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newGame</span>(<span class="hljs-params"></span>) </span>&#123;<br>  setSquares(setDefaultChess());<br>  setScore(<span class="hljs-number">0</span>);<br>  setGameFailed(<span class="hljs-literal">false</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><h3 id="åˆå¹¶"><a href="#åˆå¹¶" class="headerlink" title="åˆå¹¶"></a>åˆå¹¶</h3><p>è¿™æ˜¯ 2048 æœ€é‡è¦çš„é€»è¾‘ï¼Œä»¥å‘å·¦äº‹ä»¶ä¸ºä¾‹ï¼š</p><p>æ‰€æœ‰æ•°æ®å‘å·¦è·‘ï¼Œæ‰€ä»¥æ•°æ®åˆ†ä¸ºå››ç»„ï¼Œæ¯ä¸€è¡Œå•ç‹¬è¿›è¡Œåˆå¹¶è¿ç®—ï¼Œé‚£æ¯ä¸€è¡Œçš„é€»è¾‘æ˜¯ï¼š<br><img src="https://i.loli.net/2019/04/19/5cb96f10362ad.png" alt="move"></p><ol><li>éå†è¡Œæ•°ç»„ï¼Œå–ä¸‹æ ‡ j ä¸ºå½“å‰ä½ç½®ï¼Œä»å½“å‰ä½ç½®çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼ˆå–ä¸‹æ ‡ä¸º tï¼‰å¼€å§‹ï¼Œæ‰¾ç¬¬ä¸€ä¸ªé 0 çš„ä½ç½®ï¼›</li><li>å¦‚æœæ‰¾åˆ°ï¼š</li><li>å½“å‰ä½ç½®ä¸º 0ï¼Œåˆ™å½“å‰ä½ç½®ä¸ä¸‹ä¸€ä¸ªä½ç½®çš„æ•°äº’æ¢ï¼ˆæ­¤å¤„è¦å°†ä¸‹æ ‡ jâ€“ï¼Œç­‰äºè¯´ä¸‹ä¸€æ¬¡å¤–å¾ªç¯è¿˜æ˜¯ä»è¿™ä¸ªä½ç½® j å¼€å§‹ï¼‰ï¼›</li><li>å½“å‰ä½ç½®é 0 ä¸”ä¸ä¸‹ä¸€ä¸ªä½ç½®çš„æ•°ç›¸ç­‰ï¼Œå°†å½“å‰ä½ç½®çš„æ•°*2ï¼Œä¸‹ä¸€ä¸ªä½ç½®çš„æ•°ç½® 0</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resetChess</span>(<span class="hljs-params">paramsArr</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> arr = paramsArr.slice();<br>  <span class="hljs-keyword">let</span> scoreCur = score;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; arr[i].length; j++) &#123;<br>      <span class="hljs-comment">//jä»0å¼€å§‹éå†æ•°ç»„</span><br>      <span class="hljs-keyword">let</span> flag = <span class="hljs-literal">false</span>;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> t = j + <span class="hljs-number">1</span>; t &lt; arr[i].length; t++) &#123;<br>        <span class="hljs-comment">//æ‰¾jå³ä¾§ç¬¬ä¸€ä¸ªä¸ä¸º0çš„æ•°</span><br>        <span class="hljs-keyword">if</span> (arr[i][t]) &#123;<br>          <span class="hljs-comment">//æ‰¾åˆ°</span><br>          <span class="hljs-keyword">if</span> (arr[i][j] === <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-comment">//jä½ç½®çš„å€¼ä¸º0ï¼Œäº¤æ¢</span><br>            arr[i][j] = arr[i][t];<br>            arr[i][t] = <span class="hljs-number">0</span>;<br>            flag = <span class="hljs-literal">true</span>;<br>          &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr[i][j] === arr[i][t]) &#123;<br>            <span class="hljs-comment">//jä½ç½®çš„å€¼å’Œtä½ç½®çš„å€¼ç›¸ç­‰ï¼Œåˆå¹¶</span><br>            arr[i][j] *= <span class="hljs-number">2</span>;<br>            arr[i][t] = <span class="hljs-number">0</span>;<br>            scoreCur += arr[i][j];<br>          &#125;<br>          <span class="hljs-keyword">break</span>;<br>        &#125;<br>      &#125;<br>      <span class="hljs-keyword">if</span> (flag) &#123;<br>        <span class="hljs-comment">//flagä¸ºtrueï¼ŒjæŒ‡é’ˆä¸å˜</span><br>        j--;<br>      &#125;<br>    &#125;<br>  &#125;<br>  setScore(scoreCur);<br>  <span class="hljs-keyword">return</span> arr;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¤±è´¥"><a href="#å¤±è´¥" class="headerlink" title="å¤±è´¥"></a>å¤±è´¥</h3><p>æ£‹ç›˜æ»¡å­çš„æ—¶å€™åˆ¤æ–­æ˜¯å¦å¤±è´¥:</p><p>éå†æ•°ç»„ï¼Œæ¯ä¸ªæ£‹å­ç›¸é‚»çš„ä¸Šä¸‹å·¦å³éƒ½ä¸å’Œå®ƒç›¸ç­‰åˆ™æ¸¸æˆç»“æŸã€‚</p><p>ç®€åŒ–ä¸€ä¸‹å°±æ˜¯ 2ã€3ã€4 è¡Œçš„æ£‹å­å’Œå®ƒç›¸é‚»ä¸Šæ–¹çš„æ£‹å­ä¸ç›¸ç­‰ ä¸” 2ï¼Œ3ï¼Œ4 åˆ—çš„æ£‹å­å’Œå®ƒç›¸é‚»å·¦è¾¹çš„æ£‹å­ä¸ç›¸ç­‰ åˆ™æ¸¸æˆç»“æŸã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkFail</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> arr = curSquares.current.slice();<br>  <span class="hljs-keyword">let</span> flag = <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br>    <span class="hljs-keyword">if</span> (i - <span class="hljs-number">4</span> &gt;= <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-keyword">if</span> (arr[i] === arr[i - <span class="hljs-number">4</span>]) &#123;<br>        <span class="hljs-comment">// console.log(90, i);</span><br>        flag = <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">break</span>;<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (i % <span class="hljs-number">4</span> !== <span class="hljs-number">3</span>) &#123;<br>      <span class="hljs-keyword">if</span> (arr[i] === arr[i + <span class="hljs-number">1</span>]) &#123;<br>        flag = <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">break</span>;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> flag;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>è¿˜æœ‰ä¸€äº›ä¾‹å¦‚ï¼šæ£€æŸ¥æ£‹ç›˜æ˜¯å¦æ»¡å­ã€åˆ›é€ é»˜è®¤æ£‹å­ã€éšæœºç”Ÿæˆä¸€ä¸ªæ£‹å­ã€æ£€æŸ¥æ£‹ç›˜å“ªä¸ªä½ç½®æ²¡æœ‰æ£‹å­ã€ä¸Šä¸‹å·¦å³ç§»åŠ¨æ—¶æ•°æ®çš„åˆ†ç»„ç­‰ç­‰ä¸åœ¨æ­¤èµ˜è¿°</p><h2 id="åŠ¨ç”»"><a href="#åŠ¨ç”»" class="headerlink" title="åŠ¨ç”»"></a>åŠ¨ç”»</h2><ul><li>ç»™æ£‹å­çš„ button-squareclass åŠ ä¸€ä¸ª transition: 0.2s;ï¼Œåˆ™æ¯ä¸€ä¸ªæ£‹å­çš„æ˜¾ç¤ºæ¶ˆå¤±éƒ½æœ‰ 0.2s çš„æ¸éšæ—¶é—´</li><li>ç”Ÿæˆæ–°æ£‹å­ä»¥åŠåˆ¤æ–­å¤±è´¥ï¼Œå¿…é¡»è¦åœ¨åˆå¹¶æ£‹ç›˜ä¹‹åï¼Œæ‰€ä»¥ç»™ä»–ä»¬åŠ ä¸€ä¸ªå»¶æ—¶</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  setRandomChess(); <span class="hljs-comment">//ç”Ÿæˆéšæœºæ–°æ£‹å­</span><br>  <span class="hljs-keyword">if</span> (idFullBoard()) &#123;<br>    <span class="hljs-comment">//æ£‹ç›˜æ²¡æœ‰ç©ºæ ¼æ—¶åˆ¤æ–­æ˜¯å¦å¤±è´¥</span><br>    <span class="hljs-keyword">if</span> (checkFail()) &#123;<br>      setGameFailed(<span class="hljs-literal">true</span>);<br>    &#125;<br>  &#125;<br>&#125;, <span class="hljs-number">200</span>);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨ Hexo å’Œ GitHub Pages æ¥å»ºç«‹è‡ªå·±çš„åšå®¢</title>
    <link href="/2019/03/05/new-blog/"/>
    <url>/2019/03/05/new-blog/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>git</li><li>node.js</li><li>hexo<br><code>mkdir hexo</code> æ–°å»ºæ–‡ä»¶å¤¹<br><code>cd hexo</code><br><code>yarn global add hexo</code> æˆ– <code>npm i -g hexo</code> å…¨å±€å®‰è£… hexo</li></ul><a id="more"></a><h2 id="åˆ›å»ºæœ¬åœ°æ–‡ä»¶"><a href="#åˆ›å»ºæœ¬åœ°æ–‡ä»¶" class="headerlink" title="åˆ›å»ºæœ¬åœ°æ–‡ä»¶"></a>åˆ›å»ºæœ¬åœ°æ–‡ä»¶</h2><ol><li><code>hexo init</code> åˆå§‹åŒ–ä¸€ç³»åˆ—æ–‡ä»¶</li><li><code>hexo g</code> ç”Ÿæˆé™æ€é¡µé¢</li><li><code>hexo s</code> å¯åŠ¨æœ¬åœ°æœåŠ¡<br>åœ¨ç½‘é¡µè¾“å…¥åœ°å€ <code>localhost:4000</code> å°±å¯ä»¥çœ‹åˆ°æœ¬åœ°çš„ç½‘é¡µå•¦<br><img src="https://i.loli.net/2019/03/26/5c99871cdacfe.png" alt="preview"></li><li><code>hexo new &quot;new-page&quot;</code> åˆ›å»ºä¸€ç¯‡æ–‡ç« </li><li><code>&lt;!--more--&gt;</code>æ ‡ç­¾å¯ä»¥ä½¿æ–‡ç« åœ¨ä¸»é¡µä¸­åªå±•ç¤ºå‰åŠéƒ¨åˆ†</li></ol><h2 id="ä½¿ç”¨ä¸»é¢˜"><a href="#ä½¿ç”¨ä¸»é¢˜" class="headerlink" title="ä½¿ç”¨ä¸»é¢˜"></a>ä½¿ç”¨ä¸»é¢˜</h2><p>ä½ å¯ä»¥åœ¨<a href="https://hexo.io/themes/">è¿™é‡Œ</a>é€‰æ‹©ä½ å–œæ¬¢çš„ä¸»é¢˜<br>æˆ‘é€‰æ‹©äº†<a href="https://github.com/fluid-dev/hexo-theme-fluid">fluid</a>:</p><h2 id="GitHub-Pages"><a href="#GitHub-Pages" class="headerlink" title="GitHub Pages"></a>GitHub Pages</h2><ol><li><p>æ–°å»ºä¸€ä¸ªä»“åº“,ä»“åº“åå¿…é¡»ä¸º <code>[yourname].github.io</code><br><img src="https://i.loli.net/2019/03/26/5c9989508beba.png" alt="repo"></p></li><li><p>æ–°å¢ SSH å¯†é’¥åˆ° GitHub å¸æˆ·: <a href="https://docs.github.com/cn/github/authenticating-to-github/adding-a-new-ssh-key-to-your-github-account">æ•™ç¨‹</a></p></li><li><p>ä¿®æ”¹é¡¹ç›®é…ç½®æ–‡ä»¶ <code>_config.yml</code> ä¸­çš„å†…å®¹</p></li></ol><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">deploy:</span><br><span class="hljs-symbol"> type:</span> git<br><span class="hljs-symbol"> repo:</span> git@github.com:yourname/yourname.github.io.git<br><span class="hljs-symbol"> branch:</span> master<br></code></pre></td></tr></table></figure><ol start="4"><li>ä¸Šä¼ åˆ° github<br>å®‰è£…å‘å¸ƒæ’ä»¶:<code>yarn add hexo-deployer-git</code>æˆ–<code>npm install hexo-deployer-git --save</code><br>æ‰§è¡Œæäº¤ï¼š</li></ol><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs verilog">hexo clean<br>hexo <span class="hljs-keyword">generate</span><br>hexo deploy<br></code></pre></td></tr></table></figure><ol start="5"><li>ä¿®æ”¹<code>package.json</code>æ–‡ä»¶ï¼Œscripts ä¸‹åŠ ä¸€è¡Œå‘½ä»¤ï¼š<br><code>&quot;d&quot;: &quot;hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy&quot;</code><br>æ¯æ¬¡æ‰§è¡Œ<code>yarn d</code>ï¼Œå°±ç­‰äºæ‰§è¡Œç¬¬å››æ­¥ä¸­æäº¤å‘½ä»¤ã€‚</li></ol><h2 id="ä½¿ç”¨ä¸ªäººåŸŸå"><a href="#ä½¿ç”¨ä¸ªäººåŸŸå" class="headerlink" title="ä½¿ç”¨ä¸ªäººåŸŸå"></a>ä½¿ç”¨ä¸ªäººåŸŸå</h2><ol><li><p>å…ˆé€‰æ‹©ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„åŸŸåè´­ä¹°ï¼ˆè´­ä¹°åéœ€è¦å®åè®¤è¯ï¼‰</p></li><li><p>è®¤è¯æˆåŠŸåéœ€è¦è§£æåŸŸå</p></li><li><p>ç‚¹å‡»è§£æ<br><img src="https://i.loli.net/2019/03/26/5c999ae043a1b.png" alt="domain"></p></li><li><p>ç‚¹å‡»æ·»åŠ çºªå½•<br><img src="https://i.loli.net/2019/03/26/5c999b251c2cd.png" alt="record"></p></li><li><p>è®°å½•ç±»å‹é€‰æ‹© CNAME<br>è®°å½•å€¼å¡«å†™ github çš„åœ°å€<br><img src="https://i.loli.net/2019/03/26/5c999b74759bb.png" alt="cname"></p></li><li><p>åœ¨æœ¬åœ°åšå®¢æ–‡ä»¶å¤¹ä¸­çš„ source æ–‡ä»¶ä¸­æ–°å»ºä¸€ä¸ª CNAME æ–‡ä»¶ï¼Œåœ¨é‡Œé¢å†™ä¸Šä½ çš„åŸŸå,ç„¶åå†éƒ¨ç½²ä¸€æ¬¡ <code>yarn d</code></p></li><li><p>è¿›å…¥ github é¡¹ç›®ï¼Œç‚¹å‡» settingsï¼Œå¾€ä¸‹æ‹‰æ‰¾åˆ° github pagesï¼Œåœ¨ custom domain ä¸­å¡«å†™ä½ çš„åŸŸåå¹¶ä¿å­˜ï¼ŒæˆåŠŸåå°±å¯ä»¥é€šè¿‡ä½ çš„åŸŸåè¿›å…¥ä¸ªäººç½‘ç«™äº†</p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>GitHub</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
